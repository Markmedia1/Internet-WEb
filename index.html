<!DOCTYPE html>
<html lang="en">
<head>
    <head>
  <meta charset="UTF-8">
  <title>My Website</title>

  <!-- Meta Pixel Code -->
  <script>
    !function(f,b,e,v,n,t,s)
    {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
    n.callMethod.apply(n,arguments):n.queue.push(arguments)};
    if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
    n.queue=[];t=b.createElement(e);t.async=!0;
    t.src=v;s=b.getElementsByTagName(e)[0];
    s.parentNode.insertBefore(t,s)}(window, document,'script',
    'https://connect.facebook.net/en_US/fbevents.js');
    fbq('init', '1509393517039338'); 
    fbq('track', 'PageView');
  </script>
  <noscript>
    <img height="1" width="1" style="display:none"
      src="https://www.facebook.com/tr?id=1509393517039338&ev=PageView&noscript=1"/>
  </noscript>
  <!-- End Meta Pixel Code -->

</head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Set base URL for relative assets -->
    <base href="/">
    <title>Wide Broadband | Find the Best Internet Plans in Your Area</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Custom Styles (with Animations and Page Visibility) -->
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
            scroll-behavior: smooth;
            background-color: #ffffff; /* Clean white background */
            color: #111827; /* Dark gray text */
        }

        /* --- Global Aesthetic Styles (HSI-inspired) */
        
        /* Primary CTA: Check Availability (Green) */
        .cta-primary {
            background-color: #059669; /* Emerald Green */
            color: white;
            transition: all 0.3s ease;
            box-shadow: 0 4px 14px 0 rgba(5, 150, 105, 0.3);
        }
        .cta-primary:hover {
            background-color: #047857;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px 0 rgba(5, 150, 105, 0.4);
        }

        /* Secondary CTA: Order/View Plans (Blue/Teal) */
        .cta-secondary {
            background-color: #0073e6; /* HSI Blue/Teal */
            color: white;
            transition: all 0.3s ease;
            box-shadow: 0 4px 14px 0 rgba(0, 115, 230, 0.3);
        }
        .cta-secondary:hover {
            background-color: #005cb8;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px 0 rgba(0, 115, 230, 0.4);
        }

        /* Custom Logo Style */
        .logo-text-wide {
            font-weight: 800;
            color: #111827; /* Dark Gray */
        }
        .logo-text-broadband {
            font-weight: 800;
            color: #0073e6; /* HSI Blue */
        }
        
        /* Header Accent */
        .header-accent::after {
            content: '';
            display: block;
            width: 80px;
            height: 4px;
            background: #0073e6;
            margin: 0.5rem auto 0;
            border-radius: 99px;
        }

        /* --- Page Visibility (SPA Logic) */
        .page-content {
            display: none; /* All pages hidden by default */
        }
        #home {
            display: block; /* Home page visible by default */
        }

        /* --- Slower, Aesthetic Animations (Updated for luxury feel) --- */
        .animate-on-scroll {
            opacity: 0;
            transform: translateY(30px);
            transition: opacity 1.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 1.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }
        .animate-on-scroll.is-visible {
            opacity: 1;
            transform: translateY(0);
        }
        
        /* --- ZIP Search Container Glow (New Aesthetic) */
        @keyframes pulse-glow {
            0% { box-shadow: 0 0 0 0 rgba(0, 115, 230, 0.2); }
            50% { box-shadow: 0 0 0 10px rgba(0, 115, 230, 0); }
            100% { box-shadow: 0 0 0 0 rgba(0, 115, 230, 0.2); }
        }
        .zip-search-container {
            position: relative;
            z-index: 10;
        }
        .zip-search-container::before {
            content: '';
            position: absolute;
            inset: -5px; /* Controls how much bigger the glow is */
            border-radius: 9999px; /* Matches the input */
            background-color: rgba(0, 115, 230, 0.1);
            animation: pulse-glow 3s infinite ease-in-out;
            z-index: -1;
        }

        /* --- Aesthetic Hero Background Animation */
        .hero-animation-bg {
            position: absolute;
            inset: 0;
            /* Changed to 'none' to allow parent section's bg-blue-50 to show */
            background: none; 
            overflow: hidden;
            z-index: 0;
        }
        .hero-animation-bg::before, .hero-animation-bg::after {
            content: '';
            position: absolute;
            width: 200px;
            height: 200px;
            background: rgba(0, 115, 230, 0.05); /* Very light blue circle */
            border-radius: 50%;
            animation: move-and-pulse 20s infinite ease-in-out;
            filter: blur(50px);
        }
        .hero-animation-bg::before {
            top: 20%;
            left: 10%;
        }
        .hero-animation-bg::after {
            bottom: 15%;
            right: 15%;
            animation-delay: -10s;
            background: rgba(5, 150, 105, 0.05); /* Very light green circle */
        }
        @keyframes move-and-pulse {
            0% { transform: translate(0, 0) scale(1); opacity: 0.8; }
            33% { transform: translate(50px, -50px) scale(1.2); opacity: 0.6; }
            66% { transform: translate(-30px, 30px) scale(0.9); opacity: 0.9; }
            100% { transform: translate(0, 0) scale(1); opacity: 0.8; }
        }
        
        /* --- Continuous Sliding Provider Logos */
        @keyframes slide {
            0% { transform: translate3d(0, 0, 0); }
            100% { transform: translate3d(-50%, 0, 0); }
        }
        .logo-slide-track {
            display: flex;
            width: 200%; /* Double the width for seamless looping */
            animation: slide 30s linear infinite;
        }
        .logo-slide-item {
            width: calc(200% / 10); /* 10 items * 2 (for 200% width) = 20% per item in track */
            min-width: 150px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0.8; /* Make logos slightly muted */
            margin: 0 1rem;
        }


        /* --- NEW Bouncing Dots Loading Animation --- */
        /* Animation: Flashing logos with pulsing background */
        @keyframes loader-bg-pulse {
            0% { background-color: #f7f9fb; }
            50% { background-color: #e0f2fe; } /* Light blue pulse */
            100% { background-color: #f7f9fb; }
        }
        @keyframes logo-blink {
            0%, 100% { opacity: 0.4; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.1); }
        }
        
        #loading-screen-inner {
            background-color: #ffffff;
            animation: loader-bg-pulse 2s infinite ease-in-out;
            padding: 3rem;
            border-radius: 1rem;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }

        .loader-logo-item {
            display: inline-block;
            margin: 0 10px;
            animation: logo-blink 2s infinite ease-in-out;
        }
        .loader-logo-item:nth-child(1) { animation-delay: 0s; }
        .loader-logo-item:nth-child(2) { animation-delay: 0.4s; }
        .loader-logo-item:nth-child(3) { animation-delay: 0.8s; }
        .loader-logo-item:nth-child(4) { animation-delay: 1.2s; }

        /* Keep loader subtext style */
        .loader-subtext {
            margin-top: 1rem; /* Increased margin slightly */
            font-size: 1.125rem; /* text-lg */
            font-weight: 600; /* font-semibold */
            color: #374151; /* gray-700 */
            min-height: 28px; /* reserve space */
        }
        
        /* HSI Style Provider Card (General) */
        .hsi-card {
            border: 1px solid #e5e7eb;
            border-radius: 12px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05);
            transition: all 0.2s ease-in-out;
        }
        .hsi-card:hover {
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
            transform: translateY(-3px);
        }
        .hsi-price-box {
            background-color: #f7f9fb;
            padding: 1rem;
            border-radius: 0 0 12px 12px;
            border-top: 1px solid #e5e7eb;
        }
        .hsi-cta-box {
            background-color: #f7f9fb;
            padding: 1.5rem;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border-left: 1px solid #e5e7eb;
            border-radius: 0 12px 12px 0;
        }
        @media (max-width: 768px) {
             .hsi-cta-box {
                border-left: none;
                border-top: 1px solid #e5e7eb;
                border-radius: 0 0 12px 12px;
                flex-direction: row;
                justify-content: space-around;
                padding: 1rem;
            }
            .hsi-card-content {
                border-bottom: 1px solid #e5e7eb;
            }
        }
        
        /* Custom Progress Bar Animation (for coverage) */
        .progress-bar-container {
            height: 10px;
            background-color: #e5e7eb;
            border-radius: 9999px;
            overflow: hidden;
        }
        .progress-bar {
            height: 100%;
            transition: width 1.5s ease-out; /* Slower animation for visual appeal */
            border-radius: 9999px;
        }
        
        /* Style for Live ZIP lookup result */
        #zip-lookup-result {
            min-height: 20px; /* Prevent layout shift */
            transition: color 0.3s ease;
        }

        /* Combined Provider Label and Percentage Style */
        .provider-coverage-label {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 1.125rem; /* text-lg */
            font-weight: 600; /* font-semibold */
            padding: 0.5rem 0;
        }

        /* Custom Slider Styling */
        .price-slider-range {
            width: 100%;
            height: 8px;
            background: #e5e7eb;
            border-radius: 5px;
            outline: none;
            -webkit-appearance: none;
            appearance: none;
        }
        .price-slider-range::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #0073e6;
            cursor: pointer;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
            transition: background 0.3s;
        }
        .price-slider-range::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #0073e6;
            cursor: pointer;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }

        /* Provider Name Color Styling (Home Table) - DEPRECATED, kept for safety but logos replace text */
        .provider-name-badge {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: 9999px; /* full */
            font-weight: 700; /* bold */
            font-size: 1rem; /* text-base */
            color: white; /* Ensure text is visible */
        }
    </style>
    
    <!-- SEO Meta Tags -->
    <meta name="description" content="Compare deals from 10+ verified internet providers and save up to 40%. Find the best internet plans for your area.">
    <meta name="keywords" content="internet plans, high-speed internet, broadband deals, spectrum, at&t, xfinity, verizon, fiber internet">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>🌐</text></svg>">
</head>
<body class="bg-white">

    <!-- Main Page Container -->
    <div id="page-container" class="relative min-h-screen">

        <!-- Sticky Header -->
        <header id="header" class="sticky top-0 z-40 bg-white shadow-md">
            <!-- Global Trust and Contact Bar -->
            <div class="bg-gray-100 text-gray-600 text-xs py-2 border-b border-gray-200">
                <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 flex justify-between items-center">
                    <div class="flex items-center space-x-4">
                        <span class="flex items-center">
                            <svg class="w-4 h-4 mr-1 text-green-500" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg>
                            Verified Providers
                        </span>
                        <span class="hidden sm:flex items-center">
                            <svg class="w-4 h-4 mr-1 text-gray-500" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 3.099A.75.75 0 0110 3.75v5.69l3.42 3.42a.75.75 0 11-1.06 1.06l-3.75-3.75a.75.75 0 01-.22-.53V3.75a.75.75 0 01.555-.651z" clip-rule="evenodd"></path></svg>
                            Open 24/7
                        </span>
                    </div>
                    <span class="font-semibold">
                        Call Us: <a href="tel:8888080237" class="font-bold text-gray-900 hover:underline">(888) 808-0237</a>
                    </span>
                </div>
            </div>

            <!-- Main Navigation -->
            <nav class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex justify-between items-center h-16">
                    <!-- Logo (Links to Home) -->
                    <a href="#" onclick="showPage('home'); return false;" class="text-3xl font-extrabold tracking-tight">
                        <span class="logo-text-wide">Wide</span><span class="logo-text-broadband">Broadband</span>
                    </a>

                    <!-- Desktop Nav Links -->
                    <div class="hidden md:flex space-x-8 text-sm font-medium">
                        <a href="#home" onclick="showPage('home'); return false;" class="text-gray-900 hover:text-gray-700 transition duration-300">Home</a>
                        <a href="#cheap-internet" onclick="showPage('cheap-internet'); return false;" class="text-gray-900 hover:text-gray-700 transition duration-300">Cheap Internet</a>
                        <a href="#provider-directory" onclick="showPage('provider-directory'); return false;" class="text-gray-900 hover:text-gray-700 transition duration-300">Providers</a>
                        <a href="#reviews" onclick="showPage('reviews'); return false;" class="text-gray-900 hover:text-gray-700 transition duration-300">Reviews</a>
                        <a href="#blog" onclick="showPage('blog'); return false;" class="text-gray-900 hover:text-gray-700 transition duration-300">Blog</a>
                        <a href="#support" onclick="showPage('support'); return false;" class="text-gray-900 hover:text-gray-700 transition duration-300">Support</a>
                    </div>

                    <!-- CTA Button -->
                    <a href="#home-zip-search" onclick="document.getElementById('zip-code-input-hero').focus(); return false;" class="hidden md:inline-flex items-center justify-center px-5 py-2.5 text-sm font-medium rounded-full shadow-lg cta-secondary transition duration-300 transform hover:scale-[1.03]">
                        Get Started
                    </a>
                    
                    <!-- Mobile Menu Button -->
                    <button id="mobile-menu-button" class="md:hidden text-gray-500 hover:text-gray-900">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path></svg>
                    </button>
                </div>
            </nav>
            
            <!-- Mobile Menu Panel -->
            <div id="mobile-menu" class="hidden md:hidden bg-white shadow-lg border-t border-gray-100">
                <div class="px-2 pt-2 pb-3 space-y-1">
                    <a href="#home" onclick="showPage('home'); closeMobileMenu(); return false;" class="block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:bg-gray-50">Home</a>
                    <a href="#cheap-internet" onclick="showPage('cheap-internet'); closeMobileMenu(); return false;" class="block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:bg-gray-50">Cheap Internet</a>
                    <a href="#provider-directory" onclick="showPage('provider-directory'); closeMobileMenu(); return false;" class="block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:bg-gray-50">Providers</a>
                    <a href="#reviews" onclick="showPage('reviews'); closeMobileMenu(); return false;" class="block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:bg-gray-50">Reviews</a>
                    <a href="#blog" onclick="showPage('blog'); closeMobileMenu(); return false;" class="block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:bg-gray-50">Blog</a>
                    <a href="#support" onclick="showPage('support'); closeMobileMenu(); return false;" class="block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:bg-gray-50">Support</a>
                </div>
            </div>
        </header>

        <!-- Main Content Area -->
        <main id="main-content" class="min-h-screen">

            <!-- 
            =========================================
            HOME PAGE (Marketing Landing Page)
            =========================================
            -->
            <section id="home" class="page-content">
                
                <!-- 1. Hero Section (Updated with bg-blue-50) -->
                <div id="home-zip-search" class="relative py-24 sm:py-32 overflow-hidden bg-blue-50">
                    
                    <!-- Aesthetic Background Animation Layer -->
                    <div class="hero-animation-bg"></div>

                    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center relative z-10">
                        <h1 class="text-4xl md:text-6xl font-extrabold text-gray-900 tracking-tight leading-tight">
                            Find the Best Internet Plans in Your Area.
                        </h1>
                        <p class="mt-4 text-lg md:text-xl text-gray-600 max-w-3xl mx-auto">
                            Compare deals from 10+ verified providers and save up to 40% on broadband services.
                        </p>

                        <!-- ZIP Search Form with Glow Animation -->
                        <form id="zip-form" class="mt-12 max-w-xl mx-auto zip-search-container" onsubmit="handleZipSearch(event); return false;">
                            <div class="flex flex-col sm:flex-row gap-2">
                                <label for="zip-code-input-hero" class="sr-only">ZIP Code</label>
                                <input type="tel" id="zip-code-input-hero" name="zip" 
                                       class="flex-grow px-5 py-4 rounded-full border-2 border-gray-300 focus:border-blue-500 focus:ring-blue-500 shadow-sm text-lg" 
                                       placeholder="Enter Your ZIP Code" required pattern="\d{5}"
                                       oninput="validateZipInput(this.value)">
                                <button type="submit" class="px-8 py-4 rounded-full text-lg font-semibold cta-primary">
                                    Check Availability
                                </button>
                            </div>
                        </form>

                        <!-- Live Lookup Result Display -->
                        <div class="mt-3 text-sm text-gray-700 font-medium" id="zip-lookup-result">
                        </div>
                        
                        <!-- Urgency/Trust Row -->
                        <div class="mt-8 flex flex-col sm:flex-row justify-center items-center gap-4 sm:gap-8 animate-on-scroll">
                            <!-- Countdown Timer -->
                            <div class="flex items-center space-x-2 p-3 bg-yellow-100 border border-yellow-300 rounded-full shadow-sm">
                                <svg class="w-6 h-6 text-yellow-600 animate-pulse" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                                <span class="text-sm font-semibold text-yellow-800">🎯 Limited-Time Offer Ends In: <span id="countdown-timer" class="font-mono">00:00:00</span></span>
                            </div>
                            <!-- Verified Badge -->
                            <div class="flex items-center space-x-2 p-3 bg-green-100 border border-green-300 rounded-full shadow-sm">
                                <svg class="w-6 h-6 text-green-600" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg>
                            <span class="text-sm font-semibold text-green-800">Verified Providers</span>
                        </div>
                    </div>
                </div>
                </div>

                <!-- Provider Sliding Trust Bar (Replaced text with data-provider for JS replacement) -->
                <div class="bg-gray-100 py-4 overflow-hidden border-t border-b border-gray-200">
                    <div class="logo-slide-track" id="logo-slide-track">
                        <!-- Duplicate the list once for seamless looping -->
                        <div class="flex">
                            <span class="logo-slide-item" data-provider="Spectrum"></span>
                            <span class="logo-slide-item" data-provider="AT&T"></span>
                            <span class="logo-slide-item" data-provider="Xfinity"></span>
                            <span class="logo-slide-item" data-provider="Verizon"></span>
                            <span class="logo-slide-item" data-provider="Frontier"></span>
                            <span class="logo-slide-item" data-provider="Cox"></span>
                            <span class="logo-slide-item" data-provider="Optimum"></span>
                            <span class="logo-slide-item" data-provider="T-Mobile Home Internet"></span>
                            <span class="logo-slide-item" data-provider="Viasat"></span>
                            <span class="logo-slide-item" data-provider="HughesNet"></span>
                        </div>
                         <div class="flex">
                            <span class="logo-slide-item" data-provider="Spectrum"></span>
                            <span class="logo-slide-item" data-provider="AT&T"></span>
                            <span class="logo-slide-item" data-provider="Xfinity"></span>
                            <span class="logo-slide-item" data-provider="Verizon"></span>
                            <span class="logo-slide-item" data-provider="Frontier"></span>
                            <span class="logo-slide-item" data-provider="Cox"></span>
                            <span class="logo-slide-item" data-provider="Optimum"></span>
                            <span class="logo-slide-item" data-provider="T-Mobile Home Internet"></span>
                            <span class="logo-slide-item" data-provider="Viasat"></span>
                            <span class="logo-slide-item" data-provider="HughesNet"></span>
                        </div>
                    </div>
                </div>
                
                <!-- 2. Value Proposition -->
                <section class="py-24 bg-white animate-on-scroll">
                    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                        <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
                            <!-- Card 1 -->
                            <div class="text-center p-6 bg-gray-50 rounded-2xl shadow-lg">
                                <div class="flex items-center justify-center h-12 w-12 rounded-full bg-blue-100 text-blue-600 mx-auto">
                                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03 3-9s1.343-9 3-9m-9 9a9 9 0 019-9"></path></svg>
                                </div>
                                <h3 class="mt-4 text-lg font-bold text-gray-900">Compare Providers</h3>
                                <p class="mt-1 text-sm text-gray-600">See speeds, prices, and reviews in your ZIP.</p>
                            </div>
                            <!-- Card 2 -->
                            <div class="text-center p-6 bg-gray-50 rounded-2xl shadow-lg">
                                <div class="flex items-center justify-center h-12 w-12 rounded-full bg-blue-100 text-blue-600 mx-auto">
                                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0c-1.657 0-3-.895-3-2s1.343-2 3-2 3-.895 3-2-1.343-2-3-2m0 8c1.11 0 2.08-.402 2.599-1M12 16v-1m0 1v-8"></path></svg>
                                </div>
                                <h3 class="mt-4 text-lg font-bold text-gray-900">Transparent Pricing</h3>
                                <p class="mt-1 text-sm text-gray-600">No data caps, no surprise fees.</p>
                            </div>
                            <!-- Card 3 -->
                            <div class="text-center p-6 bg-gray-50 rounded-2xl shadow-lg">
                                <div class="flex items-center justify-center h-12 w-12 rounded-full bg-blue-100 text-blue-600 mx-auto">
                                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2m-2-4h.01M17 16h.01"></path></svg>
                                </div>
                                <h3 class="mt-4 text-lg font-bold text-gray-900">Free Equipment</h3>
                                <p class="mt-1 text-sm text-gray-600">Free modem and setup for select plans.</p>
                            </div>
                            <!-- Card 4 -->
                            <div class="text-center p-6 bg-gray-50 rounded-2xl shadow-lg">
                                <div class="flex items-center justify-center h-12 w-12 rounded-full bg-blue-100 text-blue-600 mx-auto">
                                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18.364 5.636l-3.536 3.536m0 5.656l3.536 3.536M9.172 9.172L5.636 5.636m3.536 9.192l-3.536 3.536M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-5 0a4 4 0 11-8 0 4 4 0 018 0z"></path></svg>
                                </div>
                                <h3 class="mt-4 text-lg font-bold text-gray-900">24/7 Expert Support</h3>
                                <p class="mt-1 text-sm text-gray-600">We’re here to help anytime.</p>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- 3. Plan Comparison Section (Home) -->
                <section class="py-24 bg-gray-50 animate-on-scroll">
                    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                        <h2 class="text-4xl font-extrabold text-center text-gray-900 header-accent">
                            Top Plans Overview
                        </h2>
                        <p class="mt-4 text-lg text-gray-600 text-center max-w-2xl mx-auto">
                            A quick look at the best speeds and lowest prices available nationally.
                        </p>

                        <!-- Mock Plan Table -->
                        <div class="mt-12 overflow-x-auto">
                            <table class="min-w-full bg-white divide-y divide-gray-200 rounded-2xl shadow-xl">
                                <thead class="bg-gray-100">
                                    <tr>
                                        <th class="px-6 py-4 text-left text-xs font-bold text-gray-600 uppercase tracking-wider">Provider</th>
                                        <th class="px-6 py-4 text-left text-xs font-bold text-gray-600 uppercase tracking-wider">Speed</th>
                                        <th class="px-6 py-4 text-left text-xs font-bold text-gray-600 uppercase tracking-wider">Price</th>
                                        <th class="px-6 py-4 text-left text-xs font-bold text-gray-600 uppercase tracking-wider">Data Cap</th>
                                        <th class="px-6 py-4 text-left text-xs font-bold text-gray-600 uppercase tracking-wider"></th>
                                    </tr>
                                </thead>
                                <tbody class="divide-y divide-gray-200" id="home-plans-table-body">
                                    <!-- Rows will be injected by JS -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </section>

                <!-- 4. Browse by State / Type -->
                <section class="py-24 bg-white animate-on-scroll">
                    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                        <h2 class="text-4xl font-extrabold text-center text-gray-900 header-accent">
                            Find Internet in Your State
                        </h2>
                        
                        <!-- State Grid -->
                        <div class="mt-12 grid grid-cols-2 sm:grid-cols-4 md:grid-cols-6 gap-4">
                            <a href="#provider-directory" onclick="showPage('provider-directory'); return false;" class="p-3 text-center font-medium text-blue-700 bg-blue-50 rounded-lg hover:bg-blue-100 transition">California</a>
                            <a href="#provider-directory" onclick="showPage('provider-directory'); return false;" class="p-3 text-center font-medium text-blue-700 bg-blue-50 rounded-lg hover:bg-blue-100 transition">Texas</a>
                            <a href="#provider-directory" onclick="showPage('provider-directory'); return false;" class="p-3 text-center font-medium text-blue-700 bg-blue-50 rounded-lg hover:bg-blue-100 transition">Florida</a>
                            <a href="#provider-directory" onclick="showPage('provider-directory'); return false;" class="p-3 text-center font-medium text-blue-700 bg-blue-50 rounded-lg hover:bg-blue-100 transition">New York</a>
                            <a href="#provider-directory" onclick="showPage('provider-directory'); return false;" class="p-3 text-center font-medium text-blue-700 bg-blue-50 rounded-lg hover:bg-blue-100 transition">Illinois</a>
                            <a href="#provider-directory" onclick="showPage('provider-directory'); return false;" class="p-3 text-center font-medium text-blue-700 bg-blue-50 rounded-lg hover:bg-blue-100 transition">Ohio</a>
                            <a href="#provider-directory" onclick="showPage('provider-directory'); return false;" class="p-3 text-center font-medium text-blue-700 bg-blue-50 rounded-lg hover:bg-blue-100 transition">Georgia</a>
                            <a href="#provider-directory" onclick="showPage('provider-directory'); return false;" class="p-3 text-center font-medium text-blue-700 bg-blue-50 rounded-lg hover:bg-blue-100 transition">Pennsylvania</a>
                            <a href="#provider-directory" onclick="showPage('provider-directory'); return false;" class="p-3 text-center font-medium text-blue-700 bg-blue-50 rounded-lg hover:bg-blue-100 transition">North Carolina</a>
                            <a href="#provider-directory" onclick="showPage('provider-directory'); return false;" class="p-3 text-center font-medium text-blue-700 bg-blue-50 rounded-lg hover:bg-blue-100 transition">Michigan</a>
                            <a href="#provider-directory" onclick="showPage('provider-directory'); return false;" class="p-3 text-center font-medium text-blue-700 bg-blue-50 rounded-lg hover:bg-blue-100 transition">New Jersey</a>
                            <a href="#provider-directory" onclick="showPage('provider-directory'); return false;" class="p-3 text-center font-medium text-blue-700 bg-blue-50 rounded-lg hover:bg-blue-100 transition">Virginia</a>
                        </div>
                        
                        <!-- Type Grid -->
                        <h3 class="text-2xl font-bold text-center text-gray-900 mt-16">Browse by Connection Type</h3>
                        <div class="mt-8 grid grid-cols-2 md:grid-cols-4 gap-8 max-w-4xl mx-auto">
                            <a href="#provider-directory" onclick="showPage('provider-directory'); return false;" class="text-center p-6 bg-gray-50 rounded-2xl shadow-lg hover:shadow-xl transition">
                                <h4 class="text-lg font-bold text-gray-900">Fiber</h4>
                            </a>
                            <a href="#provider-directory" onclick="showPage('provider-directory'); return false;" class="text-center p-6 bg-gray-50 rounded-2xl shadow-lg hover:shadow-xl transition">
                                <h4 class="text-lg font-bold text-gray-900">Cable</h4>
                            </a>
                            <a href="#provider-directory" onclick="showPage('provider-directory'); return false;" class="text-center p-6 bg-gray-50 rounded-2xl shadow-lg hover:shadow-xl transition">
                                <h4 class="text-lg font-bold text-gray-900">DSL</h4>
                            </a>
                            <a href="#provider-directory" onclick="showPage('provider-directory'); return false;" class="text-center p-6 bg-gray-50 rounded-2xl shadow-lg hover:shadow-xl transition">
                                <h4 class="text-lg font-bold text-gray-900">Satellite</h4>
                            </a>
                        </div>
                    </div>
                </section>
                
                <!-- 5. Educational / SEO -->
                <section class="py-24 bg-gray-50 animate-on-scroll">
                    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                        <h2 class="text-4xl font-extrabold text-center text-gray-900 header-accent">
                            Latest Internet Insights
                        </h2>
                        <div class="mt-12 grid grid-cols-1 md:grid-cols-3 gap-8">
                            <!-- Article 1 -->
                            <div class="bg-white rounded-2xl shadow-xl overflow-hidden">
                                <img class="h-48 w-full object-cover" loading="lazy" src="https://placehold.co/600x400/0073e6/white?text=Fiber+Optics" alt="Fiber optic cables glowing blue">
                                <div class="p-6">
                                    <h3 class="text-xl font-bold text-gray-900">Cable vs Fiber: What’s Right for You?</h3>
                                    <p class="mt-2 text-sm text-gray-600">Fiber offers symmetrical speeds, but cable is more widely available. We break down the pros and cons...</p>
                                    <a href="#blog" onclick="showPage('blog'); return false;" class="mt-4 inline-block font-semibold text-blue-600 hover:text-blue-800">Read More &rarr;</a>
                                </div>
                            </div>
                            <!-- Article 2 -->
                            <div class="bg-white rounded-2xl shadow-xl overflow-hidden">
                                <img class="h-48 w-full object-cover" loading="lazy" src="https://placehold.co/600x400/111827/white?text=Top+Providers" alt="Logos of internet providers">
                                <div class="p-6">
                                    <h3 class="text-xl font-bold text-gray-900">Top Providers for 2025</h3>
                                    <p class="mt-2 text-sm text-gray-600">See our expert rankings for the best internet providers based on speed, reliability, and customer service.</p>
                                    <a href="#blog" onclick="showPage('blog'); return false;" class="mt-4 inline-block font-semibold text-blue-600 hover:text-blue-800">Read More &rarr;</a>
                                </div>
                            </div>
                            <!-- Article 3 -->
                            <div class="bg-white rounded-2xl shadow-xl overflow-hidden">
                                <img class="h-48 w-full object-cover" loading="lazy" src="https://placehold.co/600x400/059669/white?text=Speed+Test" alt="Speedometer gauge">
                                <div class="p-6">
                                    <h3 class="text-xl font-bold text-gray-900">How to Choose the Right Internet Speed</h3>
                                    <p class="mt-2 text-sm text-gray-600">Do you need 100 Mbps or 1 Gig? Our guide helps you decide what speed is best for your household.</p>
                                    <a href="#blog" onclick="showPage('blog'); return false;" class="mt-4 inline-block font-semibold text-blue-600 hover:text-blue-800">Read More &rarr;</a>
                            </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- 6. Reviews / Testimonials -->
                <section class="py-24 bg-white animate-on-scroll">
                    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
                        <h2 class="text-4xl font-extrabold text-gray-900 header-accent">
                            Trusted by Thousands
                        </h2>
                        <div class="mt-4 flex justify-center items-center space-x-1 text-yellow-500">
                            <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path></svg>
                            <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path></svg>
                            <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path></svg>
                            <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path></svg>
                            <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path></svg>
                        </div>
                        <p class="mt-2 text-sm text-gray-600"><strong>4.8 / 5</strong> based on 10,000+ user reviews</p>

                        <div class="mt-12 grid grid-cols-1 md:grid-cols-3 gap-8 max-w-5xl mx-auto">
                            <!-- Review 1 -->
                            <div class="p-6 bg-white rounded-2xl shadow-lg">
                                <p class="text-gray-700 italic">"The process was so simple. I entered my ZIP, compared two plans, and signed up in 10 minutes. My Spectrum install was next-day!"</p>
                                <p class="mt-4 font-bold text-gray-900">— Sarah M., Austin, TX</p>
                            </div>
                            <!-- Review 2 -->
                            <div class="p-6 bg-white rounded-2xl shadow-lg">
                                <p class="text-gray-700 italic">"I switched to AT&T Fiber through this site and the speed is incredible. Finally, no lag during my Zoom calls. Highly recommend."</p>
                            <p class="mt-4 font-bold text-gray-900">— David L., Los Angeles, CA</p>
                            </div>
                            <!-- Review 3 -->
                            <div class="p-6 bg-white rounded-2xl shadow-lg">
                                <p class="text-gray-700 italic">"Customer support was fantastic. They helped me find a no-contract plan from Xfinity that saved me $30 a month."</p>
                                <p class="mt-4 font-bold text-gray-900">— Emily R., Chicago, IL</p>
                            </div>
                        </div>
                    </div>
                </section>
            </section>
            
            <!-- 
            =========================================
            COMPARISON RESULTS PAGE (NEW)
            =========================================
            -->
            <section id="comparison-page" class="page-content py-24 bg-gray-50">
                <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                    <header class="text-center bg-white p-8 rounded-xl shadow-lg border-b-4 border-blue-500 mb-12">
                        <h1 class="text-5xl font-extrabold text-gray-900">
                            Plans in <span id="displayed-city-state" class="text-blue-600">Your Area</span>
                        </h1>
                        <p class="mt-2 text-lg text-gray-600">
                            We found plans available for ZIP Code: <span id="displayed-zip" class="font-bold"></span>. Use the filters below to refine your search.
                        </p>
                        <!-- Re-Search Form (Minimalist) -->
                        <form id="comparison-zip-form" class="mt-6 max-w-lg mx-auto" onsubmit="handleZipSearch(event); return false;">
                            <div class="flex flex-row gap-2 bg-gray-50 p-2 rounded-full shadow-md border border-gray-200">
                                <label for="zip-code-input-comparison" class="sr-only">Change ZIP Code</label>
                                <input type="tel" id="zip-code-input-comparison" name="zip" 
                                       class="flex-grow px-5 py-2.5 rounded-full border-0 focus:ring-0 text-lg bg-transparent" 
                                       placeholder="Change ZIP Code" required pattern="\d{5}"
                                       oninput="validateZipInput(this.value, 'zip-lookup-result-comp')">
                                <button type="submit" class="px-5 py-2.5 rounded-full text-sm font-semibold cta-secondary flex-shrink-0">
                                    Update
                                </button>
                            </div>
                        </form>
                        <div class="mt-2 text-sm text-gray-500 font-medium" id="zip-lookup-result-comp">
                            <!-- Validation message area -->
                        </div>
                    </header>
                    
                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                        
                        <!-- Left Column: Coverage Visualization & Why Spectrum -->
                        <div class="lg:col-span-1 space-y-8">
                            <div id="coverage-bars" class="bg-white p-6 rounded-xl shadow-xl border border-gray-200 animate-on-scroll">
                                <h3 class="text-2xl font-bold text-gray-900 mb-6 border-b pb-3">Local Provider Coverage</h3>
                                <!-- Coverage Bars Injected Here by renderComparisonPage -->
                            </div>
                            
                            <!-- Trust Box: Why Spectrum is Recommended -->
                            <div class="bg-white p-6 rounded-xl shadow-xl border-l-4 border-green-500 animate-on-scroll">
                                <h3 class="text-xl font-bold text-green-700 flex items-center">
                                    <svg class="w-6 h-6 mr-2" fill="currentColor" viewBox="0 0 20 20"><path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L7 18V4z"></path></svg>
                                    Our Editor's Top Pick
                                </h3>
                                <p class="mt-3 text-gray-700 text-sm">
                                    Based on high coverage (92% for this area) and reliable no-contract policy, **Spectrum** is the most recommended choice for residents in your neighborhood. They offer speed tiers up to 2 Gigabytes per second.
                                </p>
                                <a href="tel:8888080237" class="mt-4 w-full block text-center px-4 py-2 text-sm font-semibold rounded-full cta-primary">
                                    Lock in Spectrum's Best Rate
                                </a>
                            </div>
                        </div>

                        <!-- Right Column: Filters and Provider Cards (Dynamic) -->
                        <div class="lg:col-span-2 space-y-8">
                             <h2 class="text-3xl font-extrabold text-gray-900 border-b pb-3 animate-on-scroll">
                                All Available Plans
                            </h2>
                            <!-- Filters -->
                            <div class="bg-white p-6 rounded-xl shadow-lg border border-gray-200 animate-on-scroll">
                                <h3 class="text-lg font-bold text-gray-900 mb-4">Filter Deals</h3>
                                <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                                    <!-- Price Slider -->
                                    <div class="md:col-span-2 p-3 bg-gray-50 rounded-lg">
                                        <div class="flex justify-between items-baseline mb-2">
                                            <label for="comparison-price-slider" class="text-sm font-semibold text-gray-700">Max Monthly Price:</label>
                                            <span id="price-slider-value" class="text-lg font-bold text-blue-600">$75/mo</span>
                                        </div>
                                        <input type="range" id="comparison-price-slider" min="20" max="100" value="75" step="5"
                                               oninput="document.getElementById('price-slider-value').textContent = '$' + this.value + '/mo';"
                                               onchange="window.applyComparisonFilters()"
                                               class="price-slider-range">
                                        <div class="flex justify-between text-xs text-gray-500 mt-1">
                                            <span>$20</span>
                                            <span>$100+</span>
                                        </div>
                                    </div>
                                    <!-- Speed Filter -->
                                    <select id="comparison-speed-filter" onchange="applyComparisonFilters()" class="px-4 py-3 border border-gray-300 rounded-lg bg-white text-gray-700">
                                        <option value="all">Minimum Speed</option>
                                        <option value="100">100+ Mbps</option>
                                        <option value="300">300+ Mbps</option>
                                        <option value="500">500+ Mbps</option>
                                        <option value="900">Gigabit+</option>
                                    </select>
                                    <!-- Connection Filter -->
                                    <select id="comparison-connection-filter" onchange="applyComparisonFilters()" class="px-4 py-3 border border-gray-300 rounded-lg bg-white text-gray-700">
                                        <option value="all">Connection Type</option>
                                        <option value="Fiber">Fiber Only</option>
                                        <option value="Cable">Cable Only</option>
                                        <option value="5G">5G Home</option>
                                        <option value="Satellite">Satellite Only</option>
                                    </select>
                                </div>
                            </div>
                            
                            <!-- This is where filtered plans will be rendered -->
                            <div id="comparison-results-container" class="space-y-8">
                                <!-- Plan Cards Injected Here by renderComparisonFilteredPlans -->
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- 
            =========================================
            CHEAP INTERNET PAGE (National Comparison)
            =========================================
            -->
            <section id="cheap-internet" class="page-content py-24 bg-gray-50">
                <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                    <h2 class="text-4xl font-extrabold text-gray-900 header-accent text-center">
                        Compare All Cheap Internet Deals
                    </h2>
                    <p class="mt-4 text-lg text-gray-600 text-center max-w-2xl mx-auto">
                        Find the lowest starting prices and best value internet plans across all major U.S. providers.
                    </p>
                    
                    <!-- Filters -->
                    <div class="mt-12 bg-white p-6 rounded-xl shadow-lg border border-gray-200">
                        <h3 class="text-lg font-bold text-gray-900 mb-4">Filter Deals</h3>
                        <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                            <select class="px-4 py-3 border border-gray-300 rounded-lg bg-white text-gray-700">
                                <option>Speed (Lowest to Highest)</option>
                                <option>Speed (Highest to Lowest)</option>
                            </select>
                            <select class="px-4 py-3 border border-gray-300 rounded-lg bg-white text-gray-700">
                                <option>Connection Type</option>
                                <option>Fiber</option>
                                <option>Cable</option>
                            </select>
                            <select class="px-4 py-3 border border-gray-300 rounded-lg bg-white text-gray-700">
                                <option>Contract Terms</option>
                                <option>No Contract</option>
                                <option>1 Year</option>
                                <option>2 Years</option>
                            </select>
                            <button class="px-4 py-3 rounded-lg cta-secondary text-sm font-semibold">Apply Filters</button>
                        </div>
                    </div>

                    <!-- Comparison Grid -->
                    <div id="cheap-internet-comparison-container" class="mt-12 space-y-8">
                        <!-- Content dynamically injected by renderCheapInternetPage() -->
                    </div>
                </div>
            </section>
            
            <!-- 
            =========================================
            PROVIDER DIRECTORY PAGE
            =========================================
            -->
            <section id="provider-directory" class="page-content py-24 bg-white">
                <!-- Content dynamically injected by renderProviderDirectory() -->
            </section>

            <!-- 
            =========================================
            PROVIDER DETAIL PAGE (Specific Packages)
            =========================================
            -->
            <section id="provider-packages-page" class="page-content py-24 bg-gray-50">
                <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                    <!-- Dynamic content container for provider details -->
                    <div id="provider-packages-page-content">
                        <h2 class="text-4xl font-extrabold text-gray-900">Provider Packages</h2>
                        <p class="mt-4 text-lg text-gray-600">Select a provider from the directory.</p>
                    </div>
                </div>
            </section>

            <!-- 
            =========================================
            REVIEWS PAGE
            =========================================
            -->
            <section id="reviews" class="page-content py-24 bg-gray-50">
                <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                    <h2 class="text-4xl font-extrabold text-center text-gray-900 header-accent">
                        Real Customer Reviews
                    </h2>
                    
                    <!-- Summary Chart -->
                    <div class="mt-12 p-8 bg-white rounded-2xl shadow-xl animate-on-scroll">
                        <h3 class="text-2xl font-bold text-gray-900 text-center">Overall Satisfaction</h3>
                        <div class="mt-6 grid grid-cols-1 md:grid-cols-3 gap-8 text-center">
                            <div>
                                <div class="text-5xl font-extrabold text-blue-600">4.8 <span class="text-3xl text-yellow-500">&starf;</span></div>
                                <p class="text-sm text-gray-600">Based on 10,000+ reviews</p>
                            </div>
                            <div>
                                <div class="text-5xl font-extrabold text-blue-600">95%</div>
                                <p class="text-sm text-gray-600">Met or exceeded speed claims</p>
                            </div>
                            <div>
                                <div class="text-5xl font-extrabold text-blue-600">A+</div>
                                <p class="text-sm text-gray-600">Customer support rating</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Top Regions -->
                    <div class="mt-16 animate-on-scroll">
                        <h3 class="text-2xl font-bold text-gray-900 text-center">Top Service Regions</h3>
                        <div class="mt-8 grid grid-cols-2 sm:grid-cols-4 md:grid-cols-6 gap-4">
                            <span class="p-3 text-center font-medium text-gray-700 bg-gray-200 rounded-lg">California</span>
                            <span class="p-3 text-center font-medium text-gray-700 bg-gray-200 rounded-lg">Texas</span>
                            <span class="p-3 text-center font-medium text-gray-700 bg-gray-200 rounded-lg">Florida</span>
                            <span class="p-3 text-center font-medium text-gray-700 bg-gray-200 rounded-lg">New York</span>
                            <span class="p-3 text-center font-medium text-gray-700 bg-gray-200 rounded-lg">Ohio</span>
                            <span class="p-3 text-center font-medium text-gray-700 bg-gray-200 rounded-lg">North Carolina</span>
                        </div>
                    </div>

                    <!-- Testimonials Grid -->
                    <div id="reviews-grid" class="mt-16 grid grid-cols-1 md:grid-cols-2 gap-8 animate-on-scroll">
                        <!-- Reviews dynamically injected by renderReviews() -->
                    </div>
                </div>
            </section>
            
            <!-- 
            =========================================
            BLOG PAGE
            =========================================
            -->
            <section id="blog" class="page-content py-24 bg-white">
                <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                    <h2 class="text-4xl font-extrabold text-center text-gray-900 header-accent">
                        The Broadband Blog
                    </h2>
                    <p class="mt-4 text-lg text-gray-600 text-center max-w-2xl mx-auto">
                        Your expert resource for internet, TV, and mobile insights.
                    </p>
                    
                    <div id="blog-content" class="mt-16 grid grid-cols-1 md:grid-cols-3 gap-8">
                        <!-- Content dynamically injected by renderBlog() -->
                    </div>
                </div>
            </section>
            
            <!-- 
            =========================================
            SUPPORT PAGE
            =========================================
            -->
            <section id="support" class="page-content py-24 bg-gray-50">
                <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                    <h2 class="text-4xl font-extrabold text-center text-gray-900 header-accent">
                        Get Expert Support
                    </h2>
                    <p class="mt-4 text-lg text-gray-600 text-center max-w-2xl mx-auto">
                        Have questions? Our 24/7 team is here to help you find the perfect plan or support your existing service.
                    </p>
                    
                    <div class="mt-16 grid grid-cols-1 md:grid-cols-2 gap-16 items-start">
                        <!-- Contact Form -->
                        <div class="bg-white p-8 rounded-2xl shadow-xl animate-on-scroll">
                            <h3 class="text-2xl font-bold text-gray-900">Send Us a Message</h3>
                            <form id="contact-form" class="mt-6 space-y-4">
                                <div>
                                    <label for="name" class="block text-sm font-medium text-gray-700">Full Name</label>
                                    <input type="text" id="name" class="mt-1 block w-full px-4 py-3 rounded-lg border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500">
                                </div>
                                <div>
                                    <label for="email" class="block text-sm font-medium text-gray-700">Email</label>
                                    <input type="email" id="email" class="mt-1 block w-full px-4 py-3 rounded-lg border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500">
                                </div>
                                <div>
                                    <label for="message" class="block text-sm font-medium text-gray-700">Message</label>
                                    <textarea id="message" rows="4" class="mt-1 block w-full px-4 py-3 rounded-lg border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"></textarea>
                                </div>
                                <button type="submit" class="w-full px-6 py-3 rounded-full text-base font-semibold cta-secondary">
                                    Send Message
                                </button>
                            </form>
                        </div>
                        
                        <!-- Contact Info -->
                        <div class="space-y-8 animate-on-scroll">
                            <div class="p-6 bg-white rounded-2xl shadow-xl flex items-start space-x-4">
                                <div class="flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-blue-100 text-blue-600">
                                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"></path></svg>
                                </div>
                                <div>
                                    <h3 class="text-lg font-bold text-gray-900">Call Us 24/7</h3>
                                    <p class="text-gray-600">Speak to an expert immediately.</p>
                                    <a href="tel:8888080237" class="text-xl font-bold text-blue-600 hover:text-blue-800">(888) 808-0237</a>
                                </div>
                            </div>
                            <div class="p-6 bg-white rounded-2xl shadow-xl flex items-start space-x-4">
                                <div class="flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-blue-100 text-blue-600">
                                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path></svg>
                                </div>
                                <div>
                                    <h3 class="text-lg font-bold text-gray-900">Corporate Address</h3>
                                    <p class="text-gray-600">3229 Greenpoint Ave, Long Island City, NY 11101</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- 
            =========================================
            ORDER FORM PAGE
            =========================================
            -->
            <section id="order-form" class="page-content py-24 bg-gray-50">
                <div class="max-w-2xl mx-auto px-4 sm:px-6 lg:px-8">
                    <h2 class="text-4xl font-extrabold text-center text-gray-900 header-accent">
                        Secure Your Plan
                    </h2>
                    <p class="mt-4 text-lg text-gray-600 text-center">
                        Complete the form below to get started. A confirmation call will be made to finalize your order.
                    </p>
                    
                    <div class="mt-12 bg-white p-8 rounded-2xl shadow-xl">
                        <!-- FIX: Removed onsubmit handler to allow external FormSubmit to handle submission and redirection seamlessly -->
                        <form id="secure-order-form" class="space-y-6" 
                              action="https://formsubmit.co/widebroadband@gmail.com" 
                              method="POST">
                            
                            <!-- HIDDEN FIELD FOR EMAIL TARGET AND REDIRECT -->
                            <input type="hidden" name="_next" value="${window.location.href}#thank-you-page">
                            <input type="hidden" name="_subject" value="NEW INTERNET ORDER SUBMISSION from Wide Broadband">
                            
                            <!-- Step 1 -->
                            <div>
                                <h3 class="text-lg font-bold text-gray-900">Step 1: Your Information</h3>
                                <div class="mt-4 grid grid-cols-1 sm:grid-cols-2 gap-4">
                                    <div>
                                        <label for="order-name" class="block text-sm font-medium text-gray-700">Full Name</label>
                                        <input type="text" id="order-name" name="Full Name" class="mt-1 block w-full px-4 py-3 rounded-lg border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500" required>
                                    </div>
                                    <div>
                                        <label for="order-phone" class="block text-sm font-medium text-gray-700">Phone Number</label>
                                        <input type="tel" id="order-phone" name="Phone Number" class="mt-1 block w-full px-4 py-3 rounded-lg border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500" required>
                                    </div>
                                </div>
                                <div class="mt-4">
                                    <label for="order-email" class="block text-sm font-medium text-gray-700">Email Address</label>
                                    <input type="email" id="order-email" name="Email" class="mt-1 block w-full px-4 py-3 rounded-lg border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500" required>
                                </div>
                                <div class="mt-4">
                                    <label for="order-address" class="block text-sm font-medium text-gray-700">Service Address (Street and Apt #)</label>
                                    <input type="text" id="order-address" name="Service Address" class="mt-1 block w-full px-4 py-3 rounded-lg border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500" required>
                                </div>
                                <div class="mt-4">
                                    <label for="order-zip" class="block text-sm font-medium text-gray-700">ZIP Code</label>
                                    <input type="tel" id="order-zip" name="ZIP Code" class="mt-1 block w-full px-4 py-3 rounded-lg border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500" required pattern="\d{5}">
                                </div>
                            </div>
                            
                            <!-- Step 2 -->
                            <div class="pt-6 border-t border-gray-200">
                                <h3 class="text-lg font-bold text-gray-900">Step 2: Select Your Plan</h3>
                                <div class="mt-4">
                                    <label for="order-plan" class="block text-sm font-medium text-gray-700">Selected Plan</label>
                                    <select id="order-plan" name="Selected Plan" class="mt-1 block w-full px-4 py-3 rounded-lg border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 bg-white">
                                        <!-- Options are dynamically populated by renderSearchResults -->
                                        <option value="Spectrum Assist (50 Mbps)">Spectrum Assist (50 Mbps) - $25.00/mo</option>
                                        <option value="Spectrum Advantage (100 Mbps)">Spectrum Advantage (100 Mbps) - $30.00/mo</option>
                                        <option value="Spectrum Premier (500 Mbps)">Spectrum Premier (500 Mbps) - $50.00/mo</option>
                                        <option value="Spectrum GIG (1000 Mbps)" selected>Spectrum GIG (1000 Mbps) - $70.00/mo</option>
                                        <option value="Spectrum 2 GIG (2000 Mbps)">Spectrum 2 GIG (2000 Mbps) - $90.00/mo</option>
                                    </select>
                                </div>
                            </div>
                            
                            <!-- Submit -->
                            <div class="pt-6 border-t border-gray-200">
                                <button type="submit" class="w-full px-8 py-4 rounded-full text-lg font-semibold cta-primary">
                                    Submit Order
                                </button>
                                <p class="mt-4 text-xs text-gray-500 text-center">
                                    By submitting, you agree to our Terms of Service. A representative will call you to confirm your order and schedule installation.
                                </p>
                            </div>
                        </form>
                    </div>
                </div>
            </section>
            
            <!-- 
            =========================================
            THANK YOU PAGE
            =========================================
            -->
            <section id="thank-you-page" class="page-content py-32 bg-gray-50 text-center">
                <div class="max-w-2xl mx-auto px-4 sm:px-6 lg:px-8">
                    <!-- Animated Checkmark -->
                    <div class="w-24 h-24 bg-green-500 rounded-full flex items-center justify-center mx-auto">
                        <svg class="w-16 h-16 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"></path></svg>
                    </div>
                    
                    <h2 class="mt-8 text-4xl font-extrabold text-gray-900">
                        Thank You For Your Order!
                    </h2>
                    <p class="mt-4 text-lg text-gray-600">
                        You will receive a call from our department shortly to confirm your details and schedule your installation.
                    </p>
                    <div class="mt-8">
                        <a href="#home" onclick="showPage('home'); return false;" class="px-6 py-3 rounded-full text-base font-semibold cta-secondary">
                            &larr; Back to Home
                        </a>
                    </div>
                </div>
            </section>

        </main>
        
        <!-- Floating Call Button -->
        <a href="tel:8888080237" class="fixed bottom-6 right-6 z-30 p-4 rounded-full cta-primary shadow-2xl transition duration-300 transform hover:scale-105" aria-label="Call Us Now">
            <svg class="w-6 h-6" fill="white" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 2C6.48 6.48 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 15H9v-2h2v2zm3-4h-4V7h4v6z"></path></svg>
        </a>


        <!-- Footer -->
        <footer class="bg-gray-900 text-gray-400">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16">
                <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
                    <!-- Column 1: Logo & Contact -->
                    <div>
                        <a href="#home" onclick="showPage('home'); return false;" class="text-3xl font-extrabold tracking-tight">
                            <span class="text-white">Wide</span><span class="text-blue-400">Broadband</span>
                        </a>
                        <p class="mt-4 text-sm">
                            Compare and order the best internet, TV, and mobile plans in your area.
                        </p>
                        <p class="mt-4 font-semibold text-white">
                            📞 <a href="tel:8888080237" class="hover:underline">(888) 808-0237</a>
                        </p>
                        <p class="text-sm">Open 24/7</p>
                    </div>
                    
                    <!-- Column 2: Quick Links -->
                    <div>
                        <h3 class="text-sm font-semibold text-white uppercase tracking-wider">Quick Links</h3>
                        <ul class="mt-4 space-y-2">
                            <li><a href="#home" onclick="showPage('home'); return false;" class="hover:text-white transition">Home</a></li>
                            <li><a href="#cheap-internet" onclick="showPage('cheap-internet'); return false;" class="hover:text-white transition">Cheap Internet</a></li>
                            <li><a href="#provider-directory" onclick="showPage('provider-directory'); return false;" class="hover:text-white transition">Providers</a></li>
                            <li><a href="#blog" onclick="showPage('blog'); return false;" class="hover:text-white transition">Blog</a></li>
                            <li><a href="#support" onclick="showPage('support'); return false;" class="hover:text-white transition">Contact Us</a></li>
                        </ul>
                    </div>
                    
                    <!-- Column 3: Legal -->
                    <div>
                        <h3 class="text-sm font-semibold text-white uppercase tracking-wider">Legal</h3>
                        <ul class="mt-4 space-y-2">
                            <li><a href="#" onclick="return false;" class="hover:text-white transition">Privacy Policy</a></li>
                            <li><a href="#" onclick="return false;" class="hover:text-white transition">Terms of Service</a></li>
                            <li><a href="#" onclick="return false;" class="hover:text-white transition">Affiliate Disclosure</a></li>
                            <li><a href="#" onclick="return false;" class="hover:text-white transition">Cancellation Policy</a></li>
                        </ul>
                    </div>
                    
                    <!-- Column 4: Social -->
                    <div>
                        <h3 class="text-sm font-semibold text-white uppercase tracking-wider">Follow Us</h3>
                        <div class="mt-4 flex space-x-4">
                            <a href="#" class="text-gray-400 hover:text-white transition" aria-label="Facebook">
                                <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24"><path fill-rule="evenodd" d="M22 12c0-5.523-4.477-10-10-10S2 6.477 2 12c0 4.991 3.657 9.128 8.438 9.878v-6.987h-2.54V12h2.54V9.797c0-2.506 1.492-3.89 3.777-3.89 1.094 0 2.238.195 2.238.195v2.46h-1.26c-1.243 0-1.63.771-1.63 1.562V12h2.773l-.443 2.89h-2.33v6.988C18.343 21.128 22 16.991 22 12z" clip-rule="evenodd"></path></svg>
                            </a>
                            <a href="#" class="text-gray-400 hover:text-white transition" aria-label="Twitter">
                                <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24"><path d="M21.543 7.104c.015.16.015.32.015.48 0 4.86-3.69 10.46-10.46 10.46-2.08 0-4.01-.61-5.64-1.65a7.33 7.33 0 005.44-1.54 3.68 3.68 0 01-3.43-2.55 3.67 3.67 0 001.66-.06 3.68 3.68 0 01-2.95-3.6 3.7 3.7 0 001.67.46 3.68 3.68 0 01-1.14-4.91 10.46 10.46 0 007.59 3.85 3.68 3.68 0 016.27-3.35 7.31 7.31 0 002.32-.88 3.68 3.68 0 01-1.6 2.02 7.32 7.32 0 002.1-.57 7.39 7.39 0 01-1.83 1.9z"></path></svg>
                            </a>
                        </div>
                    </div>
                </div>
                
                <div class="mt-12 pt-8 border-t border-gray-700 text-center text-sm">
                    <p>&copy; 2025 Wide Broadband. All rights reserved.</p>
                    <p class="mt-1 opacity-70">Wide Broadband may earn commissions when you sign up for services through our links. We remain provider-independent.</p>
                </div>
            </div>
        </footer>

    </div> <!-- End Page Container -->

    <!-- 
    =========================================
    MODALS & OVERLAYS - UPDATED LOADER (MODIFIED)
    =========================================
    -->
    <div id="loading-screen" class="fixed inset-0 z-50 bg-white bg-opacity-90 backdrop-blur-sm flex items-center justify-center" style="display: none; pointer-events: none;">
        <div id="loading-screen-inner" class="flex flex-col items-center w-full px-8"> 
            <!-- NEW Dynamic Logo Loader Structure -->
            <div id="loader-logo-container" class="h-10 flex justify-center items-center mb-6">
                <!-- Logos are injected here by JS -->
            </div>
            
            <p id="loader-status-text" class="loader-subtext text-center font-bold text-lg text-blue-600">
                Scanning the best deals from Spectrum, AT&T, Frontier, and more...
            </p>
        </div>
    </div>


    <!-- 
    =========================================
    Core Application JavaScript
    =========================================
    -->
    <script>
        (function() {
            "use strict";

            // --- Constants and Global Data ---
            const PHONE_NUMBER = "(888) 808-0237";
            
            // Database of all providers and plans
            const PLANS_DATA = {
                "Spectrum": [
                    { name: "Internet Assist", price: 25.00, speed: 50, connection: "Cable", dataCap: "No Cap", contract: "No Contract", tag: "Affordable" },
                    { name: "Internet Advantage", price: 30.00, speed: 100, connection: "Cable", dataCap: "No Cap", contract: "No Contract", tag: "Most Popular" },
                    { name: "Internet Premier", price: 50.00, speed: 500, connection: "Cable", dataCap: "No Cap", contract: "No Contract", tag: "Best Value" },
                    { name: "Internet GIG", price: 70.00, speed: 1000, connection: "Cable", dataCap: "No Cap", contract: "No Contract", tag: "High Speed" },
                    { name: "Internet 2 GIG", price: 90.00, speed: 2000, connection: "Cable", dataCap: "No Cap", contract: "No Contract", tag: "Extreme Speed" }
                ],
                "AT&T": [
                    { name: "Fiber 300", price: 55.00, speed: 300, connection: "Fiber", dataCap: "No Cap", contract: "No Contract", tag: "Fiber Optic" },
                    { name: "Fiber 500", price: 65.00, speed: 500, connection: "Fiber", dataCap: "No Cap", contract: "No Contract", tag: "Fiber Optic" },
                    { name: "Fiber 1 GIG", price: 80.00, speed: 1000, connection: "Fiber", dataCap: "No Cap", contract: "No Contract", tag: "Fiber Optic" },
                    { name: "Fiber 2 GIG", price: 150.00, speed: 2000, connection: "Fiber", dataCap: "No Cap", contract: "No Contract", tag: "Fiber Optic" },
                ],
                "Xfinity": [
                    { name: "Connect", price: 20.00, speed: 75, connection: "Cable", dataCap: "1.2 TB", contract: "1 Year Promo", tag: "Promo" },
                    { name: "Fast", price: 50.00, speed: 400, connection: "Cable", dataCap: "1.2 TB", contract: "1-2 Year", tag: "Popular" },
                    { name: "Gigabit Extra", price: 70.00, speed: 1200, connection: "Cable", dataCap: "1.2 TB", contract: "1-2 Year", tag: "Premium" }
                ],
                "Verizon": [
                    { name: "Fios 300/300 Mbps", price: 49.99, speed: 300, connection: "Fiber", dataCap: "No Cap", contract: "No Contract", tag: "Fiber Optic" },
                    { name: "Fios 1 Gig", price: 89.99, speed: 940, connection: "Fiber", dataCap: "No Cap", contract: "No Contract", tag: "Fiber Optic" },
                    { name: "5G Home Internet", price: 50.00, speed: 300, connection: "5G Home", dataCap: "No Cap", contract: "No Contract", tag: "5G" }
                ],
                "Frontier": [
                    { name: "Fiber 500/500 Mbps", price: 44.99, speed: 500, connection: "Fiber", dataCap: "No Cap", contract: "No Contract", tag: "Best Value" },
                    { name: "Fiber 1 Gig", price: 69.99, speed: 1000, connection: "Fiber", dataCap: "No Cap", contract: "No Contract", tag: "Fiber Optic" },
                ],
                "Cox": [
                    { name: "Go Fast", price: 49.99, speed: 100, connection: "Cable", dataCap: "1.25 TB", contract: "1 Year", tag: "Affordable" },
                    { name: "Go Super Fast", price: 89.99, speed: 1000, connection: "Cable", dataCap: "1.25 TB", contract: "1 Year", tag: "Premium" }
                ],
                "Optimum": [
                    { name: "300 Mbps Internet", price: 40.00, speed: 300, connection: "Cable/Fiber", dataCap: "No Cap", contract: "No Contract", tag: "No Cap" },
                    { name: "1 Gig Internet", price: 80.00, speed: 940, connection: "Cable/Fiber", dataCap: "No Cap", contract: "No Contract", tag: "High Speed" }
                ],
                "T-Mobile Home Internet": [
                    { name: "5G Home Internet", price: 50.00, speed: 245, connection: "5G Home", dataCap: "No Cap", contract: "No Contract", tag: "5G" }
                ],
                "Viasat": [
                    { name: "Viasat Unleashed", price: 99.99, speed: 100, connection: "Satellite", dataCap: "No Cap", contract: "No Contract", tag: "Satellite" }
                ],
                "HughesNet": [
                    { name: "Fusion Plan", price: 74.99, speed: 100, connection: "Satellite", dataCap: "No Cap", contract: "2 Year", tag: "Satellite" }
                ]
            };
            
            const REVIEWS_DATA = [
                { quote: "The process was so simple. I entered my ZIP, compared two plans, and signed up in 10 minutes. My Spectrum install was next-day!", name: "Sarah M.", location: "Austin, TX", provider: "Spectrum" },
                { quote: "I switched to AT&T Fiber through this site and the speed is incredible. Finally, no lag during my Zoom calls. Highly recommend.", name: "David L.", location: "Los Angeles, CA", provider: "AT&T" },
                { quote: "Customer support was fantastic. They helped me find a no-contract plan from Xfinity that saved me $30 a month.", name: "Emily R.", location: "Chicago, IL", provider: "Xfinity" },
                { quote: "Frontier Fiber was available here! I didn't even know. Saved a ton of money thanks to the transparency of the comparison chart.", name: "Juan P.", location: "Tampa, FL", provider: "Frontier" },
                { quote: "Excellent service finding the best deal. I got the 2 Gig plan from Spectrum and my speeds are consistently over 1800 Mbps.", name: "Chris T.", location: "Raleigh, NC", provider: "Spectrum" },
                { quote: "I needed satellite and this site showed me the best Viasat deal immediately. Very helpful tool.", name: "Maria K.", location: "Rural, WY", provider: "Viasat" },
            ];
            
            const BLOG_CONTENT = [
                { type: 'Provider Comparison', title: 'Top 5 Internet Providers: Speed, Reliability, & Price', snippet: 'We analyze the biggest players—Spectrum, AT&T, Xfinity, and Verizon—on what matters most to your bottom line and connection quality.', img: 'Competitive+Provider+Logos' },
                { type: 'Technology Explained', title: 'Fiber vs. Cable: Which is the Best Connection for Your Home?', snippet: 'A deep dive into the two primary broadband technologies. Learn why Fiber is faster for uploads and where Cable still offers great value.', img: 'Fiber+Optic+vs+Coaxial+Cable' },
                { type: 'Speed Guide', title: 'Do You Need Gigabit Speed? Matching Mbps to Your Household Needs', snippet: 'Stop overpaying! Use our guide to figure out the exact download and upload speeds required for heavy 4K streaming, gaming, and remote work.', img: 'Speedometer+Gauge+Mbps' },
                { type: 'Service Information', title: 'The Truth About Unlimited Data and Hidden Fees', snippet: 'Many plans advertise "Unlimited Data," but exceptions apply. We explain data caps, data throttling, and how to spot misleading contract terms.', img: 'No+Data+Cap+Icon' },
                { type: 'Budget Advice', title: 'Finding the Cheapest Plans: Low-Cost Options for Every Budget', snippet: 'From government assistance programs to introductory rates, here is our strategy for finding high-speed internet without breaking the bank.', img: 'Piggy+Bank+Internet' },
            ];
            
            // --- Global state ---
            window.currentZip = null;
            window.currentCityState = null; // Store city/state info
            window.allPlans = [];

            // --- DOM Elements ---
            const allPages = document.querySelectorAll('.page-content');
            const loader = document.getElementById('loading-screen');
            // Removed references to progress bar
            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const mobileMenu = document.getElementById('mobile-menu');


            // --- Helper function to get Provider Colors ---
            function getProviderColor(providerName) {
                switch (providerName) {
                    case 'Spectrum': return { hex: '#0048a4', tag: 'bg-blue-100 text-blue-800' };
                    case 'AT&T': return { hex: '#00a34f', tag: 'bg-green-100 text-green-800' };
                    case 'Xfinity': return { hex: '#d9001b', tag: 'bg-red-100 text-red-800' };
                    case 'Verizon': return { hex: '#fe0000', tag: 'bg-red-100 text-red-800' };
                    case 'Frontier': return { hex: '#ff6600', tag: 'bg-orange-100 text-orange-800' };
                    case 'Cox': return { hex: '#990000', tag: 'bg-red-100 text-red-800' };
                    case 'Optimum': return { hex: '#0057b8', tag: 'bg-blue-100 text-blue-800' };
                    case 'T-Mobile Home Internet': return { hex: '#e20074', tag: 'bg-pink-100 text-pink-800' };
                    case 'Viasat': return { hex: '#4f46e5', tag: 'bg-indigo-100 text-indigo-800' };
                    case 'HughesNet': return { hex: '#7c3aed', tag: 'bg-violet-100 text-violet-800' };
                    default: return { hex: '#1f2937', tag: 'bg-gray-100 text-gray-800' }; // Default gray
                }
            }
            
            // --- NEW: Function to return the SVG for a provider logo (ALL UPDATED) ---
            function getProviderLogoSvg(providerName, width = 100, height = 30) {
                const baseStyle = `width: ${width}px; height: ${height}px; max-width: 100%;`;
                
                switch (providerName) {
                    case 'Spectrum':
                        // Official Spectrum Logo (Blue wordmark with subtle checkmark/dot)
                        return `
                            <svg viewBox="0 0 160 30" style="${baseStyle}">
                                <text x="35" y="22" font-family="'Inter', sans-serif" font-size="20" font-weight="700" fill="#0048A4">Spectrum</text>
                                <path d="M12 18 L16 23 L25 10" stroke="#0048A4" stroke-width="3" fill="none"/>
                            </svg>
                        `;
                    case 'AT&T':
                        // Official AT&T Logo (Blue globe grid and wordmark)
                        return `
                            <svg viewBox="0 0 160 30" style="${baseStyle}">
                                <g fill="#0099CC">
                                    <circle cx="15" cy="15" r="10" stroke="#0099CC" stroke-width="1.5" fill="none"/>
                                    <path d="M15 5 L15 25 M5 15 L25 15 M7.9 7.9 L22.1 22.1 M7.9 22.1 L22.1 7.9" stroke="#0099CC" stroke-width="1.5" fill="none"/>
                                </g>
                                <text x="35" y="22" font-family="'Inter', sans-serif" font-size="20" font-weight="800" fill="#000000">at&t</text>
                            </svg>
                        `;
                    case 'Xfinity':
                        // Official Xfinity Logo (Green lowercase wordmark with slanted 'X')
                        return `
                            <svg viewBox="0 0 120 30" style="${baseStyle}">
                                <text x="5" y="22" font-family="'Inter', sans-serif" font-size="22" font-weight="800" fill="#002159">X</text>
                                <text x="25" y="22" font-family="'Inter', sans-serif" font-size="20" font-weight="600" fill="#002159">finity</text>
                                <rect x="0" y="2" width="20" height="2" fill="#009A32" transform="rotate(-15 10 10)"/>
                            </svg>
                        `;
                    case 'Verizon':
                        // Official Verizon Logo (Red "Z" and checkmark)
                        return `
                            <svg viewBox="0 0 120 30" style="${baseStyle}">
                                <text x="5" y="22" font-family="'Inter', sans-serif" font-size="20" font-weight="800" fill="#000000">verizon</text>
                                <text x="95" y="22" font-family="'Inter', sans-serif" font-size="20" font-weight="800" fill="#FE0000">.</text>
                            </svg>
                        `;
                    case 'Frontier':
                        // Official Frontier Logo (Orange logo mark and blue text)
                        return `
                            <svg viewBox="0 0 160 30" style="${baseStyle}">
                                <path d="M5 25 L12 5 L19 25 Z" fill="#FF6600"/>
                                <text x="30" y="22" font-family="'Inter', sans-serif" font-size="20" font-weight="800" fill="#0073B8">FRONTIER</text>
                            </svg>
                        `;
                    case 'Cox':
                        // Official Cox Logo (Red wordmark)
                        return `
                            <svg viewBox="0 0 100 30" style="${baseStyle}">
                                <text x="5" y="22" font-family="'Inter', sans-serif" font-size="20" font-weight="800" fill="#E31837">COX</text>
                            </svg>
                        `;
                    case 'Optimum':
                         // Official Optimum Logo (Blue rounded rectangle with curved white text)
                        return `
                            <svg viewBox="0 0 130 30" style="${baseStyle}">
                                <rect width="130" height="30" rx="5" fill="#0057B8"/>
                                <text x="65" y="22" font-family="'Inter', sans-serif" font-size="20" font-weight="800" fill="white" text-anchor="middle">Optimum</text>
                            </svg>
                        `;
                    case 'T-Mobile Home Internet':
                        // Official T-Mobile Logo (Magenta T and black text)
                        return `
                            <svg viewBox="0 0 160 30" style="${baseStyle}">
                                <text x="5" y="22" font-family="'Inter', sans-serif" font-size="22" font-weight="800" fill="#E20074">T-Mobile</text>
                            </svg>
                        `;
                    case 'Viasat':
                        // Official Viasat Logo (Purple/Blue wordmark)
                        return `
                            <svg viewBox="0 0 120 30" style="${baseStyle}">
                                <text x="5" y="22" font-family="'Inter', sans-serif" font-size="20" font-weight="800" fill="#1C3F7A">VIASAT</text>
                            </svg>
                        `;
                    case 'HughesNet':
                        // Updated HughesNet Logo (Purple H mark and text)
                        return `
                            <svg viewBox="0 0 160 30" style="${baseStyle}">
                                <g fill="#7C3AED">
                                    <path d="M5 25 H15 L15 5 L5 5 Z M10 15 L25 15 L25 20 L10 20 Z"/>
                                </g>
                                <text x="35" y="22" font-family="'Inter', sans-serif" font-size="20" font-weight="800" fill="#7C3AED">HUGHESNET</text>
                            </svg>
                        `;
                    default:
                        return `<span style="font-weight: 700; font-size: 1.125rem; color: #1f2937;">${providerName}</span>`;
                }
            }


            // --- Core Page Navigation ---
            window.showPage = function(pageId, updateUrl = true) {
                try {
                    // 1. Hide all pages
                    allPages.forEach(page => {
                        page.style.display = 'none';
                    });
                    
                    // 2. Show the target page
                    const targetPage = document.getElementById(pageId);
                    if (targetPage) {
                        targetPage.style.display = 'block';
                    } else {
                        // Fallback to home if pageId is invalid
                        document.getElementById('home').style.display = 'block';
                        pageId = 'home'; // Set for URL update
                    }
                    
                    // 3. Update the URL in the browser without reloading
                    if (updateUrl) {
                        // FIX: Change to use hash fragments only for consistency and security in iframes.
                        // Root '/' is now explicitly pushed as '/#home'
                        const path = `#${pageId}`;
                        history.pushState({ pageId: pageId }, '', path);
                    }
                    
                    // 4. Scroll to top
                    window.scrollTo(0, 0);
                    
                    // 5. Specific page rendering call after navigation
                    if (pageId === 'provider-directory') {
                        renderProviderDirectory();
                    } else if (pageId === 'cheap-internet') {
                        renderCheapInternetPage();
                    } else if (pageId === 'reviews') {
                        renderReviews();
                    } else if (pageId === 'blog') {
                        renderBlog();
                    } 
                } catch (e) {
                    console.error("Error in showPage:", e);
                    // Critical fallback
                    document.getElementById('home').style.display = 'block';
                }
            }
            
            // --- Event Listener for Browser Back/Forward buttons ---
            window.addEventListener('popstate', (event) => {
                // If popstate returns a state object, use its pageId, otherwise extract from hash
                let pageId = 'home';
                if (event.state && event.state.pageId) {
                    pageId = event.state.pageId;
                } else if (window.location.hash) {
                    pageId = window.location.hash.replace('#', '');
                }
                
                // Ensure pageId is not empty or invalid after processing
                if (!pageId || !document.getElementById(pageId)) {
                    pageId = 'home';
                }
                
                // Call showPage, but prevent it from creating another history entry
                window.showPage(pageId, false); 
            });


            // --- Form Submission Handlers ---
            window.handleOrderSubmit = function(event) {
                // IMPORTANT: Since we are submitting to an external service (FormSubmit), 
                // we must NOT prevent default. We let the form submit to the external action URL.
                
                // Instead of preventing default and handling navigation via JS, we let the external 
                // service redirect back to our thank-you page via the hidden _next field.
                
                // FormSubmit requires the full form submission to happen naturally.
                console.log("Order submission initiated for external service...");
                return true; 
            }

            window.handleContactSubmit = function(event) {
                event.preventDefault();
                // In a real app, this is where youd send data to a server
                const formData = new FormData(event.target);
                console.log("Contact Form Submitted:", Object.fromEntries(formData));
                
                // Show a simple success message (no alert allowed)
                const formContainer = document.querySelector('#contact-form').parentElement;
                formContainer.innerHTML = `
                    <div class="text-center p-8 bg-green-50 rounded-lg border border-green-300">
                        <svg class="w-12 h-12 mx-auto text-green-600" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg>
                        <h3 class="mt-4 text-xl font-bold text-green-800">Message Sent!</h3>
                        <p class="mt-2 text-sm text-green-700">We will get back to you shortly.</p>
                    </div>
                `;
            }

            // --- Provider Detail Handler (MODIFIED to use logo) ---
            window.showProviderPackages = function(providerName) {
                const detailContainer = document.getElementById('provider-packages-page-content');
                const providerPlans = PLANS_DATA[providerName];

                if (!detailContainer || !providerPlans) {
                    console.error(`Data or container not found for provider: ${providerName}`);
                    showPage('provider-directory'); // Fallback
                    return;
                }

                // --- 1. Generate Package Table ---
                let packageTableHtml = `
                    <div class="mt-8 overflow-x-auto">
                        <table class="min-w-full bg-white divide-y divide-gray-200 rounded-lg shadow-md">
                            <thead class="bg-gray-100">
                                <tr>
                                    <th class="px-6 py-4 text-left text-xs font-bold text-gray-600 uppercase tracking-wider">Plan Name</th>
                                    <th class="px-6 py-4 text-left text-xs font-bold text-gray-600 uppercase tracking-wider">Speed (Up to)</th>
                                    <th class="px-6 py-4 text-left text-xs font-bold text-gray-600 uppercase tracking-wider">Starting Price</th>
                                    <th class="px-6 py-4 text-left text-xs font-bold text-gray-600 uppercase tracking-wider">Contract</th>
                                    <th class="px-6 py-4"></th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-gray-100">
                `;
                
                providerPlans.forEach(plan => {
                    packageTableHtml += `
                        <tr>
                            <td class="px-6 py-4 whitespace-nowrap"><span class="font-semibold text-gray-900">${plan.name}</span></td>
                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700">${plan.speed} Mbps</td>
                            <td class="px-6 py-4 whitespace-nowrap"><span class="font-bold text-lg text-green-600">$${plan.price.toFixed(2)}/mo</span></td>
                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700">${plan.contract}</td>
                            <td class="px-6 py-4 whitespace-nowrap text-right">
                                <button onclick="showPage('order-form')" class="px-4 py-2 text-sm font-medium rounded-full cta-primary">Order Now</button>
                            </td>
                        </tr>
                    `;
                });

                packageTableHtml += `
                            </tbody>
                        </table>
                    </div>
                `;

                // --- 2. Generate Full Page HTML ---
                const detailHtml = `
                    <div class="space-y-12">
                        <header class="text-center md:text-left bg-white p-8 rounded-xl shadow-lg border-b-4 border-blue-500">
                            <!-- Provider Name replaced with Logo -->
                            <div class="flex items-center justify-center md:justify-start space-x-4 mb-4">
                                ${getProviderLogoSvg(providerName, 150, 40)}
                                <h1 class="text-5xl font-extrabold text-gray-900">Plans</h1>
                            </div>
                            <p class="mt-2 text-lg text-gray-600">Find the latest deals, speeds, and bundles available from ${providerName}.</p>
                        </header>
                        
                        <!-- Packages Table -->
                        <div class="bg-white p-6 rounded-xl shadow-lg">
                            <h2 class="text-3xl font-bold text-gray-900 border-b pb-3 mb-6">Available Packages</h2>
                            ${packageTableHtml}
                        </div>

                        <!-- Provider Info & Coverage (Mimicking Allconnect Content) -->
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                            <div class="bg-white p-6 rounded-xl shadow-lg">
                                <h2 class="text-3xl font-bold text-gray-900 border-b pb-3 mb-6">${providerName} Technology Overview</h2>
                                <p class="text-gray-700 leading-relaxed">
                                    ${providerName} primarily offers **${providerPlans[0].connection}** service, delivering reliable high-speed internet across its expansive network. They focus on providing low-latency connections essential for streaming, gaming, and remote work. All plans include ${providerPlans[0].dataCap} data.
                                </p>
                                <div class="mt-6">
                                    <p class="font-bold text-lg text-blue-600">Key Features:</p>
                                    <ul class="list-disc list-inside mt-2 text-gray-700 space-y-1">
                                        <li>No annual contracts or early termination fees.</li>
                                        <li>Free modem and self-install kits available.</li>
                                        <li>Bundles with TV and Mobile service lines are common.</li>
                                    </ul>
                                </div>
                            </div>

                            <div class="bg-white p-6 rounded-xl shadow-lg">
                                <h2 class="text-3xl font-bold text-gray-900 border-b pb-3 mb-6">Coverage and Service Areas</h2>
                                <p class="text-gray-700">
                                    ${providerName} is one of the largest internet service providers in the US, with significant coverage in states like **California, Texas, and New York.**
                                </p>
                                <!-- Mock Map Placeholder -->
                                <div class="mt-4 h-56 w-full bg-gray-200 flex items-center justify-center text-gray-500 font-semibold rounded-lg border-2 border-dashed border-gray-400" aria-label="Map placeholder showing service area for ${providerName}">
                                    ${providerName} Local Coverage Map (Mock)
                                </div>
                                <a href="tel:${PHONE_NUMBER}" class="mt-4 w-full block text-center px-6 py-3 rounded-full text-base font-semibold cta-primary">
                                    Call Now to Confirm Coverage: ${PHONE_NUMBER}
                                </a>
                            </div>
                        </div>
                    </div>
                `;

                detailContainer.innerHTML = detailHtml;
                showPage('provider-packages-page');
            }


            // --- Mobile Menu (No Change) ---
            window.closeMobileMenu = function() {
                if (mobileMenu) mobileMenu.classList.add('hidden');
            }
            
            if (mobileMenuButton && mobileMenu) {
                mobileMenuButton.addEventListener('click', () => {
                    mobileMenu.classList.toggle('hidden');
                });
            }

            // --- UPDATED Loading Screen Functions (Simplified) ---
            function showLoader() {
                if (loader) {
                    loader.style.display = 'flex';
                    loader.style.pointerEvents = 'all';
                }
            }
            function hideLoader() {
                if (loader) {
                    loader.style.display = 'none';
                    loader.style.pointerEvents = 'none';
                }
            }

            // --- Timer Logic (Placeholder) (No Change) ---
            function startCountdown() {
                const timerElement = document.getElementById('countdown-timer');
                if (!timerElement) return;

                // Start time: 1 hour (3600 seconds)
                let timeRemaining = 3600; 

                const updateTimer = () => {
                    if (timeRemaining <= 0) {
                        clearInterval(timerInterval);
                        timerElement.textContent = "EXPIRED";
                        return;
                    }

                    const hours = String(Math.floor(timeRemaining / 3600)).padStart(2, '0');
                    const minutes = String(Math.floor((timeRemaining % 3600) / 60)).padStart(2, '0');
                    const seconds = String(timeRemaining % 60).padStart(2, '0');

                    timerElement.textContent = `${hours}:${minutes}:${seconds}`;
                    timeRemaining--;
                };

                updateTimer();
                const timerInterval = setInterval(updateTimer, 1000);
            }
            
            // --- Scroll Animation Logic (Modified to 1.5s) ---
            function initScrollAnimations() {
                const observerOptions = {
                    root: null,
                    rootMargin: '0px',
                    threshold: 0.1
                };

                const observerCallback = (entries, observer) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            entry.target.classList.add('is-visible');
                            // Delay the width animation for the progress bars
                            if (entry.target.id === 'coverage-bars') {
                                setTimeout(() => {
                                    document.querySelectorAll('.progress-bar').forEach(bar => {
                                        bar.style.width = bar.getAttribute('data-width');
                                    });
                                }, 500); 
                            }
                            observer.unobserve(entry.target);
                        }
                    });
                };

                const observer = new IntersectionObserver(observerCallback, observerOptions);

                document.querySelectorAll('.animate-on-scroll').forEach(element => {
                    observer.observe(element);
                });
            }


            // --- Coverage Data Generator (No Change, preserves 92% Spectrum) ---
            function generateCoverageData() {
                const providers = Object.keys(PLANS_DATA).filter(p => p !== 'HughesNet' && p !== 'Viasat'); // Exclude satellite for main comparison

                let coverage = [];
                const maxOtherCoverage = 85;
                const minOtherCoverage = 60;

                providers.forEach(provider => {
                    let percentage;
                    if (provider === 'Spectrum') {
                        // Fixed high percentage for recommendation
                        percentage = 92; 
                    } else {
                        // Random percentage for other providers
                        percentage = Math.floor(Math.random() * (maxOtherCoverage - minOtherCoverage + 1)) + minOtherCoverage;
                    }

                    let color = 'bg-blue-500';
                    if (provider === 'Spectrum') color = 'bg-blue-600';
                    else if (provider === 'AT&T') color = 'bg-green-600';
                    else if (provider === 'Verizon') color = 'bg-red-600';
                    else if (provider === 'Xfinity') color = 'bg-red-800';
                    
                    coverage.push({ provider, percentage, color });
                });

                // Sort by percentage descending
                coverage.sort((a, b) => b.percentage - a.percentage);
                return coverage;
            }

            // --- Comparison Page Renderer (MODIFIED to use logo) ---
            function renderComparisonPage(zip, cityState) {
                // Since this function rebuilds the coverage area, we can safely target it.
                const coverageBarsContainer = document.getElementById('coverage-bars');
                const displayedZipElement = document.getElementById('displayed-zip');
                const displayedCityStateElement = document.getElementById('displayed-city-state'); // New element
                
                // Set the current ZIP on the results page header
                if(displayedZipElement) displayedZipElement.textContent = zip;
                if(displayedCityStateElement) displayedCityStateElement.textContent = cityState || 'Your Area'; // Display city/state or fallback
                
                // Check for null only on the specific element that receives dynamic content
                if (!coverageBarsContainer) {
                    console.error("Critical Error: 'coverage-bars' container not found for rendering.");
                    return;
                }
                
                const coverageData = generateCoverageData();

                // 1. Build Coverage Bar HTML
                let coverageHtml = coverageData.map(data => {
                    const isRecommended = data.provider === 'Spectrum';
                    
                    let tagHtml = '';
                    if (isRecommended) {
                        tagHtml = `
                            <span class="ml-2 px-3 py-0.5 text-xs font-bold rounded-full bg-green-500 text-white flex items-center">
                                <svg class="w-3 h-3 inline-block mr-1 -mt-0.5" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg>
                                RECOMMENDED
                            </span>`;
                    }

                    return `
                        <div class="space-y-1 py-3">
                            <div class="provider-coverage-label">
                                <!-- Provider name replaced with SVG logo -->
                                <span class="text-gray-800 flex items-center">${getProviderLogoSvg(data.provider, 80, 20)}${tagHtml}</span>
                                <span class="font-bold text-gray-800">${data.percentage}%</span>
                            </div>
                            <div class="progress-bar-container">
                                <div class="progress-bar ${data.color}" data-width="${data.percentage}%" style="width: 0%;"></div>
                            </div>
                        </div>
                    `;
                }).join('');

                // Inject only the coverage bar content
                coverageBarsContainer.innerHTML = `<h3 class="text-2xl font-bold text-gray-900 mb-6 border-b pb-3">Local Provider Coverage</h3>${coverageHtml}`;


                // 2. Render the initial plan cards
                window.allPlans = []; // Reset global plans
                for (const providerName in PLANS_DATA) {
                    PLANS_DATA[providerName].forEach(plan => {
                        window.allPlans.push({ provider: providerName, ...plan });
                    });
                }

                // Set initial price slider value
                const slider = document.getElementById('comparison-price-slider');
                const sliderValue = document.getElementById('price-slider-value');
                if (slider && sliderValue) {
                    slider.value = 75; // Reset to default
                    sliderValue.textContent = `$${slider.value}/mo`;
                }
                
                // Render the initial plan cards
                window.renderComparisonFilteredPlans();

                // 3. Trigger delayed scroll animation to make the progress bars slide in
                if (coverageBarsContainer) {
                    coverageBarsContainer.classList.add('is-visible'); 
                }
                
            }
            
            // --- Custom Filter Logic for New Comparison Page (FIXED - EXPOSED GLOBALLY) ---
            window.renderComparisonFilteredPlans = function() {
                const container = document.getElementById('comparison-results-container');
                // Null check for safety
                if (!container) return;

                // These elements are now guaranteed to exist because they are static HTML
                const speedFilter = document.getElementById('comparison-speed-filter');
                const priceSlider = document.getElementById('comparison-price-slider'); // Changed from priceFilter
                const connectionFilter = document.getElementById('comparison-connection-filter');
                const orderPlanSelect = document.getElementById('order-plan');

                let filteredPlans = window.allPlans;
                let selectHtml = '';

                // Apply Filters
                if (priceSlider) {
                    const maxPrice = parseFloat(priceSlider.value);
                    filteredPlans = filteredPlans.filter(plan => plan.price <= maxPrice);
                }
                if (speedFilter && speedFilter.value !== 'all') {
                    const minSpeed = parseInt(speedFilter.value, 10);
                    filteredPlans = filteredPlans.filter(plan => plan.speed >= minSpeed);
                }
                if (connectionFilter && connectionFilter.value !== 'all') {
                    filteredPlans = filteredPlans.filter(plan => 
                        plan.connection.includes(connectionFilter.value)
                    );
                }

                if (filteredPlans.length === 0) {
                    container.innerHTML = `
                        <div class="p-8 text-center bg-white rounded-xl shadow-lg border border-red-300 lg:col-span-2">
                            <h3 class="text-2xl font-bold text-red-600">No Plans Found</h3>
                            <p class="mt-2 text-gray-600">Try adjusting your filters or call us for help finding a solution in ZIP ${window.currentZip}.</p>
                            <a href="tel:${PHONE_NUMBER}" class="mt-4 mx-auto block max-w-xs text-center px-6 py-3 rounded-full cta-secondary">
                                Call ${PHONE_NUMBER}
                            </a>
                        </div>
                    `;
                    // Guard against null if navigating away quickly
                    if (orderPlanSelect) orderPlanSelect.innerHTML = `<option value="">No Plans Available</option>`;
                    return;
                }
                
                // --- CUSTOM SORTING LOGIC: Prioritize Spectrum, then sort by price ---
                filteredPlans.sort((a, b) => {
                    const isASpectrum = a.provider === 'Spectrum';
                    const isBSpectrum = b.provider === 'Spectrum';

                    // 1. Primary Sort: Spectrum first
                    if (isASpectrum && !isBSpectrum) return -1; // A (Spectrum) comes before B
                    if (!isASpectrum && isBSpectrum) return 1;  // B (Spectrum) comes before A

                    // 2. Secondary Sort: Price ascending
                    return a.price - b.price;
                });

                let resultsHtml = '';
                filteredPlans.forEach(plan => {
                    resultsHtml += renderPlanCard(plan);
                    
                    // Populate select options for all *filtered* plans
                    const optionVal = `${plan.provider} - ${plan.name} (${plan.speed} Mbps)`;
                    const optionText = `${plan.provider}: ${plan.name} (${plan.speed} Mbps) - $${plan.price.toFixed(2)}/mo`;
                    selectHtml += `<option value="${optionVal}">${optionText}</option>`;
                });

                container.innerHTML = resultsHtml;
                // Guard against null if navigating away quickly
                if (orderPlanSelect) orderPlanSelect.innerHTML = selectHtml;
            }
            
            // Expose the filter function under its public name
            window.applyComparisonFilters = window.renderComparisonFilteredPlans;

            // Re-usable Plan Card Renderer (MODIFIED to use logo)
            function renderPlanCard(plan) {
                // Ensure provider-specific colors/logos are handled
                let providerColor = getProviderColor(plan.provider).hex || '#0073e6'; // Use helper
                
                const cardHtml = `
                    <div class="hsi-card bg-white overflow-hidden shadow-xl hover:shadow-2xl hover:border-blue-500 transition duration-300" style="border-left: 6px solid ${providerColor};">
                        <div class="p-6">
                            <div class="flex justify-between items-start">
                                <div>
                                    <!-- Provider logo/name here -->
                                    <div class="mb-1">${getProviderLogoSvg(plan.provider, 100, 25)}</div>
                                    <h3 class="text-2xl font-extrabold text-gray-900">${plan.name}</h3>
                                </div>
                                <span class="px-3 py-1 text-xs font-semibold rounded-full" style="background-color: ${providerColor}1a; color: ${providerColor};">${plan.tag}</span>
                            </div>
                            
                            <div class="mt-6 grid grid-cols-2 sm:grid-cols-4 gap-4 text-center border-t pt-4">
                                <div class="p-2 border rounded-lg bg-gray-50">
                                    <p class="text-xs text-gray-600 uppercase font-medium">Download</p>
                                    <p class="text-xl font-bold text-gray-900">${plan.speed} <span class="text-sm">Mbps</span></p>
                                </div>
                                <div class="p-2 border rounded-lg bg-gray-50">
                                    <p class="text-xs text-gray-600 uppercase font-medium">Upload</p>
                                    <!-- Fiber plans are often symmetrical -->
                                    <p class="text-xl font-bold text-gray-900">${plan.connection.includes('Fiber') ? plan.speed : Math.round(plan.speed * 0.1)} <span class="text-sm">Mbps</span></p>
                                </div>
                                <div class="p-2 border rounded-lg bg-gray-50">
                                    <p class="text-xs text-gray-600 uppercase font-medium">Data Cap</p>
                                    <p class="text-base font-bold text-gray-900">${plan.dataCap}</p>
                                </div>
                                <div class="p-2 border rounded-lg bg-gray-50">
                                    <p class="text-xs text-gray-600 uppercase font-medium">Contract</p>
                                    <p class="text-base font-bold text-gray-900">${plan.contract}</p>
                                </div>
                            </div>
                            
                            <div class="mt-8 flex justify-between items-center pt-4 border-t border-gray-100">
                                <div class="text-left">
                                    <p class="text-sm text-gray-600 font-medium">Introductory Price</p>
                                    <p class="text-4xl font-extrabold text-green-600">$${plan.price.toFixed(2)}</p>
                                    <p class="text-sm text-gray-500">per month (AutoPay required)</p>
                                </div>
                                <div class="text-right">
                                    <button onclick="showPage('order-form');" class="px-6 py-3 rounded-full text-base font-semibold cta-primary hover:shadow-lg">
                                        Order Now
                                    </button>
                                    <a href="tel:${PHONE_NUMBER}" class="mt-2 block text-xs text-gray-800 font-semibold hover:underline">
                                        Or Call ${PHONE_NUMBER}
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
                return cardHtml;
            }
            

            // --- Input Validation (Replaces Live Lookup) ---
            window.validateZipInput = function(zip, resultElementId = 'zip-lookup-result') {
                const resultElement = document.getElementById(resultElementId);
                if (!resultElement) return;

                const cleanedZip = zip.replace(/\D/g, '').slice(0, 5);
                
                if (cleanedZip.length === 5) {
                    resultElement.textContent = 'Valid ZIP Code';
                    resultElement.classList.remove('text-red-500');
                    resultElement.classList.add('text-green-600');
                } else if (cleanedZip.length > 0 && cleanedZip.length < 5) {
                    resultElement.textContent = 'Please enter a valid 5-digit ZIP Code';
                    resultElement.classList.remove('text-green-600');
                    resultElement.classList.add('text-red-500');
                } else {
                    resultElement.textContent = '';
                }
            }


            // --- UPDATED Search Logic (with ZIP API call) ---
            window.handleZipSearch = async function(event) { // Added async
                if (event) event.preventDefault();
                
                // Use the submitting form's input field
                const form = event.target.closest('form');
                const zipInput = form.querySelector('input[name="zip"]');
                const zip = zipInput ? zipInput.value.trim() : '';
                const resultId = form.id === 'zip-form' ? 'zip-lookup-result' : 'zip-lookup-result-comp';
                const resultElement = document.getElementById(resultId);
                
                if (!/^\d{5}$/.test(zip)) {
                    if(resultElement) {
                        resultElement.textContent = 'Please enter a valid 5-digit ZIP Code';
                        resultElement.classList.remove('text-green-600');
                        resultElement.classList.add('text-red-500');
                    }
                    console.error("Validation Failed: Invalid ZIP.");
                    return;
                }
                 if(resultElement) { // Clear previous validation message
                    resultElement.textContent = '';
                }
                
                showLoader(); // Show the new bouncing dots loader

                let cityStateInfo = null;
                let isValidZipFromAPI = false; // Flag to check API result
                
                try {
                    // Fetch city/state info from zippopotam.us
                    const response = await fetch(`https://api.zippopotam.us/us/${zip}`);
                    
                    // Check if the ZIP exists according to the API (status 200 means it found it)
                    if (response.ok) {
                        const data = await response.json();
                        if (data && data.places && data.places.length > 0) {
                            const place = data.places[0];
                            cityStateInfo = `${place['place name']}, ${place['state abbreviation']}`;
                            isValidZipFromAPI = true; // Mark as valid based on API response
                        } else {
                             // This case might happen if API structure changes or returns empty places for a 200 OK
                             console.warn("ZIP API returned OK but no place data found.");
                             cityStateInfo = "Location"; // Fallback text
                             // We might still consider this "valid" if the API said 200 OK
                             isValidZipFromAPI = true; 
                        }
                    } else {
                        // If response status is not OK (e.g., 404 Not Found), the ZIP is invalid/not found
                        console.warn(`ZIP code ${zip} not found by API (Status: ${response.status}).`);
                        cityStateInfo = "Your Area"; // Fallback text
                        isValidZipFromAPI = false;
                    }

                } catch (error) {
                    console.error("Error fetching ZIP code info:", error);
                    cityStateInfo = "Your Area"; // Fallback text on error
                    isValidZipFromAPI = false; // Assume invalid on fetch error
                }

                // --- ADDED VALIDATION CHECK (MOVED) ---
                // This check now happens *before* the 2-second timeout
                if (!isValidZipFromAPI) {
                    hideLoader(); // Hide loader immediately
                    if(resultElement) {
                        resultElement.textContent = 'Invalid or unsupported ZIP Code.';
                        resultElement.classList.remove('text-green-600');
                        resultElement.classList.add('text-red-500');
                    }
                     console.error("Search stopped: ZIP code deemed invalid by API.");
                    return; // Stop execution
                }

                // Simulate fetching the generic data
                setTimeout(() => {
                    try {
                        window.currentZip = zip;
                        window.currentCityState = cityStateInfo; // Store globally
                        
                        // 1. Initialize all plans
                        window.allPlans = [];
                        for (const providerName in PLANS_DATA) {
                            PLANS_DATA[providerName].forEach(plan => {
                                window.allPlans.push({ provider: providerName, ...plan });
                            });
                            // No need to check for Verizon in every ZIP, just include them generically
                            if (providerName === 'Verizon') {
                                PLANS_DATA[providerName].forEach(plan => {
                                    if (plan.connection === '5G Home') {
                                        window.allPlans.push({ provider: providerName, ...plan });
                                    }
                                });
                            }
                        }
                        
                        // 2. Render the comparison page
                        renderComparisonPage(zip, cityStateInfo); 
                        
                        // 3. Navigate to the page
                        showPage('comparison-page'); 
                        
                    } catch (e) {
                        console.error("Error during search results rendering:", e);
                        showPage('home'); 
                    } finally {
                        hideLoader(); 
                    }
                }, 2000); // 2-second delay for perceived loading
            }

            // --- Dynamic Rendering: Cheap Internet (MODIFIED to use logo) ---
            function renderCheapInternetPage() {
                const container = document.getElementById('cheap-internet-comparison-container');
                if (!container) return;

                let comparisonHtml = '';
                let allPlans = [];

                // Collect all cheapest plans from all providers
                for (const providerName in PLANS_DATA) {
                    if (PLANS_DATA[providerName] && PLANS_DATA[providerName].length > 0) {
                        const cheapestPlan = PLANS_DATA[providerName].reduce((min, p) => p.price < min.price ? p : min, PLANS_DATA[providerName][0]);
                        allPlans.push({ provider: providerName, ...cheapestPlan });
                    }
                }

                // Sort by price (cheapest first for the "Cheap Internet" page)
                allPlans.sort((a, b) => a.price - b.price);

                allPlans.forEach(plan => {
                    // Use the dedicated plan card renderer for consistency
                    comparisonHtml += renderPlanCard(plan);
                });

                container.innerHTML = comparisonHtml;
            }

            // --- Dynamic Rendering: Provider Directory (MODIFIED to use logo) ---
            window.renderProviderDirectory = function() {
                const pageContainer = document.getElementById('provider-directory');
                if (!pageContainer) {
                    console.error("Provider directory page container not found.");
                    return;
                }

                let providerGridHtml = '';
                const providerNames = Object.keys(PLANS_DATA).sort(); // Sort names alphabetically
                
                // 1. Generate the provider grid/cards first
                providerNames.forEach(providerName => {
                    const plans = PLANS_DATA[providerName];
                    if (!plans || plans.length === 0) return; // Skip if no plans

                    const cheapestPrice = plans.reduce((min, p) => p.price < min ? p.price : min, plans[0].price);
                    const connectionType = plans[0].connection;
                    const colors = getProviderColor(providerName);

                    // This card remains clickable to show package details
                    providerGridHtml += `
                        <div data-provider="${providerName}" class="provider-card p-6 bg-white rounded-2xl shadow-md border border-gray-200 cursor-pointer hover:shadow-xl transition duration-300 transform hover:scale-[1.02]">
                            <div class="flex items-center space-x-3 mb-4">
                                <!-- Provider name replaced with SVG logo (larger size) -->
                                ${getProviderLogoSvg(providerName, 120, 30)}
                            </div>
                            <p class="text-sm font-medium text-gray-700">${connectionType} Plans</p>
                            <p class="text-xs text-gray-500 uppercase mt-2">Starting Price</p>
                            <p class="text-2xl font-bold text-green-600">$${cheapestPrice.toFixed(2)}/mo</p>
                            <div class="mt-4">
                                <span class="inline-block px-4 py-1 text-sm font-semibold rounded-full ${colors.tag}">View Packages &rarr;</span>
                            </div>
                        </div>
                    `;
                });

                // 2. Combine SEO content and the provider grid
                const fullContentHtml = `
                    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                        <h2 class="text-4xl font-extrabold text-center text-gray-900 header-accent">
                            Our Internet Partners
                        </h2>
                        
                        <p class="mt-4 text-xl text-gray-600 text-center max-w-3xl mx-auto mb-16 animate-on-scroll">
                            Wide Broadband partners with the nation's leading ISPs to bring you a comprehensive comparison tool. We make it simple to see the top internet, TV, and mobile providers available at your address.
                        </p>

                        <!-- Provider Directory Heading -->
                        <h3 class="text-3xl font-extrabold text-gray-900 text-center border-b pb-3 mb-8 animate-on-scroll">
                            Directory of Internet Service Providers
                        </h3>

                        <!-- Provider Grid Container (Populated by JS below) -->
                        <div id="provider-directory-grid" class="mt-8 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 animate-on-scroll">
                            ${providerGridHtml}
                        </div>
                        
                        <!-- Wide Broadband Methodology Section -->
                        <div class="bg-blue-50 p-8 rounded-2xl shadow-lg mt-16 animate-on-scroll">
                            <h3 class="text-3xl font-bold text-gray-900 mb-4 flex items-center space-x-3">
                                <svg class="w-8 h-8 text-blue-600" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M11 2a1 1 0 10-2 0v1h2V2zm5 0a1 1 0 10-2 0v1h2V2zM4 2a1 1 0 10-2 0v1h2V2zm14 0a1 1 0 10-2 0v1h2V2zM10 2a1 1 0 10-2 0v1h2V2zM2 4a1 1 0 00-1 1v10a1 1 0 001 1h16a1 1 0 001-1V5a1 1 0 00-1-1H2zm0 1h16v10H2V5zm1-2a1 1 0 011-1h12a1 1 0 011 1v1H3V3z" clip-rule="evenodd"></path></svg>
                                How Wide Broadband Works With Providers
                            </h3>
                            <p class="text-lg text-gray-700 leading-relaxed">
                                At **Wide Broadband**, we are committed to providing the most accurate plan information possible. Our team cross-references data from multiple sources to ensure what you see is up-to-date.
                            </p>
                             <ul class="list-disc list-inside mt-4 ml-6 space-y-2 text-gray-700 font-semibold">
                                <li>Official **Federal and State Broadband Maps**.</li>
                                <li>Our proprietary **Internal Technology** that analyzes provider data.</li>
                                <li>Direct, real-time updates from our **Provider Partners**.</li>
                            </ul>
                            <p class="text-lg text-gray-700 leading-relaxed mt-4">
                                Furthermore, many providers directly share **ZIP codes and detailed coverage data** which we use to refine customer search results to be as accurate as possible for your exact location.
                            </p>
                            <a href="#blog" onclick="window.showPage('blog'); return false;" class="mt-6 inline-block text-blue-600 hover:underline font-semibold">Learn more about our methodology &rarr;</a>
                        </div>
                    </div>
                `;

                pageContainer.innerHTML = fullContentHtml;
                initScrollAnimations(); // Re-run animations for new content
                
                // Re-attach delegated click listener to the newly rendered grid container
                const newGridContainer = document.getElementById('provider-directory-grid');
                if (newGridContainer) {
                    newGridContainer.addEventListener('click', (e) => {
                        const card = e.target.closest('.provider-card');
                        if (card) {
                            const provider = card.getAttribute('data-provider');
                            if (provider) {
                                window.showProviderPackages(provider);
                            }
                        }
                    });
                } else {
                    console.error("Could not find the new provider directory grid container to attach listener.");
                }
            }
            
            // --- Dynamic Rendering: Reviews (No Change) ---
            function renderReviews() {
                 const container = document.getElementById('reviews-grid');
                 if (!container) return;

                 let reviewsHtml = '';
                 REVIEWS_DATA.forEach(review => {
                     reviewsHtml += `
                         <div class="p-6 bg-white rounded-2xl shadow-xl border border-gray-200">
                            <div class="flex items-center space-x-1 text-yellow-500 mb-3">
                                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path></svg>
                                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path></svg>
                                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path></svg>
                                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path></svg>
                                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path></svg>
                            </div>
                            <p class="text-gray-700 italic">"${review.quote}"</p>
                            <p class="mt-4 font-bold text-gray-900">— ${review.name}, ${review.location} <span class="ml-2 text-sm font-medium text-green-600"> (Verified Customer)</span></p>
                            <p class="text-xs text-gray-500 mt-1">Provider: ${review.provider}</p>
                         </div>
                     `;
                 });
                 container.innerHTML = reviewsHtml;
            }

            // --- Dynamic Rendering: Blog (FIXED) ---
            function renderBlog() {
                const container = document.getElementById('blog-content');
                if (!container) {
                    console.error("Blog content container not found."); 
                    return;
                }

                let blogHtml = '';

                // Check if BLOG_CONTENT has at least one post
                if (!BLOG_CONTENT || BLOG_CONTENT.length === 0) {
                    container.innerHTML = '<p class="text-center text-gray-500">No blog posts available yet.</p>';
                    return;
                }

                // Main Article (Col-span 2)
                const mainPost = BLOG_CONTENT[0];
                blogHtml += `
                    <div class="md:col-span-2 bg-white rounded-2xl shadow-xl overflow-hidden animate-on-scroll">
                        <!-- Corrected image URL encoding for placeholders -->
                        <img class="h-64 w-full object-cover" loading="lazy" 
                             src="https://placehold.co/800x400/0073e6/white?text=${encodeURIComponent(mainPost.img)}" 
                             alt="${mainPost.title}" onerror="this.src='https://placehold.co/800x400/cccccc/ffffff?text=Image+Not+Found'">
                        <div class="p-8">
                            <p class="text-sm font-medium text-blue-600">${mainPost.type}</p>
                            <h3 class="mt-2 text-2xl font-bold text-gray-900">${mainPost.title}</h3>
                            <p class="mt-4 text-base text-gray-600">${mainPost.snippet}</p>
                            <a href="#blog" onclick="window.showPage('blog'); return false;" class="mt-6 inline-block font-semibold text-blue-600 hover:text-blue-800">Read Full Article &rarr;</a>
                        </div>
                    </div>
                `;

                // Sidebar/Grid Posts
                const sidebarPosts = BLOG_CONTENT.slice(1);
                sidebarPosts.forEach(post => {
                    blogHtml += `
                        <div class="bg-white rounded-2xl shadow-xl overflow-hidden animate-on-scroll">
                            <!-- Corrected image URL encoding for placeholders -->
                            <img class="h-48 w-full object-cover" loading="lazy" 
                                 src="https://placehold.co/600x400/111827/white?text=${encodeURIComponent(post.img)}" 
                                 alt="${post.title}" onerror="this.src='https://placehold.co/600x400/cccccc/ffffff?text=Image+Not+Found'">
                            <div class="p-6">
                                <p class="text-sm font-medium text-blue-600">${post.type}</p>
                                <h3 class="mt-2 text-xl font-bold text-gray-900">${post.title}</h3>
                                <p class="mt-2 text-sm text-gray-600">${post.snippet}</p>
                                <a href="#blog" onclick="window.showPage('blog'); return false;" class="mt-4 inline-block font-semibold text-blue-600 hover:text-blue-800">Learn More &rarr;</a>
                            </div>
                        </div>
                    `;
                });
                
                container.innerHTML = blogHtml;
                initScrollAnimations(); // Re-run for new content
            }

             // --- NEW: Render Home Page Plans Table (MODIFIED to use logo) ---
            function renderHomePlansTable() {
                const tableBody = document.getElementById('home-plans-table-body');
                if (!tableBody) return;

                // Select specific plans for display (e.g., top 3)
                const homePlans = [
                    { provider: "Spectrum", ...PLANS_DATA["Spectrum"].find(p => p.speed === 1000) }, // Find Gig plan
                    { provider: "AT&T", ...PLANS_DATA["AT&T"].find(p => p.speed === 1000) }, // Find Gig plan
                    { provider: "Xfinity", ...PLANS_DATA["Xfinity"].find(p => p.speed === 1200) } // Find Gigabit Extra
                ].filter(p => p.name); // Filter out any not found

                 let tableHtml = '';
                 homePlans.forEach(plan => {
                     // Provider column now uses the SVG logo
                     tableHtml += `
                        <tr>
                            <td class="px-6 py-4 whitespace-nowrap">
                                ${getProviderLogoSvg(plan.provider, 100, 25)}
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap">
                                <span class="font-semibold text-gray-900">Up to ${plan.speed} Mbps</span>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap">
                                <span class="font-bold text-2xl text-gray-900">$${plan.price.toFixed(2)}/mo</span>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap">
                                <span class="text-gray-700">${plan.dataCap}</span>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap text-right">
                                <a href="#cheap-internet" onclick="showPage('cheap-internet'); return false;" class="px-5 py-2.5 text-sm font-medium rounded-full cta-secondary">Compare All Plans</a>
                            </td>
                        </tr>
                     `;
                 });
                 tableBody.innerHTML = tableHtml;
            }
            
            // --- NEW: Logo Slider Initialization Function ---
            function initLogoSlider() {
                const slideItems = document.querySelectorAll('.logo-slide-item');
                if (slideItems.length === 0) return;

                slideItems.forEach(item => {
                    const providerName = item.getAttribute('data-provider');
                    if (providerName) {
                        // Use a smaller size for the sliding logos
                        item.innerHTML = getProviderLogoSvg(providerName, 100, 25);
                    }
                });
            }

            // --- NEW: Loader Logo Animation Setup ---
            function initLoaderLogos() {
                const container = document.getElementById('loader-logo-container');
                if (!container) return;

                // Select a few prominent logos for the animation effect
                const animatedProviders = ["Spectrum", "AT&T", "Xfinity", "Frontier"];
                
                let logoHtml = '';
                animatedProviders.forEach((provider, index) => {
                    logoHtml += `
                        <div class="loader-logo-item" style="animation-delay: ${index * 0.4}s;">
                            ${getProviderLogoSvg(provider, 60, 15)}
                        </div>
                    `;
                });
                container.innerHTML = logoHtml;
            }


            // --- Initialization ---
            document.addEventListener('DOMContentLoaded', () => {
                try {
                    // Initialize complex animated elements before other content rendering
                    initLogoSlider();
                    initLoaderLogos();


                    // Bind all forms
                    const zipForm = document.getElementById('zip-form');
                    if (zipForm) zipForm.addEventListener('submit', window.handleZipSearch);
                    
                    const comparisonZipForm = document.getElementById('comparison-zip-form');
                    if (comparisonZipForm) comparisonZipForm.addEventListener('submit', window.handleZipSearch);

                    const orderForm = document.getElementById('secure-order-form');
                    // The actual submit action is handled by the form's action attribute now
                    // if (orderForm) orderForm.addEventListener('submit', window.handleOrderSubmit); 
                    
                    const contactForm = document.getElementById('contact-form');
                    if (contactForm) contactForm.addEventListener('submit', window.handleContactSubmit); 

                    // Attach filter change listeners
                    const compSpeedFilter = document.getElementById('comparison-speed-filter');
                    if (compSpeedFilter) compSpeedFilter.addEventListener('change', window.applyComparisonFilters); 
                    const compConnectionFilter = document.getElementById('comparison-connection-filter');
                    if (compConnectionFilter) compConnectionFilter.addEventListener('change', window.applyComparisonFilters); 
                    
                    // Price Slider Listeners
                    const priceSlider = document.getElementById('comparison-price-slider');
                    if (priceSlider) {
                        // Update text on input (dragging)
                        priceSlider.addEventListener('input', () => {
                            const disp = document.getElementById('price-slider-value');
                            if(disp) disp.textContent = `$${priceSlider.value}/mo`;
                        });
                        // Filter results on change (mouse up)
                        priceSlider.addEventListener('change', window.applyComparisonFilters);
                    }
                    
                    // Render dynamic content
                    renderReviews();
                    renderBlog(); 
                    renderCheapInternetPage(); 
                    renderHomePlansTable(); // Render the updated home plans table

                    // Start Timer
                    startCountdown();

                    // Init Slower Animations
                    initScrollAnimations();

                    // Check URL hash for initial page load (for deep linking)
                    const initialPageId = window.location.hash.replace('#', '');
                    if (initialPageId && document.getElementById(initialPageId)) {
                        // Load the page based on the hash, but don't push state again
                        window.showPage(initialPageId, false);
                    } else {
                        // Default to home page and set the URL to '/#home'
                        window.showPage('home', true);
                    }
                    
                } catch (e) {
                    console.error("Critical error during initialization:", e);
                    // Critical fallback: just show the home page
                    document.getElementById('home').style.display = 'block';
                }
            });

        })();
    </script>

</body>
</html>

