<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wide Broadband | Find the Best Internet Plans in Your Area</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Use Inter font family -->
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            scroll-behavior: smooth;
            background-color: #f7f9fb; /* Soft light gray background */
        }
        
        /* Custom Logo Styling */
        .logo-text {
            font-size: 2rem;
            font-weight: 900;
            line-height: 1;
        }
        .logo-text-wide {
            color: #1d4ed8; /* Dark Blue */
        }
        .logo-text-broadband {
            background: linear-gradient(90deg, #3b82f6, #60a5fa); /* Blue Gradient */
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
        }
        .logo-text-broadband:hover {
            opacity: 0.9;
        }

        /* Custom Premium Styles & Animations */
        .gradient-accent {
            background: linear-gradient(90deg, #3b82f6 0%, #1d4ed8 100%); 
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .gradient-accent:hover {
            opacity: 0.95;
            box-shadow: 0 8px 25px -5px rgba(59, 130, 246, 0.5), 0 4px 6px -2px rgba(59, 130, 246, 0.05);
            transform: translateY(-2px) scale(1.01); /* Micro-interaction */
        }
        .cta-primary {
             background-color: #059669; /* Green for Check Availability */
             transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .cta-primary:hover {
            background-color: #047857;
            box-shadow: 0 8px 20px -5px rgba(5, 150, 105, 0.5);
            transform: translateY(-2px) scale(1.01);
        }

        .main-content {
            min-height: calc(100vh - 12rem);
        }
        
        /* Navigation Micro-interaction */
        .nav-link {
            position: relative;
            padding-bottom: 5px;
        }
        .nav-link::after {
            content: '';
            position: absolute;
            width: 0;
            height: 2px;
            bottom: 0px;
            left: 50%;
            transform: translateX(-50%);
            background-color: #1d4ed8; 
            transition: width 0.3s ease-out;
        }
        .nav-link:hover::after {
            width: 100%;
        }

        /* Hero Background with Soft Abstract Gradient */
        .hero-bg {
             background: radial-gradient(circle at 10% 20%, rgba(20, 40, 70, 0.9) 0%, rgba(20, 40, 70, 0.85) 100%);
        }
        
        /* Decorative Header Accent */
        .header-accent {
            position: relative;
            padding-bottom: 0.5rem;
        }
        .header-accent::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 80px;
            height: 4px;
            background: linear-gradient(90deg, #3b82f6 0%, #1d4ed8 100%);
            border-radius: 9999px;
        }
        .header-accent-left::after {
            left: 0;
            transform: translateX(0);
        }

        /* Speed Test Gauge Styling */
        #speed-gauge {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            border: 15px solid #e0e7ff;
            border-top: 15px solid #3b82f6;
            border-right: 15px solid #3b82f6;
            transform: rotate(45deg);
            transition: all 0.5s ease-out;
            margin: 0 auto;
        }
        
        /* Loading Screen Water Drop Effect */
        .water-drop-spinner > div {
            width: 16px;
            height: 16px;
            background-color: #3b82f6;
            border-radius: 100%;
            display: inline-block;
            animation: bounce 1.4s infinite ease-in-out both;
        }
        .water-drop-spinner .dot2 {
            animation-delay: -0.32s;
        }
        .water-drop-spinner .dot3 {
            animation-delay: -0.16s;
        }
        @keyframes bounce {
            0%, 80%, 100% { transform: scale(0); }
            40% { transform: scale(1.0); }
        }

        /* Ensuring all main pages start hidden */
        .page-section {
            display: none;
        }
        /* Overriding the default for Home for stability */
        #home {
            display: block;
        }

        /* Sticky header timer badge */
        .timer-badge {
            background-color: #f59e0b; /* Amber/Yellow */
            color: #1f2937; /* Dark text */
            transition: all 0.5s ease-in-out;
        }
        .timer-badge:hover {
            box-shadow: 0 0 10px rgba(245, 158, 11, 0.8);
            transform: scale(1.05);
        }

        /* Provider Logo Styling (Neutral Text) */
        .provider-logo-text {
            font-weight: 800;
            font-size: 1.25rem;
        }
        .logo-spectrum { color: #5B48B3; }
        .logo-att { color: #00A8E0; }
        .logo-xfinity { color: #435460; }
        .logo-verizon { color: #C40000; }
        .logo-frontier { color: #0076a8; }
        .logo-cox { color: #005696; }
        .logo-optimum { color: #6260B5; }
        .logo-tmobile { color: #E20074; }
        .logo-viasat { color: #0038A8; }
        .logo-hughesnet { color: #9B59B6; }

    </style>
    <!-- SEO Meta Tags -->
    <meta name="description" content="Compare and order the best internet plans from 10 major US providers: Spectrum, Xfinity, AT&T, Verizon, and more. Reliable fiber and cable connectivity." />
    <meta name="keywords" content="high-speed internet near me, fiber internet, broadband deals, spectrum, at&t, xfinity, verizon, viasat, cable internet" />
    <!-- Open Graph for Social Sharing -->
    <meta property="og:title" content="Wide Broadband | Compare 10+ Internet Providers" />
    <meta property="og:description" content="Find the fastest and cheapest internet in your area today and save up to 40%." />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://widebroadband.com" />
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üåê</text></svg>">
</head>
<body class="text-gray-800">

    <!-- JSON-LD Structured Data for SEO -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Organization",
      "name": "Wide Broadband",
      "url": "https://widebroadband.com",
      "address": {
        "@type": "PostalAddress",
        "streetAddress": "3229 Greenpoint Ave",
        "addressLocality": "Long Island City",
        "addressRegion": "NY",
        "postalCode": "11101"
      },
      "contactPoint": {
        "@type": "ContactPoint",
        "telephone": "+1-888-808-0237",
        "contactType": "Sales and Support"
      }
    }
    </script>
    
    <!-- Global Trust and Contact Bar -->
    <div class="bg-blue-900 text-white text-xs py-2">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 flex justify-center sm:justify-end items-center space-x-4">
            <span class="flex items-center opacity-80">
                <svg class="w-4 h-4 mr-1 text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 005.412 16.96h13.176c-.846-2.185-.884-4.577-.104-6.848"></path></svg>
                Verified Providers
            </span>
            <span class="flex items-center opacity-80">
                <svg class="w-4 h-4 mr-1 text-yellow-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                Open 24/7
            </span>
            <span class="hidden md:inline-block opacity-80">
                Call Us: <a href="tel:8888080237" class="font-bold hover:underline">(888) 808-0237</a>
            </span>
        </div>
    </div>

    <!-- Sticky Header/Navigation -->
    <header id="header" class="sticky top-0 z-40 bg-white shadow-xl transition duration-300">
        <nav class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-20">
                <!-- Logo (Aesthetic Text Gradient) -->
                <a href="#" onclick="showPage('home'); return false;" class="logo-text tracking-tight transition duration-300">
                    <span class="logo-text-wide">Wide</span><span class="logo-text-broadband">Broadband</span>
                </a>

                <!-- Desktop Nav Links -->
                <div class="hidden md:flex space-x-8 text-sm font-medium">
                    <a href="#" onclick="showPage('home'); return false;" class="text-gray-900 nav-link transition duration-300">Home</a>
                    <a href="#" onclick="showPage('providers'); return false;" class="text-gray-900 nav-link transition duration-300">Plans</a>
                    <a href="#" onclick="showPage('reviews'); return false;" class="text-gray-900 nav-link transition duration-300">Reviews</a>
                    <a href="#" onclick="showPage('blog'); return false;" class="text-gray-900 nav-link transition duration-300">Blog</a>
                    <a href="#" onclick="showPage('support'); return false;" class="text-gray-900 nav-link transition duration-300">Support</a>
                </div>

                <!-- CTA Timer Badge -->
                <div class="flex items-center space-x-4">
                    <div class="hidden sm:flex items-center px-4 py-1.5 rounded-full font-bold text-sm shadow-lg timer-badge transition duration-500 transform hover:scale-[1.03]">
                        <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                        <span id="countdown-timer-header">00:00:00</span>
                    </div>

                    <!-- Mobile Menu Button -->
                    <button id="mobile-menu-button" class="md:hidden text-gray-500 hover:text-gray-900 focus:outline-none" aria-label="Toggle Menu">
                        <svg class="w-7 h-7" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
                    </button>
                </div>
            </div>
        </nav>
        <!-- Mobile Menu Panel -->
        <div id="mobile-menu" class="hidden md:hidden bg-white shadow-inner pb-4">
            <div class="px-2 pt-2 pb-3 space-y-1 sm:px-3">
                <a href="#" onclick="showPage('home'); closeMobileMenu(); return false;" class="block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:bg-gray-50">Home</a>
                <a href="#" onclick="showPage('providers'); closeMobileMenu(); return false;" class="block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:bg-gray-50">Plans</a>
                <a href="#" onclick="showPage('reviews'); closeMobileMenu(); return false;" class="block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:bg-gray-50">Reviews</a>
                <a href="#" onclick="showPage('blog'); closeMobileMenu(); return false;" class="block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:bg-gray-50">Blog</a>
                <a href="#" onclick="showPage('support'); closeMobileMenu(); return false;" class="block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:bg-gray-50">Support</a>
            </div>
        </div>
    </header>

    <!-- LOADING SCREEN OVERLAY -->
    <div id="loading-screen" class="fixed inset-0 bg-gray-900 bg-opacity-95 z-50 flex flex-col items-center justify-center hidden" style="display: none; pointer-events: none;">
        <div class="water-drop-spinner flex space-x-3 mb-6">
            <div class="dot1"></div>
            <div class="dot2"></div>
            <div class="dot3"></div>
        </div>
        <h2 class="text-xl sm:text-2xl font-bold text-white mb-2">Searching for providers in your area...</h2>
        <p class="text-gray-400">Finding the best fiber, cable, and satellite plans near you.</p>
    </div>

    <!-- MAIN PAGE CONTAINER (All content sections) -->
    <main id="main-container" class="relative overflow-x-hidden">

        <!-- Home Page Section -->
        <section id="home" class="page-section transition duration-500">
            <div class="hero-bg py-32 text-white">
                <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
                    <h1 class="text-5xl sm:text-6xl md:text-7xl font-extrabold mb-4 leading-tight">
                        Find the Best Internet Plans in Your Area
                    </h1>
                    <p class="text-xl md:text-2xl font-light mb-10 text-blue-200">
                        Compare deals from 10+ trusted providers and save up to 40% on broadband services.
                    </p>
                    
                    <!-- ZIP Code Search Form -->
                    <div class="max-w-lg mx-auto bg-white p-3 rounded-xl shadow-2xl flex flex-col sm:flex-row space-y-3 sm:space-y-0 sm:space-x-3 mb-8">
                        <input type="text" id="zip-code-input-hero" placeholder="Enter your ZIP Code" class="flex-grow p-4 text-gray-800 rounded-lg focus:ring-blue-500 focus:border-blue-500 border border-gray-300 placeholder-gray-500" maxlength="5" pattern="\d{5}" required aria-label="Enter your 5-digit ZIP code for availability check">
                        <button onclick="handleZipSearch(document.getElementById('zip-code-input-hero').value)" class="cta-primary text-white font-bold px-8 py-4 rounded-xl shadow-lg transition duration-300">
                            Check Availability
                        </button>
                    </div>

                    <a href="#" onclick="showModal('callback-modal'); return false;" class="text-blue-200 hover:text-blue-100 underline text-sm font-medium">
                        Need help? Request a Call Back
                    </a>

                    <!-- Trust Icons -->
                    <div class="mt-16 flex justify-center space-x-8 text-sm font-medium text-gray-200">
                        <span class="flex items-center"><svg class="w-5 h-5 mr-2 text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg> Fastest Fiber Speeds</span>
                        <span class="flex items-center hidden sm:flex"><svg class="w-5 h-5 mr-2 text-yellow-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 005.412 16.96h13.176c-.846-2.185-.884-4.577-.104-6.848"></path></svg> Trusted Providers</span>
                        <span class="flex items-center"><svg class="w-5 h-5 mr-2 text-red-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2z"></path></svg> No Data Caps</span>
                    </div>
                </div>
            </div>

            <!-- Why Choose Us -->
            <div class="py-24 bg-white">
                <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
                    <h2 class="text-4xl font-extrabold text-gray-900 mb-2 header-accent">Why Choose Wide Broadband?</h2>
                    <p class="text-lg text-gray-600 mb-16">We simplify the process of finding the right internet plan so you can focus on what matters.</p>

                    <div class="grid grid-cols-1 md:grid-cols-4 gap-10">
                        <!-- Benefit 1 -->
                        <div class="p-6 bg-gray-50 rounded-xl shadow-lg hover:shadow-xl transition duration-300 transform hover:scale-[1.02]">
                            <svg class="w-12 h-12 text-blue-600 mb-4 mx-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19V6l12-3v14M9 19c-3.141 0-5.741-2.072-6.5-5M9 19v-6M21 16V3M12 13h9"></path></svg>
                            <h3 class="text-xl font-bold mb-2">Fast, Reliable Speeds</h3>
                            <p class="text-gray-600 text-sm">Access fiber and cable networks offering gigabit speeds for seamless streaming and gaming.</p>
                        </div>
                        <!-- Benefit 2 -->
                        <div class="p-6 bg-gray-50 rounded-xl shadow-lg hover:shadow-xl transition duration-300 transform hover:scale-[1.02]">
                            <svg class="w-12 h-12 text-green-600 mb-4 mx-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 005.412 16.96h13.176c-.846-2.185-.884-4.577-.104-6.848"></path></svg>
                            <h3 class="text-xl font-bold mb-2">No Hidden Fees</h3>
                            <p class="text-gray-600 text-sm">Transparent pricing, no surprise charges, and clear terms for every plan you choose.</p>
                        </div>
                        <!-- Benefit 3 -->
                        <div class="p-6 bg-gray-50 rounded-xl shadow-lg hover:shadow-xl transition duration-300 transform hover:scale-[1.02]">
                            <svg class="w-12 h-12 text-purple-600 mb-4 mx-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c1.657 0 3 .895 3 2s-1.343 2-3 2-3-.895-3-2 1.343-2 3-2zM9 10a3 3 0 116 0M10 14h4M3 21h18"></path></svg>
                            <h3 class="text-xl font-bold mb-2">24/7 Customer Support</h3>
                            <p class="text-gray-600 text-sm">Expert help is available around the clock via phone, chat, and email for all your needs.</p>
                        </div>
                        <!-- Benefit 4 -->
                        <div class="p-6 bg-gray-50 rounded-xl shadow-lg hover:shadow-xl transition duration-300 transform hover:scale-[1.02]">
                            <svg class="w-12 h-12 text-teal-600 mb-4 mx-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"></path></svg>
                            <h3 class="text-xl font-bold mb-2">Free Equipment Included</h3>
                            <p class="text-gray-600 text-sm">Get a free modem and Wi-Fi router included with select plans for instant savings.</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Provider Spotlight / Plans Overview -->
            <div class="py-24 bg-gray-50">
                <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                    <div class="text-center mb-16">
                        <h2 class="text-4xl font-extrabold text-gray-900 mb-2 header-accent">Popular Plans in the U.S.</h2>
                        <p class="text-lg text-gray-600">See a snapshot of competitive pricing from our top partners.</p>
                    </div>

                    <div id="home-provider-cards" class="grid grid-cols-1 md:grid-cols-3 gap-8">
                        <!-- Provider cards will be rendered here -->
                    </div>

                    <div class="text-center mt-12">
                         <button onclick="showPage('providers')" class="gradient-accent text-white font-bold px-12 py-4 rounded-full shadow-xl text-lg transition duration-300 transform hover:scale-[1.03]">
                            View All 10 Providers & Plans
                        </button>
                    </div>
                </div>
            </div>

            <!-- Internet for Streaming & Gaming -->
            <div class="py-24 bg-white">
                <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-16 items-center">
                        <div class="lg:order-2">
                             <img src="https://placehold.co/600x400/3b82f6/ffffff?text=Family+Streaming+%26+Gaming" alt="Family streaming content and gaming simultaneously on high-speed internet" class="rounded-2xl shadow-2xl w-full" loading="lazy">
                        </div>
                        <div class="lg:order-1">
                            <h2 class="text-4xl font-extrabold text-gray-900 mb-4 header-accent-left">Internet Built for Your Digital Life</h2>
                            <p class="text-lg text-gray-600 mb-6">Whether you're streaming 4K video, downloading large game updates, or running a smart home full of devices, our fiber and cable options deliver the stability and speed you need.</p>
                            <ul class="space-y-3 text-gray-700">
                                <li class="flex items-center"><svg class="w-5 h-5 mr-3 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Lag-free 4K/8K streaming on multiple devices.</li>
                                <li class="flex items-center"><svg class="w-5 h-5 mr-3 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Low latency for competitive online gaming.</li>
                                <li class="flex items-center"><svg class="w-5 h-5 mr-3 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Reliable connection for uninterrupted work-from-home video calls.</li>
                            </ul>
                            <button onclick="showPage('providers')" class="gradient-accent mt-8 text-white font-bold px-8 py-3 rounded-full shadow-lg text-lg transition duration-300 transform hover:scale-[1.03]">
                                Find Your Perfect Speed
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Internet Speeds Explained & Speed Test Widget -->
            <div class="py-24 bg-gray-50">
                <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
                    <h2 class="text-4xl font-extrabold text-gray-900 mb-2 header-accent">See How Fast Your Internet Is</h2>
                    <p class="text-lg text-gray-600 mb-16">Use our tool to check your current speed or see how speeds compare.</p>
                    
                    <!-- Speed Test Widget -->
                    <div class="bg-white p-8 rounded-2xl shadow-2xl max-w-xl mx-auto mb-16 border border-gray-200">
                        <div id="speed-test-display">
                            <h3 class="text-2xl font-bold mb-4 text-blue-700">Wide Broadband Speed Test</h3>
                            <p class="text-gray-500 mb-8" id="speed-test-status">Ready to check your connection...</p>

                            <div class="flex flex-col items-center space-y-8">
                                <!-- Gauge Area -->
                                <div class="relative">
                                    <div id="speed-gauge" class="transition-transform duration-500 ease-linear"></div>
                                    <div class="absolute inset-0 flex flex-col items-center justify-center -rotate-45">
                                        <div class="text-4xl font-extrabold text-gray-900" id="download-speed">0.0</div>
                                        <div class="text-sm font-medium text-gray-500">Mbps</div>
                                    </div>
                                </div>
                                
                                <!-- Results Table -->
                                <div class="w-full grid grid-cols-3 gap-4 text-center">
                                    <div>
                                        <p class="text-xs font-medium text-gray-500">Latency</p>
                                        <p class="text-xl font-bold text-gray-800" id="latency-result">--</p>
                                    </div>
                                    <div>
                                        <p class="text-xs font-medium text-gray-500">Download</p>
                                        <p class="text-xl font-bold text-gray-800" id="download-result">--</p>
                                    </div>
                                    <div>
                                        <p class="text-xs font-medium text-gray-500">Upload</p>
                                        <p class="text-xl font-bold text-gray-800" id="upload-result">--</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <button id="start-speed-test" onclick="startSpeedTest()" class="cta-primary mt-8 text-white font-bold px-10 py-3 rounded-full shadow-lg transition duration-300">
                            Start Speed Test
                        </button>
                    </div>

                    <!-- Infographic -->
                    <h3 class="text-3xl font-extrabold text-gray-900 mt-20 mb-10">Recommended Speeds by Household Size</h3>
                    <img src="https://placehold.co/900x300/e0f2fe/1d4ed8?text=Infographic:+Internet+Speeds+Explained" alt="Infographic showing recommended internet speeds for small, medium, and large households" class="rounded-xl shadow-xl mx-auto w-full lg:w-3/4" loading="lazy">
                </div>
            </div>

            <!-- Customer Testimonials -->
            <div class="py-24 bg-white">
                <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
                    <h2 class="text-4xl font-extrabold text-gray-900 mb-2 header-accent">What Our Customers Say</h2>
                    <p class="text-lg text-gray-600 mb-16">See why thousands of Americans trust Wide Broadband to find their next provider.</p>
                    
                    <div id="home-reviews-grid" class="grid grid-cols-1 md:grid-cols-3 gap-8">
                        <!-- Reviews will be rendered here -->
                    </div>

                    <div class="mt-12">
                        <button onclick="showPage('reviews')" class="gradient-accent text-white font-bold px-8 py-3 rounded-full shadow-lg transition duration-300 transform hover:scale-[1.03]">
                            View All Customer Reviews
                        </button>
                    </div>
                </div>
            </div>

             <!-- Latest Blog Highlights -->
            <div class="py-24 bg-gray-50">
                <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
                    <h2 class="text-4xl font-extrabold text-gray-900 mb-2 header-accent">Latest Insights from Our Blog</h2>
                    <p class="text-lg text-gray-600 mb-16">Stay informed on connectivity trends and tips.</p>

                    <div id="blog-highlights-grid" class="grid grid-cols-1 md:grid-cols-3 gap-8">
                        <!-- Blog highlights will be rendered here -->
                    </div>

                    <div class="mt-12">
                        <button onclick="showPage('blog')" class="cta-primary text-white font-bold px-8 py-3 rounded-full shadow-lg transition duration-300 transform hover:scale-[1.03]">
                            Read More Articles
                        </button>
                    </div>
                </div>
            </div>

             <!-- Footer CTA Banner -->
            <div class="bg-blue-800 text-white py-16">
                 <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
                    <h2 class="text-4xl font-extrabold mb-6">
                        Ready to get started? Enter your ZIP code now!
                    </h2>
                    <div class="max-w-lg mx-auto bg-white p-2 rounded-xl shadow-2xl flex space-x-2">
                        <input type="text" id="zip-code-input-footer" placeholder="Enter your ZIP Code" class="flex-grow p-4 text-gray-800 rounded-lg focus:ring-blue-500 focus:border-blue-500 border border-gray-300 placeholder-gray-500" maxlength="5" pattern="\d{5}" required aria-label="Enter your 5-digit ZIP code for availability check">
                        <button onclick="handleZipSearch(document.getElementById('zip-code-input-footer').value)" class="cta-primary text-white font-bold px-8 py-3 rounded-lg shadow-md transition duration-300 transform hover:scale-[1.03]">
                            Check Availability
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Search Results / Comparison Table Page Section -->
        <section id="search-results-page" class="page-section pt-10 pb-24 transition duration-500">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="text-center mb-16">
                    <h1 class="text-5xl font-extrabold text-gray-900 mb-2 header-accent">Available Plans in 90210</h1>
                    <p class="text-xl text-gray-600">Compare speeds, prices, and features from top providers in your neighborhood.</p>
                </div>

                <!-- Comparison Table -->
                <div id="plan-comparison-table-container">
                    <!-- The comparison table will be rendered here -->
                </div>

                <!-- Bundles Section -->
                <div class="mt-20">
                    <h2 class="text-3xl font-extrabold text-gray-900 mb-8 header-accent-left">Exclusive Bundles & Mobile Lines</h2>
                    <div id="bundle-offers-grid" class="grid grid-cols-1 md:grid-cols-3 gap-8">
                        <div class="p-6 bg-white rounded-xl shadow-xl border-l-4 border-blue-600">
                            <h3 class="text-2xl font-bold text-blue-800 mb-2">TV & Internet Savings</h3>
                            <p class="text-gray-600 mb-4">Combine your internet with over 150 HD channels and save up to $20/month guaranteed.</p>
                            <ul class="text-sm space-y-2 text-gray-700">
                                <li class="flex items-center"><svg class="w-4 h-4 mr-2 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Free DVR for 12 months.</li>
                                <li class="flex items-center"><svg class="w-4 h-4 mr-2 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> HBO Max included for 6 months.</li>
                            </ul>
                            <a href="#" onclick="showModal('callback-modal'); return false;" class="text-blue-600 font-bold mt-4 inline-block hover:underline">Learn More & Bundle</a>
                        </div>
                        <div class="p-6 bg-white rounded-xl shadow-xl border-l-4 border-green-600">
                            <h3 class="text-2xl font-bold text-green-800 mb-2">Free Mobile Lines</h3>
                            <p class="text-gray-600 mb-4">Add up to four lines of unlimited talk, text, and 5G data for free with qualifying internet plans.</p>
                            <ul class="text-sm space-y-2 text-gray-700">
                                <li class="flex items-center"><svg class="w-4 h-4 mr-2 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Nationwide 5G coverage.</li>
                                <li class="flex items-center"><svg class="w-4 h-4 mr-2 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> No hidden fees or contracts.</li>
                            </ul>
                            <a href="#" onclick="showModal('callback-modal'); return false;" class="text-green-600 font-bold mt-4 inline-block hover:underline">See Mobile Deals</a>
                        </div>
                        <div class="p-6 bg-white rounded-xl shadow-xl border-l-4 border-purple-600">
                            <h3 class="text-2xl font-bold text-purple-800 mb-2">Home Security Systems</h3>
                            <p class="text-gray-600 mb-4">Protect your home and family with a fully integrated security system starting at $10/month.</p>
                            <ul class="text-sm space-y-2 text-gray-700">
                                <li class="flex items-center"><svg class="w-4 h-4 mr-2 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> 24/7 Professional Monitoring.</li>
                                <li class="flex items-center"><svg class="w-4 h-4 mr-2 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Smart device integration.</li>
                            </ul>
                            <a href="#" onclick="showModal('callback-modal'); return false;" class="text-purple-600 font-bold mt-4 inline-block hover:underline">Add Security</a>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- All Providers/Plans Page Section (Static Data) -->
        <section id="providers" class="page-section pt-10 pb-24 transition duration-500">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="text-center mb-16">
                    <h1 class="text-5xl font-extrabold text-gray-900 mb-2 header-accent">All National Broadband Plans</h1>
                    <p class="text-xl text-gray-600">A comprehensive view of over 40 plans from 10 major U.S. internet providers. **Always check availability by ZIP code.**</p>
                </div>

                <div id="all-providers-comparison-table-container">
                    <!-- The complete comparison table for all 10 providers will be rendered here -->
                </div>
            </div>
        </section>

        <!-- Reviews Page Section -->
        <section id="reviews" class="page-section pt-10 pb-24 transition duration-500">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="text-center mb-16">
                    <h1 class="text-5xl font-extrabold text-gray-900 mb-2 header-accent">Customer Reviews & Trust</h1>
                    <p class="text-xl text-gray-600">Transparent feedback from verified customers across the nation.</p>
                </div>

                <!-- Review Summary Chart -->
                <div class="bg-blue-50 p-8 rounded-2xl shadow-xl mb-16 border border-blue-200">
                    <h2 class="text-3xl font-extrabold text-blue-800 mb-6 text-center">Satisfaction Overview</h2>
                    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8 text-center">
                        <div class="p-4 bg-white rounded-lg shadow-md">
                            <p class="text-5xl font-extrabold text-green-600">4.8</p>
                            <p class="text-sm font-bold text-gray-700 mt-1">Average Star Rating</p>
                            <p class="text-xs text-gray-500">(Based on 10,000+ reviews)</p>
                        </div>
                        <div class="p-4 bg-white rounded-lg shadow-md">
                            <p class="text-5xl font-extrabold text-blue-600">97%</p>
                            <p class="text-sm font-bold text-gray-700 mt-1">Speed Satisfaction</p>
                        </div>
                        <div class="p-4 bg-white rounded-lg shadow-md">
                            <p class="text-5xl font-extrabold text-purple-600">92%</p>
                            <p class="text-sm font-bold text-gray-700 mt-1">Support Quality</p>
                        </div>
                        <div class="p-4 bg-white rounded-lg shadow-md">
                            <p class="text-5xl font-extrabold text-yellow-600">48 hrs</p>
                            <p class="text-sm font-bold text-gray-700 mt-1">Average Install Time</p>
                        </div>
                    </div>
                </div>

                <!-- Top Cities & States (Mock Data) -->
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-12 mb-16">
                    <div class="lg:col-span-2">
                        <h2 class="text-3xl font-extrabold text-gray-900 mb-6 header-accent-left">Verified Customer Testimonials</h2>
                        <div id="full-reviews-list" class="space-y-8">
                             <!-- Reviews will be rendered here via JS -->
                        </div>
                    </div>
                    <div class="bg-white p-6 rounded-xl shadow-lg border border-gray-100 h-fit">
                        <h3 class="text-2xl font-bold text-blue-700 mb-4">Top Service Regions</h3>
                        <p class="text-sm text-gray-600 mb-4">Areas with the highest availability for Fiber and Cable plans:</p>
                        <div class="grid grid-cols-2 gap-x-4 gap-y-2 text-sm">
                            <p class="font-semibold text-gray-800">Top States:</p>
                            <p class="font-semibold text-gray-800">Top Cities:</p>
                            <ul class="list-disc list-inside space-y-1 text-gray-700">
                                <li>California</li>
                                <li>Texas</li>
                                <li>Florida</li>
                                <li>New York</li>
                                <li>North Carolina</li>
                            </ul>
                            <ul class="list-disc list-inside space-y-1 text-gray-700">
                                <li>Los Angeles</li>
                                <li>Dallas</li>
                                <li>Orlando</li>
                                <li>Charlotte</li>
                                <li>New York City</li>
                            </ul>
                        </div>
                         <div class="mt-6 p-4 bg-green-50 rounded-lg text-green-800 font-bold text-center border-2 border-green-300">
                            <svg class="w-6 h-6 inline mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 005.412 16.96h13.176c-.846-2.185-.884-4.577-.104-6.848"></path></svg>
                            Verified Customer Network
                        </div>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Blog Page Section -->
        <section id="blog" class="page-section pt-10 pb-24 transition duration-500">
             <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="text-center mb-16">
                    <h1 class="text-5xl font-extrabold text-gray-900 mb-2 header-accent">Expert Advice & Guides</h1>
                    <p class="text-xl text-gray-600">Your resource for understanding internet technology and finding the best deals.</p>
                </div>

                <div id="full-blog-list" class="space-y-12">
                     <!-- Blog articles will be rendered here via JS -->
                </div>
            </div>
        </section>

        <!-- Support/Contact Page Section -->
        <section id="support" class="page-section pt-10 pb-24 transition duration-500">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="text-center mb-16">
                    <h1 class="text-5xl font-extrabold text-gray-900 mb-2 header-accent">Get Personalized Support</h1>
                    <p class="text-xl text-gray-600">Our team is available 24/7 to help you find the perfect plan or assist with your order.</p>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-3 gap-12">
                    <!-- Contact Information -->
                    <div class="lg:col-span-1 bg-white p-8 rounded-2xl shadow-xl border border-gray-200 h-fit">
                        <h2 class="text-3xl font-extrabold text-blue-700 mb-6">Contact Details</h2>
                        <div class="space-y-6 text-gray-700">
                            <div>
                                <p class="font-bold flex items-center mb-1"><svg class="w-6 h-6 mr-3 text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"></path></svg>Phone Support</p>
                                <a href="tel:8888080237" class="text-lg font-semibold text-blue-600 hover:underline">(888) 808-0237</a>
                            </div>
                            <div>
                                <p class="font-bold flex items-center mb-1"><svg class="w-6 h-6 mr-3 text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>Hours of Operation</p>
                                <p class="text-lg">Open 24/7</p>
                            </div>
                            <div>
                                <p class="font-bold flex items-center mb-1"><svg class="w-6 h-6 mr-3 text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path></svg>Corporate Address</p>
                                <p class="text-lg">3229 Greenpoint Ave, Long Island City, NY 11101</p>
                            </div>
                        </div>

                        <!-- Google Map Placeholder -->
                        <div class="mt-8 bg-gray-200 h-48 rounded-lg flex items-center justify-center text-gray-500 font-medium">
                            Google Map Placeholder
                        </div>
                    </div>

                    <!-- Contact Form -->
                    <div class="lg:col-span-2 bg-white p-8 rounded-2xl shadow-xl border border-gray-200">
                        <h2 class="text-3xl font-extrabold text-gray-900 mb-6">Send Us a Message</h2>
                        <form id="contact-form" onsubmit="handleContactForm(event)" class="space-y-6">
                            <input type="text" placeholder="Your Full Name" class="w-full p-4 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500" required aria-label="Full Name">
                            <input type="email" placeholder="Your Email Address" class="w-full p-4 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500" required aria-label="Email Address">
                            <input type="tel" placeholder="Your Phone Number (Optional)" class="w-full p-4 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500" aria-label="Phone Number">
                            <textarea placeholder="Your Message or Query" rows="5" class="w-full p-4 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500" required aria-label="Message"></textarea>
                            <button type="submit" class="cta-primary text-white font-bold px-8 py-4 rounded-full shadow-lg transition duration-300 transform hover:scale-[1.03]">
                                Send Message
                            </button>
                            <p id="contact-message" class="text-sm text-green-600 font-semibold mt-4 hidden">Message sent successfully! We will be in touch shortly.</p>
                        </form>
                    </div>
                </div>
            </div>
        </section>

        <!-- Order Form Section -->
        <section id="order-form" class="page-section pt-10 pb-24 transition duration-500">
            <div class="max-w-xl mx-auto px-4 sm:px-6 lg:px-8 bg-white p-8 rounded-2xl shadow-2xl border border-gray-200">
                <h1 class="text-4xl font-extrabold text-gray-900 mb-2 header-accent">Secure Your Plan</h1>
                <p class="text-lg text-gray-600 mb-8">Just four quick steps to get connected with the best broadband in your area.</p>

                <form id="multi-step-order-form" onsubmit="handleOrderForm(event)" class="space-y-6">
                    <!-- Progress Indicator -->
                    <div class="flex justify-between items-center mb-8">
                        <div id="step-1-indicator" class="w-8 h-8 rounded-full bg-blue-600 text-white flex items-center justify-center font-bold">1</div>
                        <div class="flex-grow h-1 bg-gray-200 mx-2"></div>
                        <div id="step-2-indicator" class="w-8 h-8 rounded-full bg-gray-300 text-gray-500 flex items-center justify-center font-bold">2</div>
                        <div class="flex-grow h-1 bg-gray-200 mx-2"></div>
                        <div id="step-3-indicator" class="w-8 h-8 rounded-full bg-gray-300 text-gray-500 flex items-center justify-center font-bold">3</div>
                        <div class="flex-grow h-1 bg-gray-200 mx-2"></div>
                        <div id="step-4-indicator" class="w-8 h-8 rounded-full bg-gray-300 text-gray-500 flex items-center justify-center font-bold">4</div>
                    </div>

                    <!-- Step 1: Contact Info -->
                    <div id="step-1" class="order-step space-y-4">
                        <h2 class="text-2xl font-bold text-gray-900">Step 1: Contact Details</h2>
                        <input type="text" id="order-name" placeholder="Full Name" class="w-full p-4 border border-gray-300 rounded-lg" required aria-label="Full Name">
                        <input type="email" id="order-email" placeholder="Email Address" class="w-full p-4 border border-gray-300 rounded-lg" required aria-label="Email Address">
                        <input type="tel" id="order-phone" placeholder="Phone Number" class="w-full p-4 border border-gray-300 rounded-lg" required aria-label="Phone Number">
                        <input type="text" id="order-zip" placeholder="ZIP Code" class="w-full p-4 border border-gray-300 rounded-lg" required maxlength="5" pattern="\d{5}" aria-label="ZIP Code">
                        <button type="button" onclick="nextStep(2)" class="gradient-accent text-white font-bold px-8 py-3 rounded-full shadow-lg transition duration-300">Next: Select Provider</button>
                    </div>

                    <!-- Step 2: Select Provider -->
                    <div id="step-2" class="order-step space-y-4 hidden">
                         <h2 class="text-2xl font-bold text-gray-900">Step 2: Choose Provider</h2>
                         <select id="order-provider" class="w-full p-4 border border-gray-300 rounded-lg" required onchange="updatePlanOptions(this.value)" aria-label="Select Provider">
                            <option value="">-- Select a Provider --</option>
                            <option value="Spectrum">Spectrum</option>
                            <option value="AT&T">AT&T</option>
                            <option value="Xfinity">Xfinity</option>
                            <option value="Verizon">Verizon</option>
                            <option value="Frontier">Frontier</option>
                            <option value="Cox">Cox</option>
                            <option value="Optimum">Optimum</option>
                            <option value="T-Mobile Home Internet">T-Mobile Home Internet</option>
                            <option value="Viasat">Viasat</option>
                            <option value="HughesNet">HughesNet</option>
                        </select>
                        <div class="flex justify-between">
                            <button type="button" onclick="nextStep(1)" class="bg-gray-400 text-white font-bold px-6 py-3 rounded-full transition duration-300">Back</button>
                            <button type="button" onclick="nextStep(3)" class="gradient-accent text-white font-bold px-8 py-3 rounded-full shadow-lg transition duration-300" id="step-2-next-btn" disabled>Next: Select Plan</button>
                        </div>
                    </div>

                    <!-- Step 3: Select Plan -->
                    <div id="step-3" class="order-step space-y-4 hidden">
                         <h2 class="text-2xl font-bold text-gray-900">Step 3: Select Plan</h2>
                         <select id="order-plan" class="w-full p-4 border border-gray-300 rounded-lg" required aria-label="Select Plan">
                            <option value="">-- Choose a plan from the selected provider --</option>
                        </select>
                         <div class="flex justify-between">
                            <button type="button" onclick="nextStep(2)" class="bg-gray-400 text-white font-bold px-6 py-3 rounded-full transition duration-300">Back</button>
                            <button type="button" onclick="nextStep(4)" class="gradient-accent text-white font-bold px-8 py-3 rounded-full shadow-lg transition duration-300" id="step-3-next-btn" disabled>Next: Review & Submit</button>
                        </div>
                    </div>
                    
                    <!-- Step 4: Submit -->
                    <div id="step-4" class="order-step space-y-4 hidden">
                        <h2 class="text-2xl font-bold text-gray-900">Step 4: Review & Submit</h2>
                        <div class="p-4 bg-blue-50 rounded-lg border border-blue-200">
                            <p class="font-semibold text-gray-800 mb-2">Order Summary:</p>
                            <p class="text-sm text-gray-700">Provider: <span id="summary-provider" class="font-bold">N/A</span></p>
                            <p class="text-sm text-gray-700">Plan: <span id="summary-plan" class="font-bold">N/A</span></p>
                            <p class="text-sm text-gray-700">ZIP: <span id="summary-zip" class="font-bold">N/A</span></p>
                        </div>
                        <div class="flex items-start">
                            <input type="checkbox" id="order-terms" class="mt-1 mr-3 rounded text-blue-600 focus:ring-blue-500" required aria-label="Accept Terms">
                            <label for="order-terms" class="text-sm text-gray-600">I agree to the <a href="#" onclick="showPage('support'); return false;" class="text-blue-600 hover:underline">Terms of Service</a> and Privacy Policy.</label>
                        </div>
                        <button type="submit" class="cta-primary text-white font-bold px-8 py-4 rounded-full shadow-lg transition duration-300 w-full">
                            Confirm & Order Now
                        </button>
                        <p class="text-sm text-gray-500 text-center">Need help? Call <a href="tel:8888080237" class="text-blue-600 hover:underline font-bold">(888) 808-0237</a></p>
                    </div>
                </form>
            </div>
        </section>

        <!-- Thank You Page Section -->
        <section id="thank-you-page" class="page-section pt-32 pb-48 transition duration-500 text-center">
            <div class="max-w-md mx-auto px-4 sm:px-6 lg:px-8 bg-white p-10 rounded-2xl shadow-2xl border-4 border-green-400">
                <!-- Success Animation (Simple SVG Checkmark) -->
                <svg class="w-24 h-24 mx-auto text-green-500 mb-6" viewBox="0 0 52 52" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <circle cx="26" cy="26" r="25" fill="#e6ffe6" stroke="#4CAF50" stroke-width="2"/>
                    <path d="M14 27 L23 36 L39 16" stroke="#4CAF50" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>

                <h1 class="text-4xl font-extrabold text-green-700 mb-4">Order Confirmed!</h1>
                <p class="text-xl text-gray-700 mb-8">
                    **Thank you for your order!** You will receive a call from our department shortly to confirm your details.
                </p>
                <a href="#" onclick="showPage('home'); return false;" class="gradient-accent text-white font-bold px-8 py-3 rounded-full shadow-lg transition duration-300 transform hover:scale-[1.03]">
                    Return to Home
                </a>
            </div>
        </section>

    </main>
    
    <!-- Modals (Call Back, Speed Test, Compare) -->
    
    <!-- Call Back Modal -->
    <div id="callback-modal" class="fixed inset-0 bg-gray-900 bg-opacity-75 z-50 flex items-center justify-center hidden" style="display: none;">
        <div class="bg-white p-8 rounded-2xl shadow-2xl max-w-lg w-full m-4">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-2xl font-bold text-blue-700">Request a Call Back</h3>
                <button onclick="hideModal('callback-modal')" class="text-gray-500 hover:text-gray-900 text-2xl font-bold" aria-label="Close Modal">&times;</button>
            </div>
            <p class="text-gray-600 mb-4">Enter your details and a connection specialist will call you within the next 15 minutes.</p>
            <form onsubmit="handleCallbackRequest(event)" class="space-y-4">
                <input type="text" placeholder="Full Name" class="w-full p-3 border border-gray-300 rounded-lg" required aria-label="Callback Full Name">
                <input type="tel" placeholder="Best Phone Number" class="w-full p-3 border border-gray-300 rounded-lg" required aria-label="Callback Phone Number">
                <input type="text" placeholder="Your ZIP Code" class="w-full p-3 border border-gray-300 rounded-lg" maxlength="5" pattern="\d{5}" required aria-label="Callback ZIP Code">
                <button type="submit" class="cta-primary text-white font-bold px-6 py-3 rounded-full shadow-lg transition duration-300 w-full">
                    Submit Request
                </button>
                <p id="callback-message" class="text-sm text-green-600 font-semibold mt-4 hidden text-center">Request received! Expect a call shortly.</p>
            </form>
        </div>
    </div>

    <!-- Speed Test Modal -->
    <div id="speed-test-modal" class="fixed inset-0 bg-gray-900 bg-opacity-75 z-50 flex items-center justify-center hidden" style="display: none;">
        <div class="bg-white p-8 rounded-2xl shadow-2xl max-w-md w-full m-4">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-2xl font-bold text-blue-700">Internet Speed Test</h3>
                <button onclick="hideModal('speed-test-modal'); resetSpeedTest()" class="text-gray-500 hover:text-gray-900 text-2xl font-bold" aria-label="Close Speed Test Modal">&times;</button>
            </div>
            <p class="text-gray-600 mb-8 text-center">Powered by a Fast.com-style simulation.</p>
            
            <div id="speed-test-display-modal">
                <div class="flex flex-col items-center space-y-8">
                    <!-- Gauge Area -->
                    <div class="relative">
                        <div id="speed-gauge-modal" class="transition-transform duration-500 ease-linear"></div>
                        <div class="absolute inset-0 flex flex-col items-center justify-center -rotate-45">
                            <div class="text-5xl font-extrabold text-gray-900" id="download-speed-modal">0.0</div>
                            <div class="text-sm font-medium text-gray-500">Mbps</div>
                        </div>
                    </div>
                    
                    <!-- Results Table -->
                    <div class="w-full grid grid-cols-3 gap-4 text-center">
                        <div>
                            <p class="text-xs font-medium text-gray-500">Latency</p>
                            <p class="text-xl font-bold text-gray-800" id="latency-result-modal">--</p>
                        </div>
                        <div>
                            <p class="text-xs font-medium text-gray-500">Download</p>
                            <p class="text-xl font-bold text-gray-800" id="download-result-modal">--</p>
                        </div>
                        <div>
                            <p class="text-xs font-medium text-gray-500">Upload</p>
                            <p class="text-xl font-bold text-gray-800" id="upload-result-modal">--</p>
                        </div>
                    </div>
                </div>
            </div>

            <button id="start-speed-test-modal" onclick="startSpeedTest(true)" class="cta-primary mt-8 text-white font-bold px-10 py-3 rounded-full shadow-lg transition duration-300 w-full">
                Start Speed Test
            </button>
        </div>
    </div>

    <!-- Plan Comparison Modal -->
    <div id="compare-modal" class="fixed inset-0 bg-gray-900 bg-opacity-75 z-50 flex items-center justify-center hidden" style="display: none;">
        <div class="bg-white p-8 rounded-2xl shadow-2xl max-w-4xl w-full m-4">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-2xl font-bold text-blue-700">Plan Comparison Tool (Max 3)</h3>
                <button onclick="hideModal('compare-modal')" class="text-gray-500 hover:text-gray-900 text-2xl font-bold" aria-label="Close Comparison Modal">&times;</button>
            </div>
            <div id="comparison-display" class="overflow-x-auto">
                <!-- Comparison table will be rendered here -->
            </div>
            <div class="mt-6 text-center">
                <button onclick="clearComparison()" class="bg-red-500 hover:bg-red-600 text-white font-bold px-6 py-2 rounded-full transition duration-300">Clear All Plans</button>
            </div>
        </div>
    </div>

    <!-- Cookie Consent Banner -->
    <div id="cookie-banner" class="fixed bottom-0 left-0 right-0 p-4 bg-gray-900 text-white text-sm z-50 transition-transform duration-500 ease-in-out transform translate-y-full" style="display: none;">
        <div class="max-w-7xl mx-auto flex flex-col sm:flex-row items-center justify-between">
            <p class="mb-2 sm:mb-0">We use cookies to ensure you get the best experience on our site. <a href="#" onclick="showPage('support'); return false;" class="text-blue-400 hover:text-blue-300 underline">Read our Privacy Policy</a>.</p>
            <button onclick="acceptCookies()" class="px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-full shadow-md transition duration-300 transform hover:scale-[1.03]">Accept & Close</button>
        </div>
    </div>


    <footer class="bg-gray-900 text-white py-16">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid grid-cols-2 md:grid-cols-5 gap-10">
                
                <!-- Logo & Contact -->
                <div>
                    <a href="#" onclick="showPage('home'); return false;" class="logo-text tracking-tight transition duration-300 mb-4 inline-block">
                        <span class="logo-text-wide text-white">Wide</span><span class="logo-text-broadband">Broadband</span>
                    </a>
                    <p class="text-gray-400 text-sm mb-4">
                        Simplifying your connection to America's fastest internet providers.
                    </p>
                    <p class="text-gray-300 text-sm">
                        <svg class="w-4 h-4 inline mr-2 text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"></path></svg>
                        (888) 808-0237
                    </p>
                    <p class="text-gray-300 text-sm">
                        <svg class="w-4 h-4 inline mr-2 text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                        Open 24/7
                    </p>
                </div>

                <!-- Quick Links -->
                <div>
                    <h4 class="text-lg font-bold mb-4 text-blue-400">Quick Links</h4>
                    <ul class="space-y-2 text-sm">
                        <li><a href="#" onclick="showPage('home'); return false;" class="text-gray-300 hover:text-white transition duration-300">Home</a></li>
                        <li><a href="#" onclick="showPage('providers'); return false;" class="text-gray-300 hover:text-white transition duration-300">Compare Plans</a></li>
                        <li><a href="#" onclick="showPage('reviews'); return false;" class="text-gray-300 hover:text-white transition duration-300">Customer Reviews</a></li>
                        <li><a href="#" onclick="showPage('blog'); return false;" class="text-gray-300 hover:text-white transition duration-300">Blog & Guides</a></li>
                        <li><a href="#" onclick="showPage('support'); return false;" class="text-gray-300 hover:text-white transition duration-300">Support Center</a></li>
                    </ul>
                </div>

                <!-- Legal -->
                <div>
                    <h4 class="text-lg font-bold mb-4 text-blue-400">Legal & Policies</h4>
                    <ul class="space-y-2 text-sm">
                        <li><a href="#" onclick="alert('Privacy Policy Content Placeholder'); return false;" class="text-gray-300 hover:text-white transition duration-300">Privacy Policy</a></li>
                        <li><a href="#" onclick="alert('Terms of Service Content Placeholder'); return false;" class="text-gray-300 hover:text-white transition duration-300">Terms of Service</a></li>
                        <li><a href="#" onclick="alert('Cancellation Policy Content Placeholder'); return false;" class="text-gray-300 hover:text-white transition duration-300">Cancellation Policy</a></li>
                        <li><a href="#" onclick="alert('Affiliate Disclosure Content Placeholder'); return false;" class="text-gray-300 hover:text-white transition duration-300">Affiliate Disclosure</a></li>
                    </ul>
                </div>

                 <!-- Social & Disclaimer -->
                <div class="md:col-span-2">
                    <h4 class="text-lg font-bold mb-4 text-blue-400">Follow Us</h4>
                    <div class="flex space-x-4 mb-6">
                        <a href="#" class="text-gray-300 hover:text-blue-500 transition duration-300" aria-label="Facebook">
                            <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 0c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm3 8h-1.35c-.516 0-.65.236-.65.592v1.408h2l-.316 2h-1.684v7h-3v-7h-2v-2h2v-1.334c0-1.789.972-2.716 3.012-2.716h1.988v3z"/></svg>
                        </a>
                        <a href="#" class="text-gray-300 hover:text-blue-500 transition duration-300" aria-label="Twitter">
                            <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.791-1.574 2.16-2.724-.951.566-2.005.977-3.128 1.188-1.776-1.895-4.482-1.854-6.175.053-1.393 1.549-1.928 3.666-1.291 5.617-4.145-.21-7.818-2.19-10.28-5.267-1.378 2.361-.643 5.337 1.766 6.877-.743-.023-1.442-.23-2.062-.578v.081c0 2.215 1.579 4.072 3.668 4.49-.607.167-1.246.208-1.884.072.585 1.835 2.27 3.176 4.288 3.214-1.57 1.233-3.57 1.956-5.744 1.956-.374 0-.742-.023-1.107-.066 2.053 1.32 4.484 2.093 7.078 2.093 8.484 0 13.136-7.042 13.136-13.136 0-.2-.004-.399-.013-.597.905-.652 1.691-1.474 2.316-2.417z"/></svg>
                        </a>
                        <a href="#" class="text-gray-300 hover:text-blue-500 transition duration-300" aria-label="Instagram">
                            <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 2.163c3.204 0 3.58.013 4.85.07c1.43.082 2.378.342 3.205.748.835.41 1.488 1.053 1.908 1.88.408.825.666 1.77.748 3.2.057 1.27.07 1.646.07 4.85s-.013 3.58-.07 4.85c-.082 1.43-.342 2.378-.748 3.205-.41.835-1.053 1.488-1.88 1.908-.825.408-1.77.666-3.2.748-1.27.057-1.646.07-4.85.07s-3.58-.013-4.85-.07c-1.43-.082-2.378-.342-3.205-.748-.835-.41-1.488-1.053-1.908-1.88-.408-.825-.666-1.77-.748-3.2-.057-1.27-.07-1.646-.07-4.85s.013-3.58.07-4.85c.082-1.43.342-2.378.748-3.205.41-.835 1.053-1.488 1.88-1.908.825-.408 1.77-.666 3.2-.748 1.27-.057 1.646-.07 4.85-.07zm0-2.163c-3.265 0-3.674.015-4.944.072-1.52.087-2.736.386-3.793.896-1.07.52-1.942 1.393-2.46 2.46C.392 5.304.093 6.52.008 8.04s-.008 3.679-.008 4.944c0 3.265.015 3.674.072 4.944.087 1.52.386 2.736.896 3.793 1.07 1.942 1.393 2.46 2.46 2.46.079.006 3.679.006 4.944.006s3.674-.006 4.944-.006c1.52-.006 2.736-.305 3.793-.896 1.07-.52 1.942-1.393 2.46-2.46.52-.896.819-2.112.896-3.793.057-1.27.072-1.679.072-4.944s-.015-3.674-.072-4.944c-.087-1.52-.386-2.736-.896-3.793-1.07-1.942-1.393-2.46-2.46-2.46-.079-.006-3.679-.006-4.944-.006zm0 3.863a6.83 6.83 0 100 13.66 6.83 6.83 0 000-13.66zm0 11.595a4.765 4.765 0 110-9.53 4.765 4.765 0 010 9.53zm9.052-11.458c0 .591-.482 1.073-1.073 1.073s-1.073-.482-1.073-1.073c0-.591.482-1.073 1.073-1.073s1.073.482 1.073 1.073z"/></svg>
                        </a>
                    </div>
                    
                    <p class="text-gray-500 text-xs mt-8">
                        **Affiliate Disclaimer:** Wide Broadband may earn commissions when you sign up for services through our links. We remain provider-independent and strive for transparency and accuracy.
                    </p>
                </div>
            </div>

            <div class="border-t border-gray-800 mt-10 pt-6 text-center">
                <p class="text-gray-500 text-sm">
                    Copyright ¬© <span id="current-year">2023</span> Wide Broadband. All rights reserved.
                </p>
            </div>
        </div>
    </footer>


    <script>
        // --- DATA MOCKUP ---
        // This data simulates fetching plan details and other dynamic content.
        const PROVIDER_DATA = [
            { id: 'spectrum', name: 'Spectrum', color: '#5B48B3', technology: 'Cable/Fiber', promo: 'Free Mobile Line', avg_rating: 4.5, installation_fee: '$49.99' },
            { id: 'att', name: 'AT&T', color: '#00A8E0', technology: 'Fiber/DSL', promo: 'Free HBO Max', avg_rating: 4.7, installation_fee: 'Free' },
            { id: 'xfinity', name: 'Xfinity', color: '#435460', technology: 'Cable', promo: 'Visa Prepaid Card', avg_rating: 4.3, installation_fee: '$39.99' },
            { id: 'verizon', name: 'Verizon', color: '#C40000', technology: 'Fiber (FiOS)', promo: 'Free Router', avg_rating: 4.9, installation_fee: 'Free' },
            { id: 'frontier', name: 'Frontier', color: '#0076a8', technology: 'Fiber/DSL', promo: 'No Contract', avg_rating: 4.2, installation_fee: '$85.00' },
            { id: 'cox', name: 'Cox', color: '#005696', technology: 'Cable', promo: 'First Month Free', avg_rating: 4.0, installation_fee: '$75.00' },
            { id: 'optimum', name: 'Optimum', color: '#6260B5', technology: 'Fiber/Cable', promo: 'Price Lock Guarantee', avg_rating: 4.4, installation_fee: 'Varies' },
            { id: 'tmobile', name: 'T-Mobile Home Internet', color: '#E20074', technology: '5G Wireless', promo: '30-Day Trial', avg_rating: 4.6, installation_fee: 'Free' },
            { id: 'viasat', name: 'Viasat', color: '#0038A8', technology: 'Satellite', promo: 'Best Rural Coverage', avg_rating: 3.8, installation_fee: '$99.00' },
            { id: 'hughesnet', name: 'HughesNet', color: '#9B59B6', technology: 'Satellite', promo: 'Standard Installation', avg_rating: 3.5, installation_fee: '$199.99' },
        ];

        const PLANS_DATA = {
            'Spectrum': [
                { name: 'Standard Internet', speed_dl: '300', speed_ul: '10', price: '25.00', contract: 'No Contract', data_cap: 'None', type: 'Cable' },
                { name: 'Ultra Internet', speed_dl: '500', speed_ul: '20', price: '50.00', contract: '12-Month Promo', data_cap: 'None', type: 'Cable' },
                { name: 'Gig Internet', speed_dl: '1000', speed_ul: '35', price: '70.00', contract: '24-Month Promo', data_cap: 'None', type: 'Fiber/Cable' },
            ],
            'AT&T': [
                { name: 'Internet 300', speed_dl: '300', speed_ul: '300', price: '55.00', contract: '12-Month', data_cap: '1TB', type: 'Fiber' },
                { name: 'Internet 500', speed_dl: '500', speed_ul: '500', price: '65.00', contract: '12-Month', data_cap: '1TB', type: 'Fiber' },
                { name: 'Internet 1000', speed_dl: '1000', speed_ul: '1000', price: '80.00', contract: '12-Month', data_cap: 'None', type: 'Fiber' },
            ],
            'Xfinity': [
                { name: 'Connect', speed_dl: '100', speed_ul: '5', price: '35.00', contract: 'No Contract', data_cap: '1.2TB', type: 'Cable' },
                { name: 'Performance Pro', speed_dl: '600', speed_ul: '15', price: '65.00', contract: '24-Month', data_cap: '1.2TB', type: 'Cable' },
                { name: 'Gigabit', speed_dl: '1200', speed_ul: '35', price: '85.00', contract: '24-Month', data_cap: '1.2TB', type: 'Cable' },
            ],
            'Verizon': [
                 { name: 'Fios 300/300', speed_dl: '300', speed_ul: '300', price: '49.99', contract: 'No Contract', data_cap: 'None', type: 'Fiber (FiOS)' },
                { name: 'Fios 500/500', speed_dl: '500', speed_ul: '500', price: '69.99', contract: 'No Contract', data_cap: 'None', type: 'Fiber (FiOS)' },
                { name: 'Fios Gigabit', speed_dl: '940', speed_ul: '880', price: '89.99', contract: 'No Contract', data_cap: 'None', type: 'Fiber (FiOS)' },
            ],
            'Frontier': [
                { name: 'Internet 50', speed_dl: '50', speed_ul: '5', price: '49.99', contract: 'No Contract', data_cap: 'None', type: 'DSL' },
                { name: 'Fiber 500', speed_dl: '500', speed_ul: '500', price: '59.99', contract: 'No Contract', data_cap: 'None', type: 'Fiber' },
                { name: 'Fiber 1000', speed_dl: '1000', speed_ul: '1000', price: '74.99', contract: 'No Contract', data_cap: 'None', type: 'Fiber' },
            ],
            'Cox': [
                { name: 'Essential 100', speed_dl: '100', speed_ul: '5', price: '49.99', contract: 'No Contract', data_cap: '1.25TB', type: 'Cable' },
                { name: 'Preferred 500', speed_dl: '500', speed_ul: '10', price: '69.99', contract: '12-Month', data_cap: '1.25TB', type: 'Cable' },
                { name: 'Gigablast', speed_dl: '1000', speed_ul: '35', price: '99.99', contract: '12-Month', data_cap: '1.25TB', type: 'Cable' },
            ],
            'Optimum': [
                { name: 'Optimum 300', speed_dl: '300', speed_ul: '20', price: '40.00', contract: 'No Contract', data_cap: 'None', type: 'Cable' },
                { name: 'Optimum 500', speed_dl: '500', speed_ul: '35', price: '60.00', contract: 'No Contract', data_cap: 'None', type: 'Cable' },
                { name: 'Optimum 1000', speed_dl: '940', speed_ul: '50', price: '80.00', contract: 'No Contract', data_cap: 'None', type: 'Fiber/Cable' },
            ],
            'T-Mobile Home Internet': [
                { name: 'Home Internet', speed_dl: '70-245', speed_ul: '20-50', price: '50.00', contract: 'No Contract', data_cap: 'None', type: '5G Wireless' },
            ],
            'Viasat': [
                { name: 'Unlimited Silver 25', speed_dl: '25', speed_ul: '3', price: '99.99', contract: '24-Month', data_cap: '150GB Priority', type: 'Satellite' },
                { name: 'Unlimited Gold 50', speed_dl: '50', speed_ul: '5', price: '149.99', contract: '24-Month', data_cap: '300GB Priority', type: 'Satellite' },
            ],
            'HughesNet': [
                { name: 'Plan 50 GB', speed_dl: '25', speed_ul: '3', price: '89.99', contract: '24-Month', data_cap: '50GB', type: 'Satellite' },
            ],
        };
        
        const REVIEWS_DATA = [
            { stars: 5, quote: "Switched to a Spectrum Fiber plan and the speed is incredible! Never a dropped stream, even with two teenagers gaming.", name: "Sarah M.", provider: "Spectrum", city: "Charlotte", state: "NC" },
            { stars: 4, quote: "AT&T's pricing was the best for the gig speed. Installation was fast and the free HBO Max was a nice bonus.", name: "James K.", provider: "AT&T", city: "Dallas", state: "TX" },
            { stars: 5, quote: "Frontier Fiber came to my neighborhood, and the symmetric speeds changed everything for my home office. Excellent value.", name: "Linda P.", provider: "Frontier", city: "Tampa", state: "FL" },
            { stars: 4, quote: "Xfinity had the best coverage in my area. The mobile plan is great too‚ÄîI love the unlimited data.", name: "Alex R.", provider: "Xfinity", city: "Denver", state: "CO" },
            { stars: 5, quote: "Verizon FiOS is unbeatable. I've had zero outages in two years. This site made comparing them easy.", name: "Omar H.", provider: "Verizon", city: "New York", state: "NY" },
            { stars: 3, quote: "Satellite is my only option, and Viasat gets the job done. Speeds are acceptable, but data caps are a pain.", name: "Brenda T.", provider: "Viasat", city: "Rural", state: "WA" },
            { stars: 5, quote: "Cox offered the best deal on a TV and Internet bundle. The process was quick and the tech was friendly.", name: "Maria L.", provider: "Cox", city: "Phoenix", state: "AZ" },
            { stars: 4, quote: "T-Mobile Home Internet was surprisingly fast for a wireless connection. Perfect for apartment living.", name: "David C.", provider: "T-Mobile HI", city: "Austin", state: "TX" },
        ];

        const BLOG_DATA = [
            {
                title: "Fiber vs. Cable: Which Connection is Right for Gaming and Streaming?",
                excerpt: "Fiber optic internet offers symmetric speeds and superior reliability over traditional coaxial cable. Find out which one fits your digital demands.",
                image: "https://placehold.co/400x250/3b82f6/ffffff?text=FIBER+VS+CABLE",
                keywords: ["Fiber", "Cable", "Gaming", "Streaming"]
            },
            {
                title: "Understanding Free Mobile Lines: A Hidden Gem in Your Internet Plan",
                excerpt: "Many top providers like Spectrum and Xfinity offer free or deeply discounted mobile lines when you bundle internet. We break down the offers.",
                image: "https://placehold.co/400x250/059669/ffffff?text=FREE+MOBILE+LINE",
                keywords: ["Mobile", "Bundle", "Savings"]
            },
            {
                title: "5 Ways to Instantly Boost Your Home Wi-Fi Speed",
                excerpt: "Simple tips and tricks, from router placement to channel optimization, that can dramatically improve your Wi-Fi performance without changing your plan.",
                image: "https://placehold.co/400x250/9d46ff/ffffff?text=WIFI+TIPS",
                keywords: ["Wi-Fi", "Router", "Performance"]
            }
        ];

        // --- GLOBAL STATE AND UTILITIES ---

        let countdownInterval;
        let speedTestInterval;
        let speedTestTimeout;
        const COMPARISON_PLANS = []; // State for compare modal

        /**
         * Clears all page sections and shows the requested one.
         * @param {string} pageId - The ID of the section to show (e.g., 'home', 'providers').
         */
        function showPage(pageId) {
            try {
                // Remove hidden class from all sections
                document.querySelectorAll('.page-section').forEach(section => {
                    section.style.display = 'none';
                    section.classList.remove('active-page');
                });

                // Show the requested section
                const targetPage = document.getElementById(pageId);
                if (targetPage) {
                    targetPage.style.display = 'block';
                    targetPage.classList.add('active-page');
                } else {
                    console.error('Page ID not found:', pageId);
                }
                // Scroll to top of the main content area
                document.getElementById('main-container').scrollIntoView({ behavior: 'smooth', block: 'start' });
            } catch (error) {
                console.error("Error in showPage:", error);
            }
        }

        /**
         * Shows a modal overlay.
         * @param {string} modalId - The ID of the modal element.
         */
        function showModal(modalId) {
            try {
                const modal = document.getElementById(modalId);
                if (modal) {
                    modal.style.display = 'flex';
                    // Prevent body scrolling
                    document.body.classList.add('overflow-hidden');
                }
            } catch (error) {
                console.error("Error showing modal:", error);
            }
        }

        /**
         * Hides a modal overlay.
         * @param {string} modalId - The ID of the modal element.
         */
        function hideModal(modalId) {
            try {
                const modal = document.getElementById(modalId);
                if (modal) {
                    modal.style.display = 'none';
                    // Restore body scrolling
                    document.body.classList.remove('overflow-hidden');
                }
            } catch (error) {
                console.error("Error hiding modal:", error);
            }
        }

        /**
         * Handles the ZIP code search flow (Loading, Delay, Redirect).
         * @param {string} zip - The 5-digit ZIP code entered.
         */
        function handleZipSearch(zip) {
            try {
                const zipCode = (zip || '').trim();
                if (!/^\d{5}$/.test(zipCode)) {
                    alert('Please enter a valid 5-digit ZIP code.');
                    return;
                }

                const loadingScreen = document.getElementById('loading-screen');
                const loadingStatus = document.getElementById('speed-test-status');

                // 1. Show aesthetic loading screen
                loadingScreen.style.display = 'flex';
                loadingScreen.style.pointerEvents = 'auto'; // Ensure it intercepts clicks during load
                if (loadingStatus) loadingStatus.textContent = 'Searching for providers in ' + zipCode + '...';
                document.body.classList.add('overflow-hidden');

                // 2. Simulate network delay
                setTimeout(() => {
                    // 3. Update loading text
                    if (loadingStatus) loadingStatus.textContent = 'Finding the best plans near you...';

                    // 4. Simulate a longer wait (Total 2.5s)
                    setTimeout(() => {
                        // 5. Hide loading screen and transition to results
                        loadingScreen.style.display = 'none';
                        loadingScreen.style.pointerEvents = 'none'; // Essential fix for the "stuck" issue
                        document.body.classList.remove('overflow-hidden');
                        
                        // Render data on the search results page before showing it
                        renderSearchResults(zipCode);
                        showPage('search-results-page');

                    }, 1500); // Wait 1.5s more
                }, 1000); // Initial 1s wait
            } catch (error) {
                 console.error("Error in handleZipSearch:", error);
            }
        }

        /**
         * Dynamically renders a star rating visual.
         * @param {number} rating - The star rating (e.g., 4.5).
         */
        function renderStars(rating) {
            const fullStars = Math.floor(rating);
            const halfStar = rating % 1 !== 0;
            let starsHtml = '';

            for (let i = 0; i < fullStars; i++) {
                starsHtml += '‚≠ê'; // Full star
            }
            if (halfStar) {
                starsHtml += 'üåü'; // Half star (using a different emoji for visual distinction)
            }
            for (let i = starsHtml.length; i < 5; i++) {
                starsHtml += '‚òÜ'; // Empty star placeholder
            }
            return starsHtml;
        }

        /**
         * Renders the provider cards for the home page spotlight.
         */
        function renderHomeProviders() {
            try {
                const container = document.getElementById('home-provider-cards');
                if (!container) return; // Safety check

                const topProviders = PROVIDER_DATA.filter(p => ['Spectrum', 'AT&T', 'Xfinity'].includes(p.name));
                let html = '';

                topProviders.forEach(p => {
                    const samplePlan = PLANS_DATA[p.name] ? PLANS_DATA[p.name][0] : null;

                    html += `
                        <div class="p-8 bg-white rounded-2xl shadow-xl hover:shadow-2xl transition duration-300 transform hover:scale-[1.02] border-t-4 border-${p.color.replace('#', '')}">
                            <div class="flex justify-between items-start mb-4">
                                <span class="provider-logo-text logo-${p.id} text-2xl font-extrabold">${p.name}</span>
                                <div class="text-sm font-medium text-gray-700">
                                    ${renderStars(p.avg_rating)}
                                </div>
                            </div>
                            
                            ${samplePlan ? `
                                <h3 class="text-3xl font-bold text-gray-900 mb-1">
                                    $${samplePlan.price}
                                    <span class="text-base font-normal text-gray-500">/mo. starting</span>
                                </h3>
                                <p class="text-sm text-gray-600 mb-6">First year promotional price.</p>

                                <div class="space-y-2 mb-6">
                                    <div class="flex items-center text-gray-700">
                                        <svg class="w-5 h-5 mr-3 text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg>
                                        <span class="font-bold">${samplePlan.speed_dl} Mbps</span> Download
                                    </div>
                                    <div class="flex items-center text-gray-700">
                                        <svg class="w-5 h-5 mr-3 text-purple-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"></path></svg>
                                        ${p.technology} Connection
                                    </div>
                                </div>
                            ` : '<p class="text-red-500">No plan data available.</p>'}

                            <button onclick="showPage('providers')" class="w-full gradient-accent text-white font-bold px-4 py-3 rounded-full shadow-lg transition duration-300 transform hover:scale-[1.01]">
                                View Packages
                            </button>
                        </div>
                    `;
                });
                container.innerHTML = html;
            } catch (error) {
                console.error("Error in renderHomeProviders:", error);
            }
        }

        /**
         * Renders the complete, detailed comparison table for the Providers page.
         */
        function renderPlanComparisonTable(targetId = 'all-providers-comparison-table-container') {
            try {
                const container = document.getElementById(targetId);
                if (!container) return; // Safety check

                let html = `
                    <div class="overflow-x-auto bg-white rounded-xl shadow-2xl border border-gray-200">
                        <table class="min-w-full divide-y divide-gray-200">
                            <thead class="bg-blue-50 sticky top-0 z-10">
                                <tr>
                                    <th class="px-6 py-4 text-left text-sm font-extrabold text-blue-800 uppercase tracking-wider">Provider / Plan</th>
                                    <th class="px-6 py-4 text-left text-sm font-extrabold text-blue-800 uppercase tracking-wider">Speed (DL/UL)</th>
                                    <th class="px-6 py-4 text-left text-sm font-extrabold text-blue-800 uppercase tracking-wider">Starting Price</th>
                                    <th class="px-6 py-4 text-left text-sm font-extrabold text-blue-800 uppercase tracking-wider">Type / Data</th>
                                    <th class="px-6 py-4 text-left text-sm font-extrabold text-blue-800 uppercase tracking-wider">Details</th>
                                    <th class="px-6 py-4 text-left text-sm font-extrabold text-blue-800 uppercase tracking-wider">Action</th>
                                </tr>
                            </thead>
                            <tbody class="bg-white divide-y divide-gray-100">
                `;

                PROVIDER_DATA.forEach(provider => {
                    const plans = PLANS_DATA[provider.name] || [];

                    plans.forEach((plan, index) => {
                        const isFirstPlan = index === 0;

                        html += `
                            <tr class="hover:bg-gray-50 transition duration-150">
                                <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">
                                    ${isFirstPlan ? `<div class="provider-logo-text logo-${provider.id} text-base font-extrabold mb-1">${provider.name}</div>` : ''}
                                    <span class="${isFirstPlan ? 'font-semibold' : 'font-normal'}">${plan.name}</span>
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700 font-medium">
                                    <span class="text-blue-700">${plan.speed_dl}</span> / ${plan.speed_ul} <span class="text-xs text-gray-500">Mbps</span>
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap text-base font-extrabold text-green-600">
                                    $${plan.price}
                                    <span class="text-sm font-normal text-gray-500">/mo.</span>
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700">
                                    <span class="font-semibold">${plan.type}</span><br>
                                    <span class="text-xs text-gray-500">${plan.data_cap ? 'Cap: ' + plan.data_cap : 'No Data Cap'}</span>
                                </td>
                                <td class="px-6 py-4 text-xs text-gray-600">
                                    Contract: <span class="font-medium">${plan.contract}</span><br>
                                    Install: <span class="font-medium">${provider.installation_fee}</span>
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-y-2">
                                    <button onclick="startOrder('${provider.name}', '${plan.name}')" class="cta-primary text-white text-xs px-3 py-1.5 rounded-full shadow-md hover:shadow-lg transition duration-300 w-full md:w-auto">
                                        Order Now
                                    </button>
                                    <button onclick="addToComparison('${provider.name}', '${plan.name}', ${plan.speed_dl}, ${plan.price}, '${plan.type}')" class="bg-gray-200 text-gray-800 text-xs px-3 py-1.5 rounded-full hover:bg-gray-300 transition duration-300 w-full md:w-auto">
                                        Compare
                                    </button>
                                </td>
                            </tr>
                        `;
                    });
                });

                html += `
                            </tbody>
                        </table>
                    </div>
                `;
                container.innerHTML = html;
            } catch (error) {
                console.error("Error in renderPlanComparisonTable:", error);
            }
        }

        /**
         * Renders the search results page after ZIP code entry.
         * @param {string} zipCode - The ZIP code used for the mock search.
         */
        function renderSearchResults(zipCode) {
             try {
                // Update the header with the mock ZIP code
                const header = document.querySelector('#search-results-page h1');
                if (header) header.textContent = `Available Plans in ${zipCode}`;

                const container = document.getElementById('plan-comparison-table-container');
                if (!container) return; // Safety check

                // Mock search results (using a subset of top providers)
                const mockResultProviders = PROVIDER_DATA.filter(p => ['Spectrum', 'AT&T', 'Xfinity', 'Verizon'].includes(p.name));

                let html = `
                    <div class="overflow-x-auto bg-white rounded-xl shadow-2xl border border-gray-200">
                        <table class="min-w-full divide-y divide-gray-200">
                            <thead class="bg-blue-50 sticky top-0 z-10">
                                <tr>
                                    <th class="px-6 py-4 text-left text-sm font-extrabold text-blue-800 uppercase tracking-wider">Provider / Plan</th>
                                    <th class="px-6 py-4 text-left text-sm font-extrabold text-blue-800 uppercase tracking-wider">Speed (DL/UL)</th>
                                    <th class="px-6 py-4 text-left text-sm font-extrabold text-blue-800 uppercase tracking-wider">Starting Price</th>
                                    <th class="px-6 py-4 text-left text-sm font-extrabold text-blue-800 uppercase tracking-wider">Type / Data</th>
                                    <th class="px-6 py-4 text-left text-sm font-extrabold text-blue-800 uppercase tracking-wider">Action</th>
                                </tr>
                            </thead>
                            <tbody class="bg-white divide-y divide-gray-100">
                `;

                mockResultProviders.forEach(provider => {
                    const plans = PLANS_DATA[provider.name] || [];

                    plans.forEach((plan, index) => {
                        const isFirstPlan = index === 0;

                        html += `
                            <tr class="hover:bg-gray-50 transition duration-150">
                                <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">
                                    ${isFirstPlan ? `<div class="provider-logo-text logo-${provider.id} text-base font-extrabold mb-1">${provider.name}</div>` : ''}
                                    <span class="${isFirstPlan ? 'font-semibold' : 'font-normal'}">${plan.name}</span>
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700 font-medium">
                                    <span class="text-blue-700">${plan.speed_dl}</span> / ${plan.speed_ul} <span class="text-xs text-gray-500">Mbps</span>
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap text-base font-extrabold text-green-600">
                                    $${plan.price}
                                    <span class="text-sm font-normal text-gray-500">/mo.</span>
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700">
                                    <span class="font-semibold">${plan.type}</span><br>
                                    <span class="text-xs text-gray-500">${plan.data_cap ? 'Cap: ' + plan.data_cap : 'No Data Cap'}</span>
                                </td>
                                <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-y-2">
                                    <button onclick="startOrder('${provider.name}', '${plan.name}')" class="cta-primary text-white text-xs px-3 py-1.5 rounded-full shadow-md hover:shadow-lg transition duration-300 w-full md:w-auto">
                                        Book Now
                                    </button>
                                </td>
                            </tr>
                        `;
                    });
                });

                html += `
                            </tbody>
                        </table>
                    </div>
                    <div class="mt-10 flex flex-col sm:flex-row justify-center space-y-4 sm:space-y-0 sm:space-x-6">
                        <a href="tel:8888080237" class="bg-blue-100 text-blue-700 font-bold px-8 py-3 rounded-full hover:bg-blue-200 transition duration-300 text-center shadow-lg">
                             Call Now (888) 808-0237
                        </a>
                         <button onclick="alert('Live Chat Placeholder: An agent is ready to assist you!'); return false;" class="bg-gray-200 text-gray-700 font-bold px-8 py-3 rounded-full hover:bg-gray-300 transition duration-300 shadow-lg">
                            Live Chat Support
                        </button>
                    </div>
                `;
                container.innerHTML = html;
            } catch (error) {
                console.error("Error in renderSearchResults:", error);
            }
        }

        /**
         * Renders the customer review sections.
         */
        function renderReviews() {
            try {
                // Home Page Grid
                const homeContainer = document.getElementById('home-reviews-grid');
                if (homeContainer) {
                    homeContainer.innerHTML = REVIEWS_DATA.slice(0, 3).map(r => `
                        <div class="p-6 bg-gray-50 rounded-xl shadow-lg border-t-4 border-blue-400">
                            <div class="text-xl mb-3">${renderStars(r.stars)}</div>
                            <p class="text-gray-700 italic mb-4">"${r.quote}"</p>
                            <p class="font-semibold text-sm text-gray-800">‚Äî ${r.name} (${r.provider})</p>
                            <span class="text-xs text-blue-500 font-medium">Verified Customer in ${r.city}, ${r.state}</span>
                        </div>
                    `).join('');
                }

                // Full Reviews Page List
                const fullContainer = document.getElementById('full-reviews-list');
                if (fullContainer) {
                    fullContainer.innerHTML = REVIEWS_DATA.map(r => `
                        <div class="p-6 bg-white rounded-xl shadow-lg border-l-4 border-blue-600">
                            <div class="flex justify-between items-center mb-2">
                                <div class="text-lg font-bold text-blue-800">${r.name} from ${r.city}, ${r.state}</div>
                                <div class="text-sm font-medium text-gray-700">
                                    ${renderStars(r.stars)}
                                </div>
                            </div>
                            <p class="text-gray-700 italic mb-3">"${r.quote}"</p>
                            <span class="text-xs text-gray-500 font-medium">Provider: ${r.provider} | <span class="text-green-600">Verified Customer</span></span>
                        </div>
                    `).join('');
                }
            } catch (error) {
                console.error("Error in renderReviews:", error);
            }
        }

        /**
         * Renders blog article listings.
         */
        function renderBlog() {
             try {
                // Home Page Highlights
                const homeContainer = document.getElementById('blog-highlights-grid');
                if (homeContainer) {
                    homeContainer.innerHTML = BLOG_DATA.map(a => `
                        <div class="bg-white rounded-xl shadow-lg hover:shadow-xl transition duration-300 transform hover:scale-[1.02] overflow-hidden">
                            <img src="${a.image}" alt="${a.title} thumbnail" class="w-full h-40 object-cover" loading="lazy">
                            <div class="p-6">
                                <h3 class="text-xl font-bold text-gray-900 mb-2">${a.title}</h3>
                                <p class="text-gray-600 text-sm mb-4">${a.excerpt}</p>
                                <button onclick="alert('Viewing article: ${a.title}'); return false;" class="text-blue-600 font-bold text-sm hover:underline">Read More &rarr;</button>
                            </div>
                        </div>
                    `).join('');
                }

                // Full Blog Page
                const fullContainer = document.getElementById('full-blog-list');
                if (fullContainer) {
                    fullContainer.innerHTML = BLOG_DATA.map(a => `
                        <article class="bg-white p-6 rounded-2xl shadow-xl border-l-4 border-blue-600">
                             <img src="${a.image}" alt="${a.title} featured image" class="float-right ml-6 mb-4 w-full md:w-1/3 h-48 object-cover rounded-lg shadow-md" loading="lazy">
                            <h2 class="text-3xl font-extrabold text-gray-900 mb-3">${a.title}</h2>
                            <div class="space-x-2 mb-4">
                                ${a.keywords.map(k => `<span class="text-xs font-semibold bg-gray-200 text-gray-700 px-3 py-1 rounded-full">${k}</span>`).join('')}
                            </div>
                            <p class="text-lg text-gray-700 leading-relaxed mb-6">${a.excerpt}</p>
                            <p class="text-gray-700 leading-relaxed">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
                             <button onclick="alert('Viewing article: ${a.title}'); return false;" class="text-blue-600 font-bold text-lg mt-4 inline-block hover:underline">Read Full Article &rarr;</button>
                        </article>
                    `).join('');
                }
             } catch (error) {
                console.error("Error in renderBlog:", error);
            }
        }

        /**
         * Start the order process by pre-filling Step 2/3 of the order form.
         * @param {string} providerName
         * @param {string} planName
         */
        function startOrder(providerName, planName) {
            try {
                document.getElementById('order-provider').value = providerName;
                document.getElementById('order-plan').innerHTML = `<option value="${planName}" selected>${planName}</option>`;
                
                // Jump to Step 4 (or 1 if no contact info)
                const orderZip = document.getElementById('order-zip').value;
                if (orderZip && /^\d{5}$/.test(orderZip)) {
                    nextStep(4);
                } else {
                    nextStep(1);
                }
                
                showPage('order-form');
            } catch (error) {
                console.error("Error in startOrder:", error);
            }
        }

        // --- ORDER FORM LOGIC ---

        const ORDER_STEPS = 4;

        function nextStep(step) {
            try {
                // Validation (simple)
                if (step > 1) {
                    const currentStep = step - 1;
                    let isValid = true;

                    if (currentStep === 1) {
                        if (!document.getElementById('order-name').value || !document.getElementById('order-zip').value || !document.getElementById('order-email').value) {
                            alert('Please complete all contact fields.');
                            isValid = false;
                        }
                    } else if (currentStep === 2) {
                        if (!document.getElementById('order-provider').value) {
                            alert('Please select a provider.');
                            isValid = false;
                        }
                    } else if (currentStep === 3) {
                        if (!document.getElementById('order-plan').value) {
                            alert('Please select a plan.');
                            isValid = false;
                        }
                    }

                    if (!isValid && step !== 4) return;
                }

                // Hide all steps
                for (let i = 1; i <= ORDER_STEPS; i++) {
                    document.getElementById(`step-${i}`).classList.add('hidden');
                    document.getElementById(`step-${i}-indicator`).classList.remove('bg-blue-600', 'text-white', 'bg-green-500');
                    document.getElementById(`step-${i}-indicator`).classList.add('bg-gray-300', 'text-gray-500');
                }

                // Show target step
                const targetStepElement = document.getElementById(`step-${step}`);
                const targetIndicatorElement = document.getElementById(`step-${step}-indicator`);
                
                if (targetStepElement) {
                    targetStepElement.classList.remove('hidden');
                }
                if (targetIndicatorElement) {
                    targetIndicatorElement.classList.remove('bg-gray-300', 'text-gray-500');
                    targetIndicatorElement.classList.add('bg-blue-600', 'text-white');
                }
                
                // Mark previous steps complete (green)
                for (let i = 1; i < step; i++) {
                    const indicator = document.getElementById(`step-${i}-indicator`);
                    if (indicator) {
                        indicator.classList.remove('bg-blue-600');
                        indicator.classList.add('bg-green-500');
                    }
                }
                
                // Update summary for Step 4
                if (step === 4) {
                    document.getElementById('summary-provider').textContent = document.getElementById('order-provider').value;
                    document.getElementById('summary-plan').textContent = document.getElementById('order-plan').value;
                    document.getElementById('summary-zip').textContent = document.getElementById('order-zip').value;
                }
            } catch (error) {
                console.error("Error in nextStep:", error);
            }
        }

        function updatePlanOptions(providerName) {
            try {
                const planSelect = document.getElementById('order-plan');
                const nextBtn = document.getElementById('step-3-next-btn');
                const plans = PLANS_DATA[providerName] || [];

                planSelect.innerHTML = '<option value="">-- Choose a plan from the selected provider --</option>';

                if (plans.length > 0) {
                    plans.forEach(plan => {
                        const option = document.createElement('option');
                        option.value = plan.name;
                        option.textContent = `${plan.name} ($${plan.price}/mo, ${plan.speed_dl} Mbps)`;
                        planSelect.appendChild(option);
                    });
                    nextBtn.disabled = planSelect.value === "";
                } else {
                    nextBtn.disabled = true;
                }
                
                // Enable Step 3 button once provider is selected
                document.getElementById('step-2-next-btn').disabled = !providerName;
                
                // Re-check Step 3 button state
                planSelect.onchange = () => {
                    nextBtn.disabled = planSelect.value === "";
                };

            } catch (error) {
                console.error("Error in updatePlanOptions:", error);
            }
        }

        function handleOrderForm(event) {
            event.preventDefault();
            try {
                if (!document.getElementById('order-terms').checked) {
                    alert('You must agree to the Terms of Service to place an order.');
                    return;
                }

                // *** REAL-WORLD DATA SUBMISSION LOGIC WOULD GO HERE ***
                const orderData = {
                    name: document.getElementById('order-name').value,
                    email: document.getElementById('order-email').value,
                    phone: document.getElementById('order-phone').value,
                    zip: document.getElementById('order-zip').value,
                    provider: document.getElementById('order-provider').value,
                    plan: document.getElementById('order-plan').value,
                    timestamp: new Date().toISOString()
                };
                console.log("Order Submitted (Mock):", orderData);
                // ******************************************************

                // Redirect to Thank You Page
                showPage('thank-you-page');
            } catch (error) {
                console.error("Error in handleOrderForm:", error);
            }
        }

        // --- OTHER FORM HANDLERS ---

        function handleContactForm(event) {
            event.preventDefault();
            try {
                // Simulate success
                document.getElementById('contact-message').classList.remove('hidden');
                document.getElementById('contact-form').reset();
                setTimeout(() => {
                    document.getElementById('contact-message').classList.add('hidden');
                }, 5000);
            } catch (error) {
                console.error("Error in handleContactForm:", error);
            }
        }
        
        function handleCallbackRequest(event) {
            event.preventDefault();
            try {
                 // Simulate success
                document.getElementById('callback-message').classList.remove('hidden');
                document.getElementById('contact-form').reset();
                setTimeout(() => {
                    hideModal('callback-modal');
                    document.getElementById('callback-message').classList.add('hidden');
                }, 3000);
            } catch (error) {
                 console.error("Error in handleCallbackRequest:", error);
            }
        }

        // --- SPEED TEST SIMULATION LOGIC ---

        function resetSpeedTest(isModal = false) {
            try {
                const suffix = isModal ? '-modal' : '';
                
                document.getElementById(`speed-test-status${suffix}`).textContent = 'Ready to check your connection...';
                document.getElementById(`download-speed${suffix}`).textContent = '0.0';
                document.getElementById(`latency-result${suffix}`).textContent = '--';
                document.getElementById(`download-result${suffix}`).textContent = '--';
                document.getElementById(`upload-result${suffix}`).textContent = '--';
                document.getElementById(`speed-gauge${suffix}`).style.transform = 'rotate(45deg)';
                document.getElementById(`start-speed-test${suffix}`).textContent = 'Start Speed Test';
                document.getElementById(`start-speed-test${suffix}`).onclick = () => startSpeedTest(isModal);
            } catch (error) {
                console.error("Error in resetSpeedTest:", error);
            }
        }

        function updateGauge(gaugeId, speed) {
            try {
                const maxSpeed = 1000; // Assuming 1 Gbps max for gauge range
                const rotation = Math.min(135 + (speed / maxSpeed) * 270, 405); // Map 0-1000 Mbps to 45deg to 405deg
                document.getElementById(gaugeId).style.transform = `rotate(${rotation}deg)`;
            } catch (error) {
                console.error("Error in updateGauge:", error);
            }
        }
        
        function startSpeedTest(isModal = false) {
            try {
                const suffix = isModal ? '-modal' : '';
                
                // Disable button and set to running state
                const startBtn = document.getElementById(`start-speed-test${suffix}`);
                startBtn.textContent = 'Running...';
                startBtn.onclick = null;
                startBtn.disabled = true;

                const statusEl = document.getElementById(`speed-test-status${suffix}`);
                const dlSpeedEl = document.getElementById(`download-speed${suffix}`);
                const latencyEl = document.getElementById(`latency-result${suffix}`);
                const dlResultEl = document.getElementById(`download-result${suffix}`);
                const ulResultEl = document.getElementById(`upload-result${suffix}`);
                const gaugeId = `speed-gauge${suffix}`;

                // Clear any previous timers
                if (speedTestInterval) clearInterval(speedTestInterval);
                if (speedTestTimeout) clearTimeout(speedTestTimeout);

                // --- Phase 1: Latency/Ping (1.5 seconds) ---
                statusEl.textContent = 'Testing latency...';
                setTimeout(() => {
                    latencyEl.textContent = '12 ms';
                }, 500);
                
                // --- Phase 2: Download (3 seconds) ---
                const targetDl = Math.floor(Math.random() * (750 - 150 + 1)) + 150; // 150 to 750 Mbps
                let currentDl = 0;
                
                speedTestTimeout = setTimeout(() => {
                    statusEl.textContent = 'Testing download speed...';
                    
                    speedTestInterval = setInterval(() => {
                        if (currentDl < targetDl) {
                            currentDl += Math.floor(Math.random() * (50 - 5 + 1)) + 5; // Increment by 5-50 Mbps
                            currentDl = Math.min(currentDl, targetDl);

                            dlSpeedEl.textContent = currentDl.toFixed(1);
                            updateGauge(gaugeId, currentDl);
                        } else {
                            clearInterval(speedTestInterval);
                            dlResultEl.textContent = targetDl.toFixed(1);
                            
                            // --- Phase 3: Upload (2 seconds) ---
                            statusEl.textContent = 'Testing upload speed...';
                            const targetUl = Math.floor(targetDl / 10); // Upload speed is 1/10th of download
                            let currentUl = 0;
                            
                            speedTestInterval = setInterval(() => {
                                if (currentUl < targetUl) {
                                    currentUl += Math.floor(Math.random() * (5 - 1 + 1)) + 1; // Increment by 1-5 Mbps
                                    currentUl = Math.min(currentUl, targetUl);
                                    
                                    ulResultEl.textContent = currentUl.toFixed(1);
                                } else {
                                    clearInterval(speedTestInterval);
                                    
                                    // --- Phase 4: Complete ---
                                    statusEl.textContent = 'Test Complete! Results Below.';
                                    startBtn.textContent = 'Rerun Test';
                                    startBtn.disabled = false;
                                    startBtn.onclick = () => startSpeedTest(isModal);
                                    dlSpeedEl.textContent = dlResultEl.textContent; // Final display is download
                                    updateGauge(gaugeId, targetDl);
                                }
                            }, 200); // Upload interval
                        }
                    }, 50); // Download interval
                }, 1500); // Start Download after 1.5s latency check
            } catch (error) {
                console.error("Error in startSpeedTest:", error);
                const suffix = isModal ? '-modal' : '';
                document.getElementById(`speed-test-status${suffix}`).textContent = 'Test Failed (Simulation Error)';
                document.getElementById(`start-speed-test${suffix}`).textContent = 'Retry Test';
                document.getElementById(`start-speed-test${suffix}`).disabled = false;
            }
        }

        // --- COMPARISON TOOL LOGIC ---

        function addToComparison(provider, plan, speed, price, type) {
            try {
                const planId = `${provider}-${plan}`;
                
                if (COMPARISON_PLANS.length >= 3) {
                    alert('You can compare a maximum of 3 plans. Clear an existing plan to add this one.');
                    return;
                }
                
                if (COMPARISON_PLANS.some(p => p.id === planId)) {
                    alert('This plan is already in your comparison list.');
                    return;
                }

                COMPARISON_PLANS.push({
                    id: planId,
                    provider,
                    plan,
                    speed,
                    price,
                    type
                });

                renderComparisonModal();
                showModal('compare-modal');
            } catch (error) {
                console.error("Error in addToComparison:", error);
            }
        }

        function removeFromComparison(planId) {
            try {
                const index = COMPARISON_PLANS.findIndex(p => p.id === planId);
                if (index > -1) {
                    COMPARISON_PLANS.splice(index, 1);
                    renderComparisonModal();
                }
            } catch (error) {
                console.error("Error in removeFromComparison:", error);
            }
        }

        function clearComparison() {
            try {
                COMPARISON_PLANS.length = 0; // Clear the array
                renderComparisonModal();
            } catch (error) {
                console.error("Error in clearComparison:", error);
            }
        }

        function renderComparisonModal() {
            try {
                const container = document.getElementById('comparison-display');
                if (!container) return;

                if (COMPARISON_PLANS.length === 0) {
                    container.innerHTML = '<p class="text-center text-gray-500 py-8">Add up to three plans to compare them side-by-side.</p>';
                    return;
                }

                const plansHtml = COMPARISON_PLANS.map(p => {
                    const provider = PROVIDER_DATA.find(pd => pd.name === p.provider);
                    const planDetails = PLANS_DATA[p.provider].find(pd => pd.name === p.plan) || {};

                    return `
                        <div class="flex flex-col p-4 bg-gray-50 rounded-lg shadow-inner border border-gray-200">
                            <h4 class="text-lg font-bold text-gray-900 mb-1">${p.plan}</h4>
                            <span class="text-sm font-semibold text-blue-700 mb-3">${p.provider}</span>
                            
                            <div class="text-3xl font-extrabold text-green-600 mb-4">$${p.price}</div>
                            
                            <ul class="text-sm space-y-2 flex-grow">
                                <li class="flex items-center"><svg class="w-4 h-4 mr-2 text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg> DL: ${p.speed} Mbps</li>
                                <li class="flex items-center"><svg class="w-4 h-4 mr-2 text-purple-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"></path></svg> Type: ${p.type}</li>
                                <li class="text-xs text-gray-500">Contract: ${planDetails.contract || 'N/A'}</li>
                                <li class="text-xs text-gray-500">Install: ${provider.installation_fee}</li>
                            </ul>

                            <button onclick="removeFromComparison('${p.id}')" class="mt-4 bg-red-100 text-red-600 text-xs px-3 py-1.5 rounded-full hover:bg-red-200 transition duration-300">Remove</button>
                            <button onclick="startOrder('${p.provider}', '${p.plan}')" class="mt-2 cta-primary text-white text-sm px-3 py-1.5 rounded-full shadow-md hover:shadow-lg transition duration-300">Order Now</button>
                        </div>
                    `;
                }).join('');

                container.innerHTML = `
                    <div class="grid grid-cols-1 md:grid-cols-${Math.max(2, COMPARISON_PLANS.length)} gap-6">
                        ${plansHtml}
                    </div>
                `;

            } catch (error) {
                console.error("Error in renderComparisonModal:", error);
            }
        }

        // --- COUNTDOWN TIMER LOGIC ---

        function startCountdown() {
            try {
                // Set the expiration time to 1 hour from now (in milliseconds)
                const expirationTime = Date.now() + 60 * 60 * 1000;
                const timerElement = document.getElementById('countdown-timer-header');

                if (!timerElement) return;

                countdownInterval = setInterval(() => {
                    const now = Date.now();
                    const timeLeft = expirationTime - now;

                    if (timeLeft <= 0) {
                        clearInterval(countdownInterval);
                        timerElement.textContent = 'Offer Ended';
                        return;
                    }

                    const hours = Math.floor((timeLeft % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                    const minutes = Math.floor((timeLeft % (1000 * 60 * 60)) / (1000 * 60));
                    const seconds = Math.floor((timeLeft % (1000 * 60)) / 1000);

                    const formatTime = (time) => String(time).padStart(2, '0');

                    timerElement.textContent = `${formatTime(hours)}:${formatTime(minutes)}:${formatTime(seconds)}`;
                }, 1000);
            } catch (error) {
                console.error("Error in startCountdown:", error);
            }
        }

        // --- MOBILE MENU LOGIC ---
        function toggleMobileMenu() {
            try {
                const menu = document.getElementById('mobile-menu');
                menu.classList.toggle('hidden');
            } catch (error) {
                console.error("Error toggling mobile menu:", error);
            }
        }

        function closeMobileMenu() {
            try {
                const menu = document.getElementById('mobile-menu');
                if (!menu.classList.contains('hidden')) {
                    menu.classList.add('hidden');
                }
            } catch (error) {
                console.error("Error closing mobile menu:", error);
            }
        }

        // --- COOKIE BANNER LOGIC ---
        function showCookieBanner() {
             try {
                const banner = document.getElementById('cookie-banner');
                if (banner && localStorage.getItem('cookieConsent') !== 'true') {
                    banner.style.display = 'block';
                    setTimeout(() => {
                        banner.classList.remove('translate-y-full');
                    }, 500);
                }
             } catch (error) {
                console.error("Error showing cookie banner:", error);
            }
        }

        function acceptCookies() {
            try {
                localStorage.setItem('cookieConsent', 'true');
                const banner = document.getElementById('cookie-banner');
                if (banner) {
                    banner.classList.add('translate-y-full');
                    setTimeout(() => {
                         banner.style.display = 'none';
                    }, 500);
                }
            } catch (error) {
                console.error("Error accepting cookies:", error);
            }
        }
        
        // --- INITIALIZATION ---

        function initializeApp() {
            try {
                // Set current year in footer
                const yearElement = document.getElementById('current-year');
                if (yearElement) yearElement.textContent = new Date().getFullYear();

                // Render all dynamic content
                renderHomeProviders();
                renderPlanComparisonTable();
                renderReviews();
                renderBlog();
                
                // Set initial step for order form
                nextStep(1); 

                // Start timer
                startCountdown();
                
                // Show cookie banner after a short delay
                setTimeout(showCookieBanner, 2000);

                // Setup Mobile Menu Toggle
                document.getElementById('mobile-menu-button').addEventListener('click', toggleMobileMenu);

            } catch (error) {
                console.error("Critical Initialization Error:", error);
            }
        }

        // Use DOMContentLoaded to ensure all elements exist before manipulating them
        document.addEventListener('DOMContentLoaded', initializeApp);

    </script>
</body>
</html>
